{
  "version": 3,
  "sources": ["../src/core/AuElement.js", "../src/core/bus.js", "../src/core/store.js", "../src/core/theme.js", "../src/core/router.js", "../src/core/http.js", "../src/core/ripple.js", "../src/core/agent-api.js", "../src/core/component-schema.js", "../src/core/layers.js", "../src/core/keyboard.js", "../src/core/breakpoints.js", "../src/core/utils.js", "../src/core/transitions.js", "../src/core/scheduler.js", "../src/core/render.js", "../src/components/au-stack.js", "../src/components/au-grid.js", "../src/components/au-container.js", "../src/components/au-navbar.js", "../src/components/au-sidebar.js", "../src/components/au-divider.js", "../src/components/au-layout.js", "../src/components/au-drawer.js", "../src/components/au-icon.js", "../src/components/au-drawer-item.js", "../src/components/au-bottom-nav.js", "../src/components/au-button.js", "../src/components/au-input.js", "../src/components/au-textarea.js", "../src/components/au-form.js", "../src/components/au-dropdown.js", "../src/core/form-styles.js", "../src/components/au-checkbox.js", "../src/components/au-switch.js", "../src/components/au-radio.js", "../src/components/au-chip.js", "../src/components/au-card.js", "../src/components/au-callout.js", "../src/components/au-tabs.js", "../src/components/au-alert.js", "../src/components/au-badge.js", "../src/components/au-progress.js", "../src/components/au-table.js", "../src/components/au-avatar.js", "../src/components/au-skeleton.js", "../src/components/au-spinner.js", "../src/components/au-modal.js", "../src/components/au-toast.js", "../src/components/au-tooltip.js", "../src/components/au-confirm.js", "../src/components/au-router.js", "../src/components/au-page.js", "../src/components/au-theme-toggle.js", "../src/components/au-splash.js", "../src/components/au-virtual-list.js", "../src/components/au-lazy.js", "../src/components/au-repeat.js", "../src/components/au-fetch.js", "../src/components/au-datatable.js", "../src/components/au-schema-form.js", "../src/components/au-prompt-ui.js", "../src/components/au-error-boundary.js", "../src/components/au-code.js", "../src/components/au-api-table.js", "../src/components/au-example.js", "../src/components/au-doc-page.js", "../src/core/constants.js", "../src/core/discovery.js", "../src/index.js"],
  "sourcesContent": [
    "/**\n * @fileoverview AuElement - Base Web Component Class (Optimized)\n * \n * 2025/2026 Best Practices Applied:\n * - Proper disconnectedCallback for memory safety\n * - Event listener tracking and cleanup\n * - AbortController for efficient listener removal\n * - CSS containment hints\n * - No memory leaks guaranteed\n * \n * Performance optimizations:\n * - No Shadow DOM overhead\n * - Efficient attribute observation\n * - DOM updates via mutation, not recreation\n * - content-visibility auto for off-screen elements\n */\n\n// ─── Precompiled regex for _inferButtonAction (P1.3 perf fix) ────────────────\n/** @private Matches submit-intent button labels */\nconst _RE_SUBMIT = /^(save|submit|confirm|send|create|add|apply|ok|yes)$/;\n/** @private Matches cancel-intent button labels */\nconst _RE_CANCEL = /^(cancel|close|dismiss|no|nevermind)$/;\n/** @private Matches delete-intent button labels */\nconst _RE_DELETE = /^(delete|remove|clear|trash)$/;\n/** @private Matches navigation-intent button labels */\nconst _RE_NAVIGATE = /^(back|next|previous|forward|continue)$/;\n\n/**\n * Base class for all AgentUI Web Components.\n *\n * Provides lifecycle management, memory-safe event handling via AbortController,\n * CSS lazy-loading, AI agent semantic attributes, and per-component readiness.\n * All AgentUI components extend this class instead of raw HTMLElement.\n *\n * @class\n * @extends HTMLElement\n *\n * @fires au:ready - Emitted once after the first render completes (bubbles, composed)\n *\n * @example\n * import { AuElement, define } from 'agentui-wc';\n *\n * class MyComponent extends AuElement {\n *     static baseClass = 'my-component';\n *     static observedAttributes = ['label'];\n *\n *     render() {\n *         this.innerHTML = `<span>${this.attr('label', 'Hello')}</span>`;\n *     }\n * }\n * define('my-component', MyComponent);\n */\nexport class AuElement extends HTMLElement {\n    /** @type {string[]} Attributes to observe for changes */\n    static observedAttributes = [];\n\n    /** @type {string} Base CSS class for the component */\n    static baseClass = '';\n\n    /** @type {string|null} CSS file name for lazy loading (e.g., 'button' loads components/button.css) */\n    static cssFile = null;\n\n    /** @type {Set} Track loaded CSS files globally to prevent duplicates */\n    static _loadedCSS = new Set();\n\n    /** @type {boolean} Whether bundle check has been performed */\n    static _bundleChecked = false;\n\n    /** @type {boolean} Whether agentui.css bundle is loaded (skip lazy CSS) */\n    static _bundleLoaded = false;\n\n    /** @type {boolean} Whether _initAgentLogger has run (P1.2 perf fix) */\n    static _agentLoggerInitialized = false;\n\n    /** @type {boolean} Apply CSS containment for perf */\n    static useContainment = true;\n\n    /**\n     * 2026: Self-documenting component for AI agents.\n     * Query component capabilities at runtime.\n     * \n     * Returns full metadata when catalog is loaded (via discoverAll()),\n     * or minimal info (name + props) as fallback — zero bundle cost.\n     * \n     * ENRICHED with runtime-only info that static docs cannot provide:\n     * - registered: is the component actually registered?\n     * - instanceCount: how many instances exist in the DOM?\n     * - instances: current state of first 5 instances (id, value, checked, visible)\n     * - composition: gotchas when used inside other components (e.g., dropdown in modal)\n     * \n     * @returns {Object} Component descriptor with runtime info\n     * @example\n     * await AgentUI.discoverAll(); // loads catalog once\n     * customElements.get('au-button').describe()\n     * // { name, description, props, events, runtime: { registered, instanceCount, ... }, ... }\n     */\n    static describe() {\n        const tag = this.baseClass\n            || this.name.replace(/^Au/, 'au-').replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\n        // Get catalog data (full metadata) or minimal fallback\n        const base = AuElement._describeCatalog?.[tag]\n            || {\n            name: tag,\n            props: this.observedAttributes || [],\n            baseClass: this.baseClass || '',\n            cssFile: this.cssFile || null\n        };\n\n        // Enrich with RUNTIME info — this is what makes describe() valuable vs reading docs\n        const instances = typeof document !== 'undefined'\n            ? Array.from(document.querySelectorAll(tag))\n            : [];\n\n        return {\n            ...base,\n            runtime: {\n                registered: typeof customElements !== 'undefined' && !!customElements.get(tag),\n                version: '0.1.149',\n                instanceCount: instances.length,\n                instances: instances.slice(0, 5).map(el => {\n                    const info = { id: el.id || null };\n                    if ('value' in el && el.value !== undefined) info.value = el.value;\n                    if ('checked' in el && el.checked !== undefined) info.checked = el.checked;\n                    if (typeof el.offsetParent !== 'undefined') info.visible = el.offsetParent !== null;\n                    return info;\n                })\n            }\n        };\n    }\n\n    /** @type {Object|null} Lazy-loaded describe catalog — populated by discoverAll() */\n    static _describeCatalog = null;\n\n    /** @type {boolean} Track if initial render has occurred */\n    _rendered = false;\n\n    /** @type {AbortController} For cleaning up event listeners */\n    _abortController = null;\n\n    /** @type {Set} Track timers for cleanup */\n    _timers = new Set();\n\n    /** @type {Set} Track intervals for cleanup */\n    _intervals = new Set();\n\n    /** @type {boolean} Whether component has completed first render */\n    isReady = false;\n\n    /** @private Resolver for ready promise */\n    _readyResolve = null;\n\n    /** @type {Promise<this>} Resolves after first connectedCallback render */\n    ready = new Promise(resolve => { this._readyResolve = resolve; });\n\n    /**\n     * Create a new AuElement instance.\n     * Initializes the global agent error logger on first instantiation.\n     */\n    constructor() {\n        super();\n        // Hoist to class-level: agent logger runs exactly once (P1.2 perf fix)\n        if (!AuElement._agentLoggerInitialized) {\n            AuElement._agentLoggerInitialized = true;\n            this._initAgentLogger();\n        }\n    }\n\n    /**\n     * Initialize the global agent error logger.\n     * Sets up `window.__AGENTUI_ERRORS__` and `window.AgentUIAgent` utilities\n     * for Puppeteer/Playwright-based agent debugging.\n     * @private\n     */\n    _initAgentLogger() {\n        if (!window.__AGENTUI_ERRORS__) {\n            window.__AGENTUI_ERRORS__ = [];\n        }\n\n        // Agent Help Utilities\n        if (!window.AgentUIAgent) {\n            window.AgentUIAgent = {\n                // Clear errors for a fresh test\n                reset: () => {\n                    window.__AGENTUI_ERRORS__ = [];\n                    console.log('[AgentUIAgent] Errors cleared');\n                },\n                // Get all errors\n                getErrors: () => window.__AGENTUI_ERRORS__,\n                // Check if component has error\n                hasError: (tagName, code) => {\n                    return window.__AGENTUI_ERRORS__.some(e =>\n                        e.component === tagName.toLowerCase() && e.code === code\n                    );\n                }\n            };\n        }\n    }\n\n    /**\n     * Log error for Agent Debugging (Puppeteer/Playwright access)\n     * @param {string} code - Error code (e.g. 'A11Y_MISSING_LABEL')\n     * @param {string} message - Human readable message\n     */\n    logError(code, message) {\n        const error = {\n            component: this.tagName.toLowerCase(),\n            code,\n            message,\n            element: this, // Reference leak only if used in dev tools, should be safe for tests\n            timestamp: Date.now()\n        };\n        window.__AGENTUI_ERRORS__.push(error);\n        console.warn(`[AgentUI] ${code}: ${message}`, this);\n    }\n\n    /**\n     * Called when element is added to DOM.\n     * Sets up base class, containment, and triggers initial render.\n     */\n    connectedCallback() {\n        // Reuse existing AbortController to prevent duplicate event listeners\n        // when element is moved in DOM (connectedCallback called multiple times)\n        if (!this._abortController) {\n            this._abortController = new AbortController();\n        }\n\n        // Add base class\n        if (this.constructor.baseClass) {\n            this.classList.add(this.constructor.baseClass);\n        }\n\n        // Apply CSS containment for rendering performance\n        if (this.constructor.useContainment && !this.style.contain) {\n            this.style.contain = 'layout style';\n        }\n\n        // 2026: Automatic event delegation on component root\n        // Single listener handles all [data-action] clicks - no timing issues\n        // Attached BEFORE render so it catches events on dynamically created elements\n        this.#setupEventDelegation();\n\n        // Initial render\n        if (!this._rendered) {\n            this.render();\n            this._rendered = true;\n        }\n\n        // Lazy load component CSS\n        this._loadComponentCSS();\n\n        // 2026 Agent Optimization: Auto-infer semantic action attributes\n        this._inferSemanticAttributes();\n\n        // 2026: Per-component readiness — fires once after first render\n        if (!this.isReady) {\n            this.isReady = true;\n            this._readyResolve(this);\n            // Defensive: dispatchEvent may throw in test environments (linkedom)\n            // .ready promise and .isReady flag work regardless of event dispatch\n            try {\n                this.dispatchEvent(new CustomEvent('au:ready', {\n                    bubbles: true, composed: true\n                }));\n            } catch (_) { /* linkedom readonly property bug */ }\n        }\n    }\n\n    /**\n     * 2026: Centralized event delegation pattern.\n     * Single click listener on component root that delegates to [data-action] elements.\n     * Components implement handleAction(action, target, event) to handle actions.\n     * @private\n     */\n    #setupEventDelegation() {\n        this.listen(this, 'click', (e) => {\n            const actionEl = e.target.closest('[data-action]');\n            if (!actionEl || !this.contains(actionEl)) return;\n\n            const action = actionEl.dataset.action;\n            if (this.handleAction) {\n                this.handleAction(action, actionEl, e);\n            }\n        });\n    }\n\n    /**\n     * Lazy load component-specific CSS file.\n     * Only loads once per CSS file across all instances.\n     * SKIPPED when agentui.css bundle is already loaded (prevents 404 errors).\n     * @private\n     */\n    _loadComponentCSS() {\n        const cssFile = this.constructor.cssFile;\n        if (!cssFile) return;\n\n        // Skip if bundle CSS is present (prevents 404 errors when using npm bundle)\n        // Multiple detection strategies:\n        if (!AuElement._bundleChecked) {\n            AuElement._bundleChecked = true;\n            AuElement._bundleLoaded =\n                // 1. Direct link to agentui.css (CDN or local)\n                !!document.querySelector('link[href*=\"agentui.css\"], link[href*=\"agentui.min.css\"]') ||\n                // 2. node_modules import pattern\n                !!document.querySelector('link[href*=\"agentui-wc\"]') ||\n                // 3. Already have AgentUI base styles loaded (components.css or similar)\n                !!document.querySelector('link[href*=\"components.css\"]') ||\n                // 4. Style tag marked by bundler\n                !!document.querySelector('style[data-agentui]') ||\n                // 5. Check for AgentUI CSS custom property token (O(1) vs O(n×m) cssRules scan — P1.1 perf fix)\n                (typeof getComputedStyle !== 'undefined' &&\n                    getComputedStyle(document.documentElement)\n                        .getPropertyValue('--md-sys-color-primary').trim() !== '');\n        }\n        if (AuElement._bundleLoaded) return;\n\n        // Check if already loaded (global static Set)\n        if (AuElement._loadedCSS.has(cssFile)) return;\n        AuElement._loadedCSS.add(cssFile);\n\n        // Create and append link element\n        const link = document.createElement('link');\n        link.id = `au-css-${cssFile}`;\n        link.rel = 'stylesheet';\n\n        // Determine base path - check multiple sources\n        let basePath = '/styles/';\n\n        // 1. Check for existing styles/ link (direct styles loading)\n        const stylesLink = document.querySelector('link[href*=\"/styles/\"]');\n        if (stylesLink) {\n            const match = stylesLink.href.match(/(.*\\/(?:src\\/|dist\\/)?styles\\/)/);\n            if (match) basePath = match[1];\n        }\n        // 2. Check for dist/ path -> use dist/styles/\n        else {\n            const distLink = document.querySelector('link[href*=\"/dist/\"]');\n            if (distLink) {\n                const match = distLink.href.match(/(.*\\/dist\\/)/);\n                if (match) basePath = match[1] + 'styles/';\n            }\n            // 3. Check for src/ pattern in scripts (dev mode)\n            else {\n                const srcScript = document.querySelector('script[src*=\"/src/\"]');\n                if (srcScript) {\n                    const match = srcScript.src.match(/(.*\\/src\\/)/);\n                    if (match) basePath = match[1] + 'styles/';\n                }\n            }\n        }\n\n        // R6 Security: Validate basePath is same-origin to prevent CSS injection via DOM clobbering\n        if (basePath.startsWith('http') || basePath.startsWith('//')) {\n            try {\n                const baseUrl = new URL(basePath, window.location.origin);\n                if (baseUrl.origin !== window.location.origin) {\n                    console.warn(`[AgentUI] Blocked cross-origin CSS path: ${basePath}`);\n                    basePath = '/styles/';\n                }\n            } catch {\n                basePath = '/styles/';\n            }\n        }\n\n        link.href = `${basePath}components/${cssFile}.css`;\n        document.head.appendChild(link);\n    }\n\n    /**\n     * Infer and set data-au-action and data-au-role attributes for AI agents.\n     * Based on 2026 Agentic Web research - semantic attributes reduce task failure.\n     * @private\n     */\n    _inferSemanticAttributes() {\n        const tag = this.tagName.toLowerCase();\n\n        // Skip if already has explicit action\n        if (this.hasAttribute('data-au-action')) return;\n\n        // Infer action based on component type\n        let action = '';\n        let role = '';\n\n        switch (tag) {\n            case 'au-button':\n                action = this._inferButtonAction();\n                role = this._inferButtonRole();\n                break;\n            case 'au-input':\n            case 'au-textarea':\n                action = 'input';\n                role = 'text-field';\n                break;\n            case 'au-checkbox':\n            case 'au-switch':\n                action = 'toggle';\n                role = 'control';\n                break;\n            case 'au-dropdown':\n                action = 'select';\n                role = 'selector';\n                break;\n            case 'au-modal':\n                action = 'dialog';\n                role = 'overlay';\n                break;\n            case 'au-tabs':\n                action = 'navigate';\n                role = 'navigation';\n                break;\n            case 'au-card':\n                role = 'container';\n                break;\n        }\n\n        if (action) this.setAttribute('data-au-action', action);\n        if (role) this.setAttribute('data-au-role', role);\n    }\n\n    /**\n     * Infer button action from text content.\n     * Uses precompiled module-level regex for performance.\n     * @returns {string} Inferred action (submit | cancel | delete | navigate | click)\n     * @private\n     */\n    _inferButtonAction() {\n        const text = this.textContent?.toLowerCase().trim() || '';\n\n        // Precompiled regex (module-level) — P1.3 perf fix\n        if (_RE_SUBMIT.test(text)) return 'submit';\n        if (_RE_CANCEL.test(text)) return 'cancel';\n        if (_RE_DELETE.test(text)) return 'delete';\n        if (_RE_NAVIGATE.test(text)) return 'navigate';\n        return 'click';\n    }\n\n    /**\n     * Infer button role from its variant attribute.\n     * @returns {string} Inferred role (primary-action | secondary-action | tertiary-action | destructive-action | action)\n     * @private\n     */\n    _inferButtonRole() {\n        const variant = this.getAttribute('variant');\n\n        // Primary action buttons\n        if (variant === 'filled' || variant === 'elevated') {\n            return 'primary-action';\n        }\n        // Secondary actions\n        if (variant === 'tonal' || variant === 'outlined') {\n            return 'secondary-action';\n        }\n        // Tertiary/dismiss\n        if (variant === 'text') {\n            return 'tertiary-action';\n        }\n        // Danger\n        if (variant === 'danger') {\n            return 'destructive-action';\n        }\n        return 'action';\n    }\n\n    /**\n     * Called when element is removed from DOM.\n     * CRITICAL: Clean up all event listeners and timers to prevent memory leaks.\n     */\n    disconnectedCallback() {\n        // Abort all event listeners registered with signal\n        if (this._abortController) {\n            this._abortController.abort();\n            this._abortController = null;\n        }\n\n        // Clear all timers\n        for (const timer of this._timers) {\n            clearTimeout(timer);\n        }\n        this._timers.clear();\n\n        // Clear all intervals\n        for (const interval of this._intervals) {\n            clearInterval(interval);\n        }\n        this._intervals.clear();\n\n        // Call subclass cleanup\n        this.cleanup();\n    }\n\n    /**\n     * Override in subclass for custom cleanup logic.\n     * Called automatically from `disconnectedCallback` after AbortController\n     * and timers have been cleaned up.\n     * @abstract\n     * @protected\n     */\n    cleanup() {\n        // Override in subclass\n    }\n\n    /**\n     * Called when observed attribute changes.\n     * Triggers efficient update, not full re-render.\n     * @param {string} name - Attribute name\n     * @param {string|null} oldValue - Previous attribute value\n     * @param {string|null} newValue - New attribute value\n     */\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (oldValue !== newValue && this._rendered) {\n            this.update(name, newValue, oldValue);\n        }\n    }\n\n    /**\n     * Initial render — override in subclass to build component DOM.\n     * Called once during the first `connectedCallback`.\n     * @abstract\n     * @protected\n     */\n    render() {\n        // Override in subclass\n    }\n\n    /**\n     * Efficient update — override in subclass.\n     * Called when an observed attribute changes. Modifies existing DOM, never recreates.\n     * @param {string} attr - Changed attribute name\n     * @param {string|null} newValue - New attribute value\n     * @param {string|null} oldValue - Previous attribute value\n     * @abstract\n     * @protected\n     */\n    update(attr, newValue, oldValue) {\n        // Override in subclass\n    }\n\n    /**\n     * 2026: Deferred event setup - override in subclass.\n     * Called via queueMicrotask AFTER render() completes.\n     * Guarantees DOM is stable before attaching listeners.\n     * Use this.listen() for automatic cleanup on disconnect.\n     * \n     * @example\n     * setupEvents() {\n     *     this.listen(this.button, 'click', () => this.handleClick());\n     * }\n     */\n    setupEvents() {\n        // Override in subclass\n    }\n\n    /**\n     * Helper: Get attribute value with a fallback default.\n     * @param {string} name - Attribute name\n     * @param {string} [defaultValue=''] - Value to return if attribute is missing\n     * @returns {string} Attribute value or default\n     */\n    attr(name, defaultValue = '') {\n        return this.getAttribute(name) ?? defaultValue;\n    }\n\n    /**\n     * Helper: Check if a boolean attribute is present.\n     * @param {string} name - Attribute name\n     * @returns {boolean} True if the attribute exists\n     */\n    has(name) {\n        return this.hasAttribute(name);\n    }\n\n    /**\n     * Helper: Emit a custom event that bubbles and crosses shadow DOM boundaries.\n     * @param {string} name - Event name (e.g. 'au-change')\n     * @param {Object} [detail={}] - Event detail payload\n     */\n    emit(name, detail = {}) {\n        this.dispatchEvent(new CustomEvent(name, {\n            bubbles: true,\n            composed: true,\n            detail\n        }));\n    }\n\n    /**\n     * Safe addEventListener with automatic cleanup on disconnect.\n     * Uses AbortController signal for efficient removal.\n     *\n     * @param {EventTarget} target - Element to attach the listener to\n     * @param {string} type - Event type\n     * @param {EventListener} listener - Event handler\n     * @param {AddEventListenerOptions} [options={}] - Event options\n     */\n    listen(target, type, listener, options = {}) {\n        if (!this._abortController) {\n            this._abortController = new AbortController();\n        }\n\n        const opts = {\n            ...options,\n            signal: this._abortController.signal\n        };\n\n        target.addEventListener(type, listener, opts);\n    }\n\n    /**\n     * Safe setTimeout with automatic cleanup on disconnect.\n     * @param {Function} fn - Callback\n     * @param {number} delay - Delay in ms\n     * @returns {number} Timer ID\n     */\n    setTimeout(fn, delay) {\n        let id;\n        id = setTimeout(() => {\n            this._timers.delete(id);\n            fn();\n        }, delay);\n        this._timers.add(id);\n        return id;\n    }\n\n    /**\n     * Safe setInterval with automatic cleanup on disconnect.\n     * @param {Function} fn - Callback\n     * @param {number} delay - Interval in ms\n     * @returns {number} Interval ID\n     */\n    setInterval(fn, delay) {\n        const id = setInterval(fn, delay);\n        this._intervals.add(id);\n        return id;\n    }\n\n    /**\n     * Helper: Setup keyboard activation (Enter/Space triggers callback).\n     * Also sets up tabindex based on disabled state.\n     * Consolidates repeated pattern across interactive components.\n     * \n     * @param {Function} callback - Function to call on activation\n     */\n    setupActivation(callback) {\n        this.updateTabindex();\n        this.listen(this, 'keydown', (e) => {\n            if ((e.key === 'Enter' || e.key === ' ') && !this.has('disabled')) {\n                e.preventDefault();\n                callback();\n            }\n        });\n    }\n\n    /**\n     * Helper: Update tabindex based on disabled state.\n     * Interactive elements should be focusable unless disabled.\n     */\n    updateTabindex() {\n        this.setAttribute('tabindex', this.has('disabled') ? '-1' : '0');\n    }\n\n    /**\n     * Helper: Set display style consistently.\n     * @param {string} value - CSS display value (flex, block, inline-flex, etc.)\n     */\n    setDisplay(value) {\n        this.style.display = value;\n    }\n\n    /**\n     * Helper: Check if component is disabled.\n     * @returns {boolean}\n     */\n    get isDisabled() {\n        return this.has('disabled');\n    }\n}\n\n/**\n * 2026: Scheduler API-enhanced component registration.\n * Yields to main thread between registrations to prevent long tasks (>50ms).\n * Uses scheduler.yield() on Chrome 129+, falls back to setTimeout(0).\n * \n * @param {string} tagName - Custom element tag name\n * @param {typeof HTMLElement} ComponentClass - Component class to register\n * @param {Object} options - Registration options\n * @param {string} options.priority - 'user-blocking' (default) | 'user-visible' | 'background'\n */\nexport function define(tagName, ComponentClass, options = {}) {\n    if (customElements.get(tagName)) return;\n\n    const priority = options.priority || 'user-blocking';\n\n    // 2026: Use Scheduler API for prioritized registration\n    if (typeof scheduler !== 'undefined' && scheduler.postTask) {\n        scheduler.postTask(() => {\n            if (!customElements.get(tagName)) {\n                customElements.define(tagName, ComponentClass);\n            }\n        }, { priority });\n    } else {\n        // Fallback: immediate registration for older browsers\n        customElements.define(tagName, ComponentClass);\n    }\n}\n\n/**\n * 2026: Batch component registration with yielding.\n * Registers multiple components while yielding to main thread between each.\n * Prevents long tasks and keeps UI responsive during initial load.\n * \n * @param {Array<[string, typeof HTMLElement]>} components - Array of [tagName, Class] pairs\n * @param {Object} options - Registration options\n * @param {number} options.batchSize - Components per batch before yield (default: 3)\n * @returns {Promise<void>} Resolves when all components are registered\n */\nexport async function defineAll(components, options = {}) {\n    const batchSize = options.batchSize || 3;\n    const yieldToMain = getYieldFunction();\n\n    for (let i = 0; i < components.length; i++) {\n        const [tagName, ComponentClass] = components[i];\n\n        if (!customElements.get(tagName)) {\n            customElements.define(tagName, ComponentClass);\n        }\n\n        // Yield to main thread after each batch to prevent long tasks\n        if ((i + 1) % batchSize === 0 && i < components.length - 1) {\n            await yieldToMain();\n        }\n    }\n}\n\n/**\n * Get the best yield function available.\n * 2026: scheduler.yield() > setTimeout(0)\n * @returns {Function} Async yield function\n */\nfunction getYieldFunction() {\n    // Chrome 129+: scheduler.yield() is the most efficient\n    if (typeof scheduler !== 'undefined' && scheduler.yield) {\n        return () => scheduler.yield();\n    }\n\n    // Fallback: setTimeout(0) yields to event loop\n    return () => new Promise(resolve => setTimeout(resolve, 0));\n}\n",
    "/**\n * @fileoverview AgentUI EventBus - Lightweight Built-in Implementation\n * \n * Zero-dependency event bus for AgentUI components.\n * Built-in lightweight event bus for AgentUI components.\n * \n * Performance: ~100M ops/sec with emitSync (simple Map + Set)\n * Features: \n *  - emit/on/off/once with wildcard support\n *  - Request/response pattern (RPC)\n *  - Inbound/outbound hooks for observability\n *  - Capability discovery for AI agents\n *  - Health monitoring\n */\n\n/** @type {string} AgentUI framework version */\nexport const AGENTUI_VERSION = '0.1.144';\n\n/** @private Window singleton key for shared bus across split bundles/chunks */\nconst GLOBAL_BUS_KEY = '__AGENTUI_BUS__';\n/** @private Global scope reference (window or globalThis) */\nconst globalScope = typeof window !== 'undefined' ? window : globalThis;\n\n/** @private AI Agent Discovery: list of UI capabilities for negotiation */\nconst AGENTUI_CAPABILITIES = [\n    'ui:toast', 'ui:modal', 'ui:theme', 'ui:tabs',\n    'ui:dropdown', 'ui:form', 'ui:grid', 'ui:stack', 'ui:virtual-list'\n];\n\n/** @private Framework metadata exposed to bus peers */\nconst AGENTUI_META = {\n    type: 'ui-framework',\n    version: AGENTUI_VERSION,\n    description: 'AI-Optimized UI Framework - Web Components Edition'\n};\n\n// ============================================================================\n// Lightweight Event Emitter (LightBus)\n// ============================================================================\n\n/**\n * Lightweight event emitter with wildcard support, request/response RPC,\n * and observability hooks. Used as the singleton backbone for all AgentUI\n * inter-component communication.\n *\n * @class\n * @private\n */\nclass LightBus {\n    /** @type {Map<string, Set<Function>>} Exact-match event → listeners */\n    #listeners = new Map();\n    /** @type {Map<string, Set<Function>>} Wildcard prefix → listeners (P1.5 perf fix) */\n    #wildcards = new Map();\n    /** @type {Map<string, Function>} RPC handler name → handler function */\n    #handlers = new Map();\n    /** @type {Set<Function>} Inbound hooks for message interception */\n    #inboundHooks = new Set();\n    /** @type {Set<Function>} Outbound hooks for message interception */\n    #outboundHooks = new Set();\n    /** @type {number} Maximum listeners per event before warning */\n    #maxListeners = 100;\n    /** @type {boolean} Debug mode flag */\n    #debug = false;\n    /** @type {number} Creation timestamp for uptime tracking */\n    #createdAt = Date.now();\n\n    /** @type {string} Unique peer identifier */\n    peerId;\n    /** @type {string[]} List of supported capabilities */\n    capabilities;\n    /** @type {Object} Framework metadata */\n    meta;\n\n    /**\n     * @param {Object} [config={}] - Bus configuration\n     * @param {string} [config.peerId='default'] - Unique peer identifier\n     * @param {string[]} [config.capabilities=[]] - Supported capabilities\n     * @param {Object} [config.meta={}] - Framework metadata\n     * @param {boolean} [config.debug=false] - Enable debug logging\n     */\n    constructor(config = {}) {\n        this.peerId = config.peerId ?? 'default';\n        this.capabilities = config.capabilities ?? [];\n        this.meta = config.meta ?? {};\n        this.#debug = config.debug ?? false;\n    }\n\n    /**\n     * Subscribe to an event. Supports wildcard suffixes (e.g. `'ui:*'`).\n     * @param {string} event - Event name or wildcard pattern\n     * @param {Function} callback - Listener function\n     * @returns {{ unsubscribe: Function }} Subscription with unsubscribe method\n     */\n    on(event, callback) {\n        // P1.5 perf fix: route wildcards to dedicated Map for O(1) prefix matching\n        if (event.endsWith('*')) {\n            const prefix = event.slice(0, -1);\n            if (!this.#wildcards.has(prefix)) {\n                this.#wildcards.set(prefix, new Set());\n            }\n            this.#wildcards.get(prefix).add(callback);\n            return { unsubscribe: () => this.#wildcards.get(prefix)?.delete(callback) };\n        }\n\n        if (!this.#listeners.has(event)) {\n            this.#listeners.set(event, new Set());\n        }\n        const wrappedCb = callback;\n        this.#listeners.get(event).add(wrappedCb);\n\n        // Warn on potential memory leak (Node.js EventEmitter pattern)\n        const count = this.#listeners.get(event).size;\n        if (count > this.#maxListeners) {\n            console.warn(\n                `[AgentUI] Possible event leak: \"${event}\" has ${count} listeners ` +\n                `(maxListeners: ${this.#maxListeners}). Use setMaxListeners() to increase.`\n            );\n        }\n\n        return { unsubscribe: () => this.#listeners.get(event)?.delete(wrappedCb) };\n    }\n\n    /**\n     * Unsubscribe a listener from an event.\n     * @param {string} event - Event name or wildcard pattern\n     * @param {Function} callback - The original listener to remove\n     */\n    off(event, callback) {\n        if (event.endsWith('*')) {\n            const prefix = event.slice(0, -1);\n            this.#wildcards.get(prefix)?.delete(callback);\n            return;\n        }\n        this.#listeners.get(event)?.delete(callback);\n    }\n\n    /**\n     * Emit an event synchronously. Applies outbound/inbound hooks, then\n     * notifies exact-match and wildcard listeners.\n     * @param {string} event - Event name\n     * @param {*} data - Event payload\n     */\n    emitSync(event, data) {\n        let payload = { event, data };\n\n        // Apply outbound hooks (once per event)\n        for (const hook of this.#outboundHooks) {\n            payload = hook(payload, { event }) ?? payload;\n        }\n\n        // Apply inbound hooks (once per event, not per listener)\n        let inPayload = payload;\n        for (const hook of this.#inboundHooks) {\n            inPayload = hook(inPayload, { event }) ?? inPayload;\n        }\n\n        const listeners = this.#listeners.get(event);\n        if (listeners) {\n            for (const cb of listeners) {\n                cb(inPayload);\n            }\n        }\n\n        // P1.5 perf fix: Wildcard matching via dedicated Map (no full scan)\n        for (const [prefix, cbs] of this.#wildcards) {\n            if (event.startsWith(prefix)) {\n                for (const cb of cbs) {\n                    cb(inPayload);\n                }\n            }\n        }\n    }\n\n    /**\n     * Emit an event asynchronously.\n     * @param {string} event - Event name\n     * @param {*} data - Event payload\n     * @returns {Promise<{ delivered: boolean, event: string }>}\n     */\n    async emit(event, data) {\n        this.emitSync(event, data);\n        return { delivered: true, event };\n    }\n\n    /**\n     * Fire-and-forget signal broadcast (alias for emitSync).\n     * @param {string} event - Event name\n     * @param {*} data - Event payload\n     */\n    signal(event, data) {\n        this.emitSync(event, data);\n    }\n\n    /**\n     * Check if an event has any registered listeners.\n     * @param {string} event - Event name\n     * @returns {boolean}\n     */\n    hasListeners(event) {\n        return (this.#listeners.get(event)?.size ?? 0) > 0;\n    }\n\n    /**\n     * Register an RPC handler by name.\n     * @param {string} name - Handler name\n     * @param {Function} handler - Handler function\n     * @returns {{ unsubscribe: Function }} Subscription with unsubscribe method\n     */\n    handle(name, handler) {\n        this.#handlers.set(name, handler);\n        return { unsubscribe: () => this.#handlers.delete(name) };\n    }\n\n    /**\n     * Remove a registered RPC handler.\n     * @param {string} name - Handler name\n     */\n    unhandle(name) {\n        this.#handlers.delete(name);\n    }\n\n    /**\n     * Send an RPC request to a named handler.\n     * @param {string} peerId - Target peer (unused in LightBus, kept for API parity)\n     * @param {string} handler - Handler name\n     * @param {*} payload - Request payload\n     * @returns {Promise<*>} Handler result\n     * @throws {Error} If no handler is registered for the given name\n     */\n    async request(peerId, handler, payload) {\n        const h = this.#handlers.get(handler);\n        if (!h) throw new Error(`No handler for '${handler}'`);\n        return h(payload);\n    }\n\n    /**\n     * Broadcast an RPC request to own peer.\n     * @param {string} handler - Handler name\n     * @param {*} payload - Request payload\n     * @returns {Promise<*>} Handler result\n     */\n    async broadcastRequest(handler, payload) {\n        return this.request(this.peerId, handler, payload);\n    }\n\n    /**\n     * Add an inbound hook for message interception (observability).\n     * @param {Function} fn - Hook function `(payload, context) => payload`\n     * @returns {Function} Remove-hook function\n     */\n    addInboundHook(fn) {\n        this.#inboundHooks.add(fn);\n        return () => this.#inboundHooks.delete(fn);\n    }\n\n    /**\n     * Add an outbound hook for message interception (observability).\n     * @param {Function} fn - Hook function `(payload, context) => payload`\n     * @returns {Function} Remove-hook function\n     */\n    addOutboundHook(fn) {\n        this.#outboundHooks.add(fn);\n        return () => this.#outboundHooks.delete(fn);\n    }\n\n    /**\n     * Set maximum listeners per event before leak warnings.\n     * @param {number} n - Max listener count\n     */\n    setMaxListeners(n) { this.#maxListeners = n; }\n\n    /** @returns {boolean} Whether debug mode is enabled */\n    get debug() { return this.#debug; }\n\n    /** @returns {Array} Connected peers (always empty in LightBus — no networking) */\n    get peers() { return []; }\n\n    /** @returns {number} Connected peer count (always 0 in LightBus) */\n    get peerCount() { return 0; }\n\n    /**\n     * Get bus health status.\n     * @returns {{ status: string, peerId: string, uptime: number, listeners: number, handlers: number }}\n     */\n    healthCheck() {\n        return {\n            status: 'healthy',\n            peerId: this.peerId,\n            uptime: Date.now() - this.#createdAt,\n            listeners: this.#listeners.size,\n            handlers: this.#handlers.size\n        };\n    }\n\n    /**\n     * Destroy the bus — clears all listeners, handlers, and hooks.\n     */\n    destroy() {\n        this.#listeners.clear();\n        this.#handlers.clear();\n        this.#inboundHooks.clear();\n        this.#outboundHooks.clear();\n    }\n}\n\n// ============================================================================\n// Singleton Instance\n// ============================================================================\nif (!globalScope[GLOBAL_BUS_KEY]) {\n    globalScope[GLOBAL_BUS_KEY] = new LightBus({\n        peerId: 'agentui',\n        capabilities: AGENTUI_CAPABILITIES,\n        meta: AGENTUI_META\n    });\n}\n\nconst lightBus = globalScope[GLOBAL_BUS_KEY];\n\n// ============================================================================\n// COMPONENT CAPABILITY REGISTRY\n// ============================================================================\nconst COMPONENT_REGISTRY_KEY = '__AGENTUI_COMPONENT_REGISTRY__';\nif (!globalScope[COMPONENT_REGISTRY_KEY]) {\n    globalScope[COMPONENT_REGISTRY_KEY] = new Map();\n}\nconst componentRegistry = globalScope[COMPONENT_REGISTRY_KEY];\n\n/** @private Track original→wrapped callback mapping for bus.off() support */\nconst _callbackMap = new WeakMap();\n\n/**\n * Simplified bus wrapper for AgentUI components.\n * All public API interactions go through this object rather than the\n * internal LightBus singleton.\n *\n * @namespace bus\n */\nexport const bus = {\n    /**\n     * Subscribe to a signal\n     * @param {string} event - Event name (supports wildcards 'ui:*')\n     * @param {Function} callback - Handler function\n     * @returns {Function} Unsubscribe function\n     */\n    on(event, callback) {\n        const wrappedCb = (eventData) => {\n            callback(eventData.data ?? eventData);\n        };\n        // Store mapping so off() can find the wrapped version\n        if (!_callbackMap.has(callback)) {\n            _callbackMap.set(callback, new Map());\n        }\n        _callbackMap.get(callback).set(event, wrappedCb);\n\n        const subscription = lightBus.on(event, wrappedCb);\n        return () => {\n            subscription.unsubscribe();\n            _callbackMap.get(callback)?.delete(event);\n        };\n    },\n\n    /**\n     * Subscribe to a signal once — auto-unsubscribes after first call.\n     * @param {string} event - Event name\n     * @param {Function} callback - Handler function (receives data payload)\n     */\n    once(event, callback) {\n        const unsub = this.on(event, (data) => {\n            unsub();\n            callback(data);\n        });\n    },\n\n    /**\n     * Unsubscribe a listener from a signal.\n     * @param {string} event - Event name\n     * @param {Function} callback - The original listener passed to `on()`\n     */\n    off(event, callback) {\n        const wrappedCb = _callbackMap.get(callback)?.get(event);\n        if (wrappedCb) {\n            lightBus.off(event, wrappedCb);\n            _callbackMap.get(callback)?.delete(event);\n        }\n    },\n\n    /**\n     * Emit a signal synchronously for maximum performance.\n     * @param {string} event - Event name (e.g. `UIEvents.TOAST_SHOW`)\n     * @param {*} data - Event payload\n     */\n    emit(event, data) {\n        return lightBus.emitSync(event, data);\n    },\n\n    /**\n     * Emit a signal asynchronously with delivery confirmation.\n     * @param {string} event - Event name\n     * @param {*} data - Event payload\n     * @returns {Promise<{ delivered: boolean, event: string }>}\n     */\n    async emitAsync(event, data) {\n        return lightBus.emit(event, data);\n    },\n\n    /**\n     * Fire-and-forget signal broadcast.\n     * @param {string} event - Event name\n     * @param {*} data - Event payload\n     */\n    signal(event, data) {\n        lightBus.signal(event, data);\n    },\n\n    /**\n     * Send an RPC request to a peer handler.\n     * @param {string} peerId - Target peer identifier\n     * @param {string} handler - Handler name\n     * @param {*} payload - Request payload\n     * @returns {Promise<*>} Handler result\n     */\n    async request(peerId, handler, payload) {\n        return lightBus.request(peerId, handler, payload);\n    },\n\n    /**\n     * Broadcast an RPC request.\n     * @param {string} handler - Handler name\n     * @param {*} payload - Request payload\n     * @returns {Promise<*>} Handler result\n     */\n    async broadcastRequest(handler, payload) {\n        return lightBus.broadcastRequest(handler, payload);\n    },\n\n    /**\n     * Register an RPC request handler.\n     * @param {string} name - Handler name\n     * @param {Function} handler - Handler function\n     * @returns {{ unsubscribe: Function }} Subscription with unsubscribe method\n     */\n    handle(name, handler) {\n        return lightBus.handle(name, handler);\n    },\n\n    /**\n     * Remove a registered RPC handler.\n     * @param {string} name - Handler name\n     */\n    unhandle(name) {\n        lightBus.unhandle(name);\n    },\n\n    /** Destroy the bus — clears all listeners and handlers to prevent memory leaks. */\n    destroy() {\n        lightBus.destroy();\n    },\n\n    /**\n     * Set maximum listeners per event before leak warnings.\n     * @param {number} n - Max listener count\n     */\n    setMaxListeners(n) {\n        lightBus.setMaxListeners(n);\n    },\n\n    /** @returns {string} This peer's unique identifier */\n    get peerId() { return lightBus.peerId; },\n    /** @returns {Array} Connected peers */\n    get peers() { return lightBus.peers; },\n    /** @returns {number} Connected peer count */\n    get peerCount() { return lightBus.peerCount; },\n\n    /**\n     * Check if listeners exist for a given signal.\n     * @param {string} event - Event name\n     * @returns {boolean}\n     */\n    hasListeners(event) { return lightBus.hasListeners(event); },\n\n    /** @returns {LightBus} Direct access to the underlying bus instance */\n    get raw() { return lightBus; }\n};\n\n/**\n * Predefined UI event names used across AgentUI components.\n * @readonly\n * @enum {string}\n */\nexport const UIEvents = {\n    TOAST_SHOW: 'ui:toast:show',\n    TOAST_DISMISS: 'ui:toast:dismiss',\n    MODAL_OPEN: 'ui:modal:open',\n    MODAL_CLOSE: 'ui:modal:close',\n    THEME_CHANGE: 'ui:theme:change',\n    TAB_CHANGE: 'ui:tab:change',\n    DROPDOWN_SELECT: 'ui:dropdown:select',\n    FORM_SUBMIT: 'ui:form:submit',\n    FORM_VALIDATE: 'ui:form:validate'\n};\n\n/**\n * Convenience helper to show a toast notification via the bus.\n * @param {string} message - Toast message text\n * @param {Object} [options={}] - Additional toast options (variant, duration, etc.)\n */\nexport const showToast = (message, options = {}) => {\n    bus.emit(UIEvents.TOAST_SHOW, { message, ...options });\n};\n\n// ============================================================================\n// AI AGENT FEATURES\n// ============================================================================\n\n/**\n * Check if bus debug mode is enabled.\n * @returns {boolean}\n */\nexport const isDebugEnabled = () => lightBus.debug;\n\n/**\n * @deprecated Use isDebugEnabled() instead.\n * @returns {boolean}\n */\nexport const enableDebug = () => {\n    console.warn('[AgentUI] enableDebug() is deprecated. Debug mode is set at creation.');\n    return lightBus.debug;\n};\n\n/**\n * @deprecated Debug mode cannot be toggled after creation.\n */\nexport const disableDebug = () => {\n    console.warn('[AgentUI] disableDebug() is deprecated. Debug mode is set at creation.');\n};\n\n/**\n * Get bus health status including uptime, listener counts, and handler counts.\n * @returns {{ status: string, peerId: string, uptime: number, listeners: number, handlers: number }}\n */\nexport const getHealth = () => {\n    return lightBus.healthCheck?.() ?? {\n        status: 'unknown',\n        peerId: lightBus.peerId,\n        note: 'healthCheck not available'\n    };\n};\n\n/**\n * Get the full set of framework capabilities and metadata.\n * @returns {{ peerId: string, capabilities: string[], meta: Object, version: string }}\n */\nexport const getCapabilities = () => ({\n    peerId: lightBus.peerId,\n    capabilities: AGENTUI_CAPABILITIES,\n    meta: AGENTUI_META,\n    version: AGENTUI_VERSION\n});\n\n/**\n * Add an inbound hook for message interception.\n * @param {Function} fn - Hook function `(payload, context) => payload`\n * @returns {Function} Remove-hook function\n */\nexport const addInboundHook = (fn) => {\n    return lightBus.addInboundHook?.(fn) ?? (() => { });\n};\n\n/**\n * Add an outbound hook for message interception.\n * @param {Function} fn - Hook function `(payload, context) => payload`\n * @returns {Function} Remove-hook function\n */\nexport const addOutboundHook = (fn) => {\n    return lightBus.addOutboundHook?.(fn) ?? (() => { });\n};\n\n// ============================================================================\n// COMPONENT CAPABILITY REGISTRATION\n// ============================================================================\n\n/**\n * Register a component's capabilities in the global registry.\n * @param {string} tagName - Custom element tag name\n * @param {Object} capabilities - Component capabilities descriptor\n */\nexport const registerComponent = (tagName, capabilities) => {\n    componentRegistry.set(tagName, { ...capabilities, registeredAt: Date.now() });\n};\n\n/**\n * Unregister a component from the global registry.\n * @param {string} tagName - Custom element tag name\n */\nexport const unregisterComponent = (tagName) => {\n    componentRegistry.delete(tagName);\n};\n\n/**\n * Get a specific component's registered capabilities.\n * @param {string} tagName - Custom element tag name\n * @returns {Object|null} Capabilities descriptor or null if not registered\n */\nexport const getComponentCapabilities = (tagName) => {\n    return componentRegistry.get(tagName) ?? null;\n};\n\n/**\n * Get all registered components and their capabilities.\n * @returns {Object<string, Object>} Map of tag names to capability descriptors\n */\nexport const getRegisteredComponents = () => {\n    return Object.fromEntries(componentRegistry);\n};\n\n/**\n * Find components that handle a specific signal.\n * @param {string} signal - Signal name to search for\n * @returns {string[]} Array of tag names that handle the signal\n */\nexport const getComponentsForSignal = (signal) => {\n    const handlers = [];\n    for (const [tagName, caps] of componentRegistry) {\n        if (caps.signals?.includes(signal)) {\n            handlers.push(tagName);\n        }\n    }\n    return handlers;\n};\n",
    "/**\n * @fileoverview AgentUI Reactive Store — Proxy-Based State Management\n * \n * Minimal reactive store for AgentUI applications.\n * Proxy-based change detection with optional localStorage persistence.\n * Zero dependencies. ~100 lines.\n * \n * @example\n * import { createStore } from 'agentui-wc';\n * \n * const store = createStore(\n *   { tasks: [], filter: 'all' },\n *   { persist: 'my-app' }\n * );\n * \n * store.subscribe('tasks', (newTasks) => renderList(newTasks));\n * store.state.tasks = [...store.state.tasks, { title: 'New task' }];\n */\n\n/**\n * Create a reactive store with optional localStorage persistence.\n * \n * @param {Object} initialState - Initial state object (shallow)\n * @param {Object} [options] - Configuration options\n * @param {string} [options.persist] - localStorage key prefix for auto-persistence\n * @returns {Store} Reactive store instance\n */\nexport function createStore(initialState, options = {}) {\n    const persistKey = options.persist ? `agentui:${options.persist}` : null;\n\n    // Internal state (plain object)\n    const _state = { ...initialState };\n\n    // Subscribers: Map<key, Set<callback>>\n    const _subs = new Map();\n    // Wildcard subscribers: Set<callback>\n    const _wildcards = new Set();\n\n    // Batch mode tracking\n    let _batching = false;\n    const _batchChanges = new Map(); // key → { newVal, oldVal }\n\n    // ── Load persisted state ──────────────────────────────────────────\n    if (persistKey) {\n        try {\n            const stored = (typeof localStorage !== 'undefined')\n                ? localStorage.getItem(persistKey)\n                : null;\n            if (stored) {\n                const parsed = JSON.parse(stored);\n                if (parsed && typeof parsed === 'object') {\n                    // Only restore keys present in initialState\n                    for (const key of Object.keys(initialState)) {\n                        if (key in parsed) {\n                            const initial = initialState[key];\n                            const restored = parsed[key];\n                            // R4 Security: Type-check restored values against initialState\n                            // Prevents localStorage poisoning with type-confused values\n                            if (initial === null || initial === undefined) {\n                                // null/undefined initial = accept any type (developer opt-in)\n                                _state[key] = restored;\n                            } else if (Array.isArray(initial)) {\n                                // Array type must match\n                                if (Array.isArray(restored)) {\n                                    _state[key] = restored;\n                                }\n                            } else if (typeof restored === typeof initial) {\n                                // Primitive types must match\n                                _state[key] = restored;\n                            }\n                            // Type mismatch: silently keep initialState value\n                        }\n                    }\n                }\n            }\n        } catch (_) {\n            // Corrupt JSON or localStorage error — silently use initialState\n        }\n    }\n\n    // ── Notify subscribers ────────────────────────────────────────────\n    function _notify(key, newVal, oldVal) {\n        const keySubs = _subs.get(key);\n        if (keySubs) {\n            for (const cb of keySubs) {\n                cb(newVal, oldVal);\n            }\n        }\n        for (const cb of _wildcards) {\n            cb(key, newVal, oldVal);\n        }\n    }\n\n    // ── Persist to localStorage ───────────────────────────────────────\n    function _persist() {\n        if (!persistKey) return;\n        try {\n            if (typeof localStorage !== 'undefined') {\n                localStorage.setItem(persistKey, JSON.stringify(_state));\n            }\n        } catch (_) {\n            // localStorage full or unavailable — silent\n        }\n    }\n\n    // ── Reactive Proxy ────────────────────────────────────────────────\n    // Keys that must be blocked to prevent prototype pollution\n    const BLOCKED_KEYS = new Set(['__proto__', 'constructor', 'prototype']);\n\n    const proxy = new Proxy(_state, {\n        get(target, prop) {\n            return target[prop];\n        },\n        set(target, prop, value) {\n            // Guard: block prototype pollution vectors\n            if (BLOCKED_KEYS.has(prop)) {\n                console.warn(`[AgentUI Store] Blocked dangerous key: \"${String(prop)}\"`);\n                return true; // silently ignore\n            }\n\n            const oldVal = target[prop];\n            if (Object.is(oldVal, value)) return true; // no-op for same value\n            target[prop] = value;\n\n            if (_batching) {\n                // Track change for batch flush\n                if (!_batchChanges.has(prop)) {\n                    _batchChanges.set(prop, { oldVal });\n                }\n                _batchChanges.get(prop).newVal = value;\n            } else {\n                _notify(prop, value, oldVal);\n                _persist();\n            }\n            return true;\n        }\n    });\n\n    // ── Public API ────────────────────────────────────────────────────\n    return {\n        /** Reactive state proxy — read and write properties directly */\n        state: proxy,\n\n        /**\n         * Subscribe to state changes.\n         * @param {string} key - State key to watch, or '*' for all changes\n         * @param {Function} callback - For specific key: (newVal, oldVal). For '*': (key, newVal, oldVal)\n         * @returns {Function} Unsubscribe function\n         */\n        subscribe(key, callback) {\n            if (key === '*') {\n                _wildcards.add(callback);\n                return () => _wildcards.delete(callback);\n            }\n            if (!_subs.has(key)) _subs.set(key, new Set());\n            _subs.get(key).add(callback);\n            return () => {\n                const set = _subs.get(key);\n                if (set) {\n                    set.delete(callback);\n                    if (set.size === 0) _subs.delete(key);\n                }\n            };\n        },\n\n        /**\n         * Batch multiple state changes — subscribers notified once at the end.\n         * @param {Function} fn - Function containing state mutations\n         */\n        batch(fn) {\n            _batching = true;\n            _batchChanges.clear();\n            try {\n                fn();\n            } finally {\n                _batching = false;\n                // Flush: notify once per changed key\n                for (const [key, { newVal, oldVal }] of _batchChanges) {\n                    if (!Object.is(newVal, oldVal)) {\n                        _notify(key, newVal, oldVal);\n                    }\n                }\n                _batchChanges.clear();\n                _persist();\n            }\n        },\n\n        /**\n         * Get a plain copy of the current state (not the proxy).\n         * @returns {Object} State snapshot\n         */\n        getState() {\n            return { ..._state };\n        },\n\n        /**\n         * Replace state properties and notify affected subscribers.\n         * @param {Object} newState - Partial state to merge\n         */\n        setState(newState) {\n            for (const [key, value] of Object.entries(newState)) {\n                proxy[key] = value; // goes through Proxy.set\n            }\n        },\n\n        /**\n         * Destroy the store — clears all subscribers.\n         */\n        destroy() {\n            _subs.clear();\n            _wildcards.clear();\n        }\n    };\n}\n",
    "/**\n * @fileoverview Theme System for AgentUI\n * \n * Provides light/dark mode toggling and theme management.\n * Uses CSS custom properties and data-theme attribute.\n * Internally uses createStore for persistence.\n */\n\nimport { bus, UIEvents } from './bus.js';\nimport { createStore } from './store.js';\n\n/**\n * Internal store for theme persistence.\n * Handles localStorage read/write via createStore's persist option.\n */\nconst _store = createStore(\n    { current: 'light', preference: 'auto' },\n    { persist: 'au-theme' }\n);\n\n/**\n * Theme manager singleton.\n * Provides light/dark mode toggling with localStorage persistence.\n *\n * @namespace Theme\n */\nexport const Theme = {\n    /**\n     * Set the current theme.\n     * @param {'light'|'dark'|'auto'} theme - Theme to apply\n     * @fires UIEvents.THEME_CHANGE\n     */\n    set(theme) {\n        if (theme === 'auto') {\n            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n            document.documentElement.setAttribute('data-theme', prefersDark ? 'dark' : 'light');\n        } else {\n            document.documentElement.setAttribute('data-theme', theme);\n        }\n        _store.state.preference = theme;\n        _store.state.current = document.documentElement.getAttribute('data-theme');\n        bus.emit(UIEvents.THEME_CHANGE, { theme });\n    },\n\n    /**\n     * Get current theme\n     * @returns {'light'|'dark'}\n     */\n    get() {\n        return document.documentElement.getAttribute('data-theme') || 'light';\n    },\n\n    /**\n     * Toggle between light and dark\n     */\n    toggle() {\n        const current = this.get();\n        this.set(current === 'dark' ? 'light' : 'dark');\n    },\n\n    /**\n     * Initialize theme from localStorage or system preference.\n     * Handles migration from old localStorage key format.\n     */\n    init() {\n        // Migration: check old key format (raw 'au-theme') first\n        const oldKey = typeof localStorage !== 'undefined'\n            ? localStorage.getItem('au-theme')\n            : null;\n\n        if (oldKey && _store.state.preference === 'auto') {\n            // Migrate from old format\n            this.set(oldKey);\n            try { localStorage.removeItem('au-theme'); } catch (e) { /* silent */ }\n            return;\n        }\n\n        // Use persisted preference from store, or fall back to old key\n        const saved = _store.state.preference;\n        if (saved && saved !== 'auto') {\n            this.set(saved);\n        } else if (oldKey) {\n            this.set(oldKey);\n            try { localStorage.removeItem('au-theme'); } catch (e) { /* silent */ }\n        } else {\n            this.set('auto');\n        }\n\n        // Listen for system preference changes\n        this._mql = window.matchMedia('(prefers-color-scheme: dark)');\n        this._onMqlChange = (e) => {\n            if (_store.state.preference === 'auto') {\n                document.documentElement.setAttribute('data-theme', e.matches ? 'dark' : 'light');\n            }\n        };\n        this._mql.addEventListener('change', this._onMqlChange);\n    },\n\n    /**\n     * Destroy theme manager and remove listeners\n     */\n    destroy() {\n        if (this._mql && this._onMqlChange) {\n            this._mql.removeEventListener('change', this._onMqlChange);\n            this._mql = null;\n            this._onMqlChange = null;\n        }\n    },\n\n    /**\n     * Access the internal store (for advanced use / testing)\n     * @returns {import('./store.js').Store}\n     */\n    get _store() {\n        return _store;\n    }\n};\n\n// Auto-init on load\nif (typeof window !== 'undefined') {\n    Theme.init();\n}\n",
    "/**\n * @fileoverview Simple SPA Router for AgentUI\n * \n * Hash-based routing for single page applications.\n * \n * Usage:\n * Router.on('/', () => renderHome());\n * Router.on('/about', () => renderAbout());\n * Router.on('/user/:id', ({ id }) => renderUser(id));\n * Router.start();\n */\n\n/**\n * Hash-based SPA router with parameter support.\n * Routes are matched in registration order; first match wins.\n *\n * @class\n */\nclass RouterClass {\n    #routes = [];\n    #notFound = null;\n    #currentPath = '';\n    #handleRoute = null;\n\n    /**\n     * Register a route handler.\n     * @param {string} path - Route path (supports `:param` placeholders)\n     * @param {(params: Object) => void} handler - Called with matched params\n     * @returns {RouterClass} This instance (chainable)\n     */\n    on(path, handler) {\n        // Convert path params to regex\n        const pattern = path\n            .replace(/:[a-zA-Z]+/g, '([^/]+)')\n            .replace(/\\//g, '\\\\/');\n\n        const paramNames = (path.match(/:[a-zA-Z]+/g) || [])\n            .map(p => p.slice(1));\n\n        this.#routes.push({\n            path,\n            pattern: new RegExp(`^${pattern}$`),\n            paramNames,\n            handler\n        });\n\n        return this;\n    }\n\n    /**\n     * Set the 404 (not found) handler.\n     * @param {(path: string) => void} handler - Called with unmatched path\n     * @returns {RouterClass} This instance (chainable)\n     */\n    notFound(handler) {\n        this.#notFound = handler;\n        return this;\n    }\n\n    /**\n     * Navigate to a path\n     * @param {string} path\n     */\n    navigate(path) {\n        window.location.hash = path;\n    }\n\n    /**\n     * Get current route path.\n     * @returns {string}\n     */\n    get current() {\n        return this.#currentPath;\n    }\n\n    /**\n     * Start listening for hash changes and resolve the initial route.\n     * @returns {RouterClass} This instance (chainable)\n     */\n    start() {\n        this.#handleRoute = () => {\n            const hash = window.location.hash.slice(1) || '/';\n            this.#currentPath = hash;\n\n            for (const route of this.#routes) {\n                const match = hash.match(route.pattern);\n                if (match) {\n                    // Extract params\n                    const params = {};\n                    route.paramNames.forEach((name, i) => {\n                        params[name] = match[i + 1];\n                    });\n\n                    route.handler(params);\n                    return;\n                }\n            }\n\n            // No match - 404\n            if (this.#notFound) {\n                this.#notFound(hash);\n            }\n        };\n\n        window.addEventListener('hashchange', this.#handleRoute);\n        this.#handleRoute(); // Handle initial route\n\n        return this;\n    }\n\n    /**\n     * Stop the router (remove listener) without clearing routes.\n     * Call start() to resume.\n     */\n    stop() {\n        if (this.#handleRoute) {\n            window.removeEventListener('hashchange', this.#handleRoute);\n            this.#handleRoute = null;\n        }\n        return this;\n    }\n\n    /**\n     * Destroy the router and remove event listeners\n     */\n    destroy() {\n        this.stop();\n        this.#routes = [];\n        this.#notFound = null;\n        this.#currentPath = '';\n    }\n}\n\nexport { RouterClass };\n/** @type {RouterClass} Global router singleton */\nexport const Router = new RouterClass();\n",
    "/**\n * @fileoverview HTTP Utilities for AgentUI\n * \n * Simple fetch wrapper with common patterns.\n * Supports creating isolated instances via http.create().\n * \n * Usage:\n * const data = await http.get('/api/users');\n * await http.post('/api/users', { name: 'John' });\n * \n * // Isolated instance (P2.3):\n * const api = http.create({ baseURL: 'https://api.example.com' });\n * const data = await api.get('/users');\n */\n\n/**\n * Create a new HTTP client instance with configurable baseURL and headers.\n * @param {Object} [config={}] - Client configuration\n * @param {string} [config.baseURL=''] - Base URL prepended to all request paths\n * @param {Record<string, string>} [config.headers={}] - Default headers for all requests\n * @returns {Object} HTTP client with get/post/put/delete/request/create methods\n */\nfunction createHttpClient(config = {}) {\n    return {\n        /** @type {string} Base URL for all requests */\n        baseURL: config.baseURL || '',\n        /** @type {Record<string, string>} Default headers */\n        headers: {\n            'Content-Type': 'application/json',\n            ...(config.headers || {})\n        },\n\n        /**\n         * Set base URL for all subsequent requests.\n         * @param {string} url - New base URL\n         */\n        setBaseURL(url) {\n            this.baseURL = url;\n        },\n\n        /**\n         * Set a default header for all subsequent requests.\n         * @param {string} key - Header name\n         * @param {string} value - Header value\n         */\n        setHeader(key, value) {\n            this.headers[key] = value;\n        },\n\n        /**\n         * Perform a GET request.\n         * @param {string} url - Request URL (appended to baseURL)\n         * @param {Object} [options={}] - Additional fetch options\n         * @returns {Promise<*>} Parsed JSON or text response\n         * @throws {HttpError}\n         */\n        async get(url, options = {}) {\n            return this.request(url, { ...options, method: 'GET' });\n        },\n\n        /**\n         * Perform a POST request.\n         * @param {string} url - Request URL (appended to baseURL)\n         * @param {*} body - Request body (will be JSON.stringified)\n         * @param {Object} [options={}] - Additional fetch options\n         * @returns {Promise<*>} Parsed JSON or text response\n         * @throws {HttpError}\n         */\n        async post(url, body, options = {}) {\n            return this.request(url, { ...options, method: 'POST', body });\n        },\n\n        /**\n         * Perform a PUT request.\n         * @param {string} url - Request URL (appended to baseURL)\n         * @param {*} body - Request body (will be JSON.stringified)\n         * @param {Object} [options={}] - Additional fetch options\n         * @returns {Promise<*>} Parsed JSON or text response\n         * @throws {HttpError}\n         */\n        async put(url, body, options = {}) {\n            return this.request(url, { ...options, method: 'PUT', body });\n        },\n\n        /**\n         * Perform a DELETE request.\n         * @param {string} url - Request URL (appended to baseURL)\n         * @param {Object} [options={}] - Additional fetch options\n         * @returns {Promise<*>} Parsed JSON or text response\n         * @throws {HttpError}\n         */\n        async delete(url, options = {}) {\n            return this.request(url, { ...options, method: 'DELETE' });\n        },\n\n        /**\n         * Core request method — performs the actual fetch.\n         * @param {string} url - Request URL (appended to baseURL)\n         * @param {Object} [options={}] - Request options\n         * @param {string} [options.method='GET'] - HTTP method\n         * @param {*} [options.body] - Request body (will be JSON.stringified)\n         * @param {Record<string, string>} [options.headers] - Extra headers to merge\n         * @returns {Promise<*>} Parsed JSON or text response\n         * @throws {HttpError} On non-ok responses or network errors\n         */\n        async request(url, options = {}) {\n            const fullURL = this.baseURL + url;\n\n            const requestConfig = {\n                method: options.method || 'GET',\n                headers: { ...this.headers, ...options.headers }\n            };\n\n            if (options.body) {\n                requestConfig.body = JSON.stringify(options.body);\n            }\n\n            try {\n                const response = await fetch(fullURL, requestConfig);\n\n                if (!response.ok) {\n                    throw new HttpError(response.status, response.statusText, await response.text());\n                }\n\n                const contentType = response.headers.get('content-type');\n                if (contentType?.includes('application/json')) {\n                    return response.json();\n                }\n\n                return response.text();\n            } catch (error) {\n                if (error instanceof HttpError) throw error;\n                throw new HttpError(0, 'Network Error', error.message);\n            }\n        },\n\n        /**\n         * Create an isolated HTTP client instance (P2.3)\n         * @param {{ baseURL?: string, headers?: Record<string, string> }} [config]\n         */\n        create(config = {}) {\n            return createHttpClient(config);\n        }\n    };\n}\n\n/** @type {Object} Default HTTP client singleton */\nexport const http = createHttpClient();\n\n/**\n * Error class for HTTP failures.\n * Carries `status`, `statusText` and `body` from the failed response.\n *\n * @class\n * @extends Error\n */\nexport class HttpError extends Error {\n    /**\n     * @param {number} status - HTTP status code (0 for network errors)\n     * @param {string} statusText - HTTP status text\n     * @param {string} body - Response body or error message\n     */\n    constructor(status, statusText, body) {\n        super(`HTTP ${status}: ${statusText}`);\n        /** @type {number} HTTP status code */\n        this.status = status;\n        /** @type {string} HTTP status text */\n        this.statusText = statusText;\n        /** @type {string} Response body */\n        this.body = body;\n    }\n}\n",
    "/**\n * @fileoverview MD3 Ripple Effect Utility\n * \n * Creates Material Design 3 compliant ripple effects on interactive elements.\n * The ripple originates from the exact click/touch point and expands outward.\n * \n * Usage:\n *   import { attachRipple } from './core/ripple.js';\n *   attachRipple(element);\n * \n * Or for controlled ripple:\n *   import { createRipple } from './core/ripple.js';\n *   element.addEventListener('click', (e) => createRipple(element, e));\n */\n\n/**\n * Create a ripple effect at the event position within the element.\n * MD3 behavior: ripple expands immediately, persists while pressed, fades on release.\n * @param {HTMLElement} element - Container element for the ripple\n * @param {MouseEvent|TouchEvent} event - The triggering event\n * @param {Object} options - Ripple options\n * @param {string} options.color - Ripple color (default: currentColor)\n * @param {boolean} options.centered - Force ripple to start from center\n */\nexport function createRipple(element, event, options = {}) {\n    const { color = 'currentColor', centered = false, eventTarget } = options;\n    // eventTarget: element to listen for pointerup/leave (defaults to element)\n    const releaseTarget = eventTarget || element;\n\n    // Get element bounds\n    const rect = element.getBoundingClientRect();\n\n    // Calculate ripple position (from click point or center)\n    let x, y;\n    if (centered || !event) {\n        x = rect.width / 2;\n        y = rect.height / 2;\n    } else {\n        // Get click/touch position\n        const clientX = event.touches ? event.touches[0].clientX : event.clientX;\n        const clientY = event.touches ? event.touches[0].clientY : event.clientY;\n        x = clientX - rect.left;\n        y = clientY - rect.top;\n    }\n\n    // Calculate ripple size (must cover entire element from click point)\n    const size = Math.max(\n        Math.hypot(x, y),\n        Math.hypot(rect.width - x, y),\n        Math.hypot(x, rect.height - y),\n        Math.hypot(rect.width - x, rect.height - y)\n    ) * 2;\n\n    // Create ripple element\n    const ripple = document.createElement('span');\n    ripple.className = 'au-ripple-wave';\n    ripple.style.cssText = `\n        position: absolute;\n        width: ${size}px;\n        height: ${size}px;\n        left: ${x - size / 2}px;\n        top: ${y - size / 2}px;\n        background: ${color};\n        border-radius: 50%;\n        transform: scale(0);\n        opacity: 0.10;\n        pointer-events: none;\n    `;\n\n    // Positioning now set at attachRipple time (P1.6 perf fix — no getComputedStyle per click)\n\n    // Add ripple to element\n    element.appendChild(ripple);\n\n    // Phase 1: Expand animation (GPU - transform only)\n    ripple.animate([\n        { transform: 'scale(0)' },\n        { transform: 'scale(1)' }\n    ], {\n        duration: 300,\n        easing: 'cubic-bezier(0.4, 0, 0.2, 1)',\n        fill: 'forwards'\n    });\n\n    // Phase 2: Fade out on release (pointer up or leave)\n    const fadeOut = () => {\n        ripple.animate([\n            { opacity: '0.10' },\n            { opacity: '0' }\n        ], {\n            duration: 150,\n            easing: 'ease-out',\n            fill: 'forwards'\n        }).onfinish = () => ripple.remove();\n\n        // Cleanup listeners\n        releaseTarget.removeEventListener('pointerup', fadeOut);\n        releaseTarget.removeEventListener('pointerleave', fadeOut);\n        releaseTarget.removeEventListener('pointercancel', fadeOut);\n    };\n\n    releaseTarget.addEventListener('pointerup', fadeOut, { once: true });\n    releaseTarget.addEventListener('pointerleave', fadeOut, { once: true });\n    releaseTarget.addEventListener('pointercancel', fadeOut, { once: true });\n\n    return ripple;\n}\n\n/** @type {WeakSet<HTMLElement>} Tracks elements with ripple attached */\nconst _rippleElements = new WeakSet();\n\n/**\n * Attach ripple effect to an element.\n * @param {HTMLElement} element - Element to attach ripple to\n * @param {Object} options - Ripple options\n * @returns {Function} Cleanup function to remove ripple listener\n */\nexport function attachRipple(element, options = {}) {\n    // Guard: don't attach duplicate listeners\n    if (_rippleElements.has(element)) {\n        return () => { }; // no-op cleanup (original cleanup is still valid)\n    }\n    _rippleElements.add(element);\n\n    // Set positioning ONCE at attach time (P1.6 perf fix — avoids getComputedStyle per click)\n    const cs = getComputedStyle(element);\n    if (cs.position === 'static') element.style.position = 'relative';\n    if (cs.overflow !== 'hidden') element.style.overflow = 'hidden';\n\n    const handler = (e) => {\n        // Don't create ripple if element is disabled\n        if (element.hasAttribute('disabled')) return;\n        createRipple(element, e, options);\n    };\n\n    element.addEventListener('pointerdown', handler);\n\n    // Return cleanup function\n    return () => {\n        _rippleElements.delete(element);\n        element.removeEventListener('pointerdown', handler);\n    };\n}\n\n/**\n * Mixin for components that need ripple.\n * Call this.initRipple(targetElement) in connectedCallback.\n */\nexport const RippleMixin = (superclass) => class extends superclass {\n    #rippleCleanup = null;\n\n    /**\n     * Initialize ripple on target element (or self).\n     * @param {HTMLElement} target - Element to add ripple to (defaults to this)\n     * @param {Object} options - Ripple options\n     */\n    initRipple(target = this, options = {}) {\n        // Clean up previous ripple attachment if any\n        if (this.#rippleCleanup) {\n            this.#rippleCleanup();\n            this.#rippleCleanup = null;\n        }\n        this.#rippleCleanup = attachRipple(target, options);\n    }\n\n    disconnectedCallback() {\n        if (this.#rippleCleanup) {\n            this.#rippleCleanup();\n            this.#rippleCleanup = null;\n        }\n        super.disconnectedCallback?.();\n    }\n};\n",
    "/**\n * @fileoverview Agent-Friendly APIs for AgentUI\n * \n * Provides structured component tree access and natural language descriptions\n * for LLM agents interacting with AgentUI components.\n * \n * Based on research from Agent-E (2024), WebVoyager benchmark, and\n * DOM distillation techniques for AI browser automation.\n * \n * @module core/agent-api\n */\n\n/**\n * @typedef {Object} AuComponentInfo\n * @property {string} tag - Component tag name (e.g., 'au-button')\n * @property {string|null} id - Element ID if present\n * @property {string} label - Accessible name/label for the component\n * @property {string} description - Human-readable description of component purpose\n * @property {Object} state - Current component state\n * @property {string[]} actions - Available actions (e.g., ['click', 'toggle'])\n * @property {Object} rect - Bounding client rect {top, left, width, height}\n * @property {boolean} interactive - Whether component accepts user input\n * @property {boolean} visible - Whether component is in viewport\n */\n\n/**\n * Get the accessible name of an element following ARIA naming conventions.\n * @param {HTMLElement} el - Element to get name from\n * @returns {string} Accessible name\n * @private\n */\nfunction getAccessibleName(el) {\n    // Priority order per ARIA spec:\n    // 1. aria-labelledby\n    // 2. aria-label\n    // 3. associated label element\n    // 4. title attribute\n    // 5. text content (for certain roles)\n    // 6. placeholder (for inputs)\n\n    // aria-labelledby\n    const labelledBy = el.getAttribute('aria-labelledby');\n    if (labelledBy) {\n        const labels = labelledBy.split(' ')\n            .map(id => document.getElementById(id)?.textContent)\n            .filter(Boolean)\n            .join(' ');\n        if (labels) return labels;\n    }\n\n    // aria-label\n    const ariaLabel = el.getAttribute('aria-label');\n    if (ariaLabel) return ariaLabel;\n\n    // Associated label element\n    if (el.id) {\n        const label = document.querySelector(`label[for=\"${el.id}\"]`);\n        if (label) return label.textContent.trim();\n    }\n\n    // title attribute\n    const title = el.getAttribute('title');\n    if (title) return title;\n\n    // Text content for buttons, links, etc.\n    const role = el.getAttribute('role') || el.tagName.toLowerCase();\n    const textRoles = ['button', 'link', 'tab', 'menuitem', 'option', 'radio', 'checkbox'];\n    if (textRoles.some(r => role.includes(r))) {\n        const text = el.textContent?.trim();\n        if (text && text.length < 100) return text;\n    }\n\n    // Placeholder for inputs\n    const placeholder = el.getAttribute('placeholder');\n    if (placeholder) return placeholder;\n\n    // Value for inputs with value\n    const value = el.getAttribute('value');\n    if (value && el.tagName.includes('INPUT')) return `Input: ${value}`;\n\n    // Fallback to tag name\n    return el.tagName.toLowerCase().replace('au-', '');\n}\n\n/**\n * Get available actions for a component based on its type and state.\n * @param {HTMLElement} el - Component element\n * @returns {string[]} List of available actions\n * @private\n */\nfunction getAvailableActions(el) {\n    const actions = [];\n    const tag = el.tagName.toLowerCase();\n    const disabled = el.hasAttribute('disabled');\n\n    if (disabled) return ['none (disabled)'];\n\n    // Common interactive actions\n    if (el.onclick || el.hasAttribute('onclick')) {\n        actions.push('click');\n    }\n\n    // Component-specific actions\n    switch (tag) {\n        case 'au-button':\n            actions.push('click');\n            break;\n        case 'au-checkbox':\n        case 'au-switch':\n            actions.push('toggle', 'check', 'uncheck');\n            break;\n        case 'au-input':\n        case 'au-textarea':\n            actions.push('type', 'clear', 'focus');\n            break;\n        case 'au-dropdown':\n            actions.push('open', 'select', 'close');\n            break;\n        case 'au-modal':\n            actions.push('open', 'close');\n            break;\n        case 'au-tabs':\n            actions.push('select-tab');\n            break;\n        case 'au-radio':\n            actions.push('select');\n            break;\n        case 'au-chip':\n            actions.push('toggle', 'click');\n            break;\n        case 'au-confirm':\n            actions.push('confirm', 'cancel');\n            break;\n        default:\n            if (el.classList.contains('au-button') || el.getAttribute('role') === 'button') {\n                actions.push('click');\n            }\n    }\n\n    return actions.length ? actions : ['focus'];\n}\n\n/**\n * Get component state as a plain object.\n * @param {HTMLElement} el - Component element\n * @returns {Object} Component state\n * @private\n */\nfunction getComponentState(el) {\n    const state = {};\n    const tag = el.tagName.toLowerCase();\n\n    // Common state attributes\n    if (el.hasAttribute('checked')) state.checked = true;\n    if (el.hasAttribute('disabled')) state.disabled = true;\n    if (el.hasAttribute('open')) state.open = true;\n    if (el.hasAttribute('selected')) state.selected = true;\n    if (el.hasAttribute('active')) state.active = true;\n    if (el.hasAttribute('loading')) state.loading = true;\n    if (el.hasAttribute('value')) state.value = el.getAttribute('value');\n\n    // ARIA state\n    const ariaChecked = el.getAttribute('aria-checked');\n    if (ariaChecked) state.ariaChecked = ariaChecked === 'true';\n\n    const ariaExpanded = el.getAttribute('aria-expanded');\n    if (ariaExpanded) state.expanded = ariaExpanded === 'true';\n\n    const ariaSelected = el.getAttribute('aria-selected');\n    if (ariaSelected) state.selected = ariaSelected === 'true';\n\n    // Component-specific state\n    switch (tag) {\n        case 'au-input':\n        case 'au-textarea':\n            const input = el.querySelector('input, textarea');\n            if (input) {\n                state.value = input.value;\n                state.placeholder = input.placeholder;\n            }\n            break;\n        case 'au-progress':\n            state.value = parseFloat(el.getAttribute('value') || '0');\n            state.max = parseFloat(el.getAttribute('max') || '100');\n            state.percentage = (state.value / state.max) * 100;\n            break;\n        case 'au-dropdown':\n            state.value = el.getAttribute('value');\n            state.open = el.classList.contains('is-open');\n            break;\n    }\n\n    return state;\n}\n\n/**\n * Generate a natural language description of a component.\n * @param {HTMLElement} el - Component element\n * @returns {string} Human-readable description\n * @private\n */\nfunction describeComponent(el) {\n    const tag = el.tagName.toLowerCase().replace('au-', '');\n    const label = getAccessibleName(el);\n    const state = getComponentState(el);\n    const disabled = state.disabled ? ' (disabled)' : '';\n\n    const descriptions = {\n        'button': () => `Button \"${label}\"${disabled}. ${state.loading ? 'Currently loading.' : 'Click to activate.'}`,\n        'checkbox': () => `Checkbox \"${label}\"${disabled}. Currently ${state.ariaChecked || state.checked ? 'checked' : 'unchecked'}.`,\n        'switch': () => `Toggle switch \"${label}\"${disabled}. Currently ${state.ariaChecked || state.checked ? 'on' : 'off'}.`,\n        'input': () => `Text input \"${label}\"${disabled}. ${state.value ? `Current value: \"${state.value}\"` : 'Empty.'} ${state.placeholder ? `Placeholder: \"${state.placeholder}\"` : ''}`,\n        'textarea': () => `Text area \"${label}\"${disabled}. ${state.value ? `Contains: \"${state.value.slice(0, 50)}${state.value.length > 50 ? '...' : ''}\"` : 'Empty.'}`,\n        'dropdown': () => `Dropdown \"${label}\"${disabled}. ${state.value ? `Selected: \"${state.value}\"` : 'No selection.'} ${state.open ? 'Menu is open.' : 'Menu is closed.'}`,\n        'modal': () => `Modal dialog${state.open ? ' (currently open)' : ' (currently closed)'}. ${label !== 'modal' ? `Title: \"${label}\"` : ''}`,\n        'tabs': () => `Tab navigation with ${el.querySelectorAll('au-tab').length} tabs.`,\n        'tab': () => `Tab \"${label}\". ${state.active ? 'Currently active.' : 'Inactive.'}`,\n        'progress': () => `Progress bar at ${Math.round(state.percentage || 0)}%.`,\n        'spinner': () => 'Loading spinner indicating operation in progress.',\n        'alert': () => `Alert message: \"${el.textContent?.trim().slice(0, 100) || label}\"`,\n        'card': () => `Card container${label !== 'card' ? ` titled \"${label}\"` : ''}.`,\n        'chip': () => `Chip \"${label}\"${disabled}. ${state.selected ? 'Selected.' : 'Not selected.'}`,\n        'badge': () => `Badge showing \"${el.textContent?.trim() || 'notification'}\"`,\n        'avatar': () => `User avatar${el.getAttribute('name') ? ` for \"${el.getAttribute('name')}\"` : ''}`,\n        'icon': () => `Icon: ${el.getAttribute('name') || 'decorative'}`,\n        'confirm': () => `Confirmation dialog. ${state.open ? 'Waiting for user response.' : 'Hidden.'}`,\n        'fetch': () => `Data fetcher${state.loading ? ' (loading)' : ''}. URL: ${el.getAttribute('url') || 'not set'}`\n    };\n\n    const describer = descriptions[tag];\n    if (describer) return describer();\n\n    // Generic fallback\n    return `${tag} component${label ? ` \"${label}\"` : ''}${disabled}.`;\n}\n\n/**\n * Check if element is visible in the viewport.\n * @param {HTMLElement} el - Element to check\n * @returns {boolean} True if the element is at least partially visible\n * @private\n */\nfunction isInViewport(el) {\n    const rect = el.getBoundingClientRect();\n    return (\n        rect.top < window.innerHeight &&\n        rect.bottom > 0 &&\n        rect.left < window.innerWidth &&\n        rect.right > 0 &&\n        rect.width > 0 &&\n        rect.height > 0\n    );\n}\n\n/**\n * Get a simplified component tree for agent parsing\n * Implements DOM distillation as per Agent-E (2024) research\n * \n * @param {HTMLElement} [root=document.body] - Root element to scan\n * @param {Object} [options] - Options\n * @param {boolean} [options.visibleOnly=false] - Only include visible components\n * @param {boolean} [options.interactiveOnly=false] - Only include interactive components\n * @param {string[]} [options.types] - Filter to specific component types\n * @returns {AuComponentInfo[]} Array of component info objects\n * \n * @example\n * // Get all components\n * const tree = getAuComponentTree();\n * \n * // Get only visible interactive components\n * const interactive = getAuComponentTree(document.body, { \n *     visibleOnly: true, \n *     interactiveOnly: true \n * });\n * \n * // Get only buttons and inputs\n * const forms = getAuComponentTree(document.body, {\n *     types: ['au-button', 'au-input', 'au-checkbox']\n * });\n */\nexport function getAuComponentTree(root = document.body, options = {}) {\n    const { visibleOnly = false, interactiveOnly = false, types = null } = options;\n\n    // Find all au-* custom elements by tag name\n    let elements;\n    if (types) {\n        elements = root.querySelectorAll(types.join(','));\n    } else {\n        // Custom elements always contain a hyphen — filter by au- prefix\n        elements = Array.from(root.querySelectorAll('*'))\n            .filter(el => el.tagName.toLowerCase().startsWith('au-') &&\n                el.tagName.toLowerCase() !== 'au-ripple-wave');\n    }\n    const results = [];\n\n    const interactiveTags = new Set([\n        'au-button', 'au-checkbox', 'au-switch', 'au-input', 'au-textarea',\n        'au-dropdown', 'au-radio', 'au-tab', 'au-chip', 'au-modal', 'au-confirm'\n    ]);\n\n    for (const el of elements) {\n        const tag = el.tagName.toLowerCase();\n\n        const isInteractive = interactiveTags.has(tag);\n        const visible = isInViewport(el);\n\n        // Apply filters\n        if (visibleOnly && !visible) continue;\n        if (interactiveOnly && !isInteractive) continue;\n\n        const rect = el.getBoundingClientRect();\n\n        results.push({\n            tag,\n            id: el.id || null,\n            label: getAccessibleName(el),\n            description: describeComponent(el),\n            state: getComponentState(el),\n            actions: getAvailableActions(el),\n            rect: {\n                top: Math.round(rect.top),\n                left: Math.round(rect.left),\n                width: Math.round(rect.width),\n                height: Math.round(rect.height)\n            },\n            interactive: isInteractive,\n            visible\n        });\n    }\n\n    return results;\n}\n\n/**\n * Describe a single component in natural language\n * @param {HTMLElement|string} component - Element or CSS selector\n * @returns {string|null} Natural language description or null if not found\n */\nexport function describe(component) {\n    const el = typeof component === 'string'\n        ? document.querySelector(component)\n        : component;\n\n    if (!el) return null;\n    return describeComponent(el);\n}\n\n/**\n * Get a map of all registered AgentUI custom elements\n * @returns {Map<string, typeof HTMLElement>} Map of tag names to constructors\n */\nexport function getRegisteredComponents() {\n    const components = new Map();\n    const possibleTags = [\n        'au-button', 'au-input', 'au-textarea', 'au-checkbox', 'au-switch',\n        'au-dropdown', 'au-option', 'au-radio', 'au-radio-group', 'au-chip',\n        'au-card', 'au-tabs', 'au-tab', 'au-alert', 'au-badge', 'au-progress',\n        'au-avatar', 'au-skeleton', 'au-spinner', 'au-modal', 'au-toast',\n        'au-tooltip', 'au-icon', 'au-stack', 'au-grid', 'au-container',\n        'au-navbar', 'au-sidebar', 'au-divider', 'au-theme-toggle',\n        'au-virtual-list', 'au-lazy', 'au-repeat', 'au-form', 'au-table',\n        'au-confirm', 'au-fetch'\n    ];\n\n    for (const tag of possibleTags) {\n        const constructor = customElements.get(tag);\n        if (constructor) {\n            components.set(tag, constructor);\n        }\n    }\n\n    return components;\n}\n\n/**\n * Find components by their accessible label (fuzzy match)\n * @param {string} labelQuery - Label text to search for\n * @param {HTMLElement} [root=document.body] - Root to search within\n * @returns {HTMLElement[]} Matching components\n */\nexport function findByLabel(labelQuery, root = document.body) {\n    const query = labelQuery.toLowerCase();\n    const tree = getAuComponentTree(root);\n\n    return tree\n        .filter(info => info.label.toLowerCase().includes(query))\n        .map(info => {\n            const selector = info.id\n                ? `#${info.id}`\n                : `${info.tag}`;\n            return root.querySelector(selector);\n        })\n        .filter(Boolean);\n}\n\n// ============================================\n// 2026 VISUAL MARKERS (UI-TARS Research)\n// ============================================\n\n/** @type {boolean} Whether visual markers are currently enabled */\nlet markersEnabled = false;\n/** @type {HTMLDivElement|null} Container overlay for visual markers */\nlet markerContainer = null;\n/** @type {Map<string, WeakRef<HTMLElement>>} Marker ID → element reference */\nconst markerMap = new Map();\n\n/**\n * Enable visual markers on interactive elements for screenshot-based AI agents.\n * Based on UI-TARS (2025) hybrid DOM+Vision research.\n * \n * Adds overlay labels like [B1], [I1], [C1] to each interactive element.\n * \n * @param {Object} [options] - Options\n * @param {boolean} [options.showLabels=true] - Show text labels ([B1], etc.)\n * @param {boolean} [options.showBoxes=true] - Show bounding boxes\n * @param {string} [options.markerStyle='badge'] - Style: 'badge' | 'corner' | 'outline'\n * @returns {Map<string, HTMLElement>} Map of marker IDs to elements\n * \n * @example\n * const markers = AgentUI.enableVisualMarkers();\n * // Take screenshot\n * // Agent sees: [B1] Save, [B2] Cancel, [I1] Email input\n */\nexport function enableVisualMarkers(options = {}) {\n    const { showLabels = true, showBoxes = true, markerStyle = 'badge' } = options;\n\n    // Disable first if already enabled\n    if (markersEnabled) disableVisualMarkers();\n\n    // Create container\n    markerContainer = document.createElement('div');\n    markerContainer.id = 'au-visual-markers';\n    markerContainer.style.cssText = `\n        position: fixed;\n        inset: 0;\n        pointer-events: none;\n        z-index: 999999;\n    `;\n    document.body.appendChild(markerContainer);\n\n    // Counter prefixes by type\n    const counters = { B: 0, I: 0, C: 0, S: 0, D: 0, M: 0, T: 0, R: 0, O: 0 };\n\n    // Get type prefix\n    const getPrefix = (tag) => {\n        const prefixes = {\n            'au-button': 'B',\n            'au-input': 'I',\n            'au-textarea': 'I',\n            'au-checkbox': 'C',\n            'au-switch': 'S',\n            'au-dropdown': 'D',\n            'au-modal': 'M',\n            'au-tabs': 'T',\n            'au-tab': 'T',\n            'au-radio': 'R',\n            'au-chip': 'C',\n            'au-confirm': 'M'\n        };\n        return prefixes[tag] || 'O';\n    };\n\n    // Get interactive components\n    const tree = getAuComponentTree(document.body, { interactiveOnly: true, visibleOnly: true });\n\n    for (const info of tree) {\n        const prefix = getPrefix(info.tag);\n        counters[prefix]++;\n        const markerId = `${prefix}${counters[prefix]}`;\n\n        const el = document.querySelector(\n            info.id ? `#${info.id}` : `${info.tag}[data-au-action=\"${info.state.action || ''}\"]`\n        ) || document.querySelector(info.tag);\n\n        if (!el) continue;\n\n        const rect = el.getBoundingClientRect();\n\n        // Create marker\n        const marker = document.createElement('div');\n        marker.className = 'au-visual-marker';\n        marker.dataset.markerId = markerId;\n        marker.dataset.tag = info.tag;\n        marker.dataset.label = info.label;\n\n        const bgColor = {\n            'B': '#7C4DFF', // Buttons - purple\n            'I': '#00BCD4', // Inputs - cyan\n            'C': '#4CAF50', // Checkboxes - green\n            'S': '#FF9800', // Switches - orange\n            'D': '#2196F3', // Dropdowns - blue\n            'M': '#E91E63', // Modals - pink\n            'T': '#9C27B0', // Tabs - deep purple\n            'R': '#795548', // Radio - brown\n            'O': '#607D8B'  // Other - grey\n        }[prefix];\n\n        if (markerStyle === 'badge') {\n            marker.style.cssText = `\n                position: fixed;\n                top: ${rect.top - 8}px;\n                left: ${rect.left - 8}px;\n                background: ${bgColor};\n                color: white;\n                font: bold 11px system-ui;\n                padding: 2px 6px;\n                border-radius: 4px;\n                box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                white-space: nowrap;\n            `;\n            marker.textContent = showLabels ? `${markerId}` : '';\n        } else if (markerStyle === 'outline') {\n            marker.style.cssText = `\n                position: fixed;\n                top: ${rect.top}px;\n                left: ${rect.left}px;\n                width: ${rect.width}px;\n                height: ${rect.height}px;\n                border: 2px solid ${bgColor};\n                border-radius: 4px;\n                box-shadow: 0 0 0 1px rgba(255,255,255,0.5);\n            `;\n            if (showLabels) {\n                const label = document.createElement('span');\n                label.style.cssText = `\n                    position: absolute;\n                    top: -18px;\n                    left: -2px;\n                    background: ${bgColor};\n                    color: white;\n                    font: bold 10px system-ui;\n                    padding: 1px 4px;\n                    border-radius: 2px;\n                `;\n                label.textContent = markerId;\n                marker.appendChild(label);\n            }\n        }\n\n        markerContainer.appendChild(marker);\n        markerMap.set(markerId, new WeakRef(el));\n    }\n\n    markersEnabled = true;\n    return markerMap;\n}\n\n/**\n * Disable visual markers\n */\nexport function disableVisualMarkers() {\n    if (markerContainer) {\n        markerContainer.remove();\n        markerContainer = null;\n    }\n    markerMap.clear();\n    markersEnabled = false;\n}\n\n/**\n * Get element by visual marker ID\n * @param {string} markerId - Marker ID (e.g., 'B1', 'I2')\n * @returns {HTMLElement|null}\n */\nexport function getMarkerElement(markerId) {\n    const ref = markerMap.get(markerId);\n    return ref?.deref() || null;\n}\n\n/**\n * Get all current marker mappings\n * @returns {Object} Object mapping marker IDs to element info\n */\nexport function getMarkerMap() {\n    const result = {};\n    for (const [id, ref] of markerMap) {\n        const el = ref.deref();\n        if (!el) continue; // ML8: Skip GC'd elements\n        result[id] = {\n            tag: el.tagName.toLowerCase(),\n            label: getAccessibleName(el),\n            actions: getAvailableActions(el)\n        };\n    }\n    return result;\n}\n\n// ============================================\n// 2026 MCP ACTIONS (Anthropic/Google Standard)\n// ============================================\n\n/**\n * Get available actions in MCP (Model Context Protocol) compatible format.\n * This is the emerging standard for agent-tool communication in 2026.\n * \n * @returns {Object} MCP-compatible action schema\n * \n * @example\n * const actions = AgentUI.getMCPActions();\n * // Returns:\n * // {\n * //   name: \"agentui\",\n * //   description: \"Interact with AgentUI web components\",\n * //   actions: [\n * //     { name: \"click_button\", parameters: { selector: {...} } },\n * //     { name: \"fill_input\", parameters: { selector: {...}, value: {...} } }\n * //   ]\n * // }\n */\nexport function getMCPActions() {\n    return {\n        name: 'agentui',\n        version: '3.4.0',\n        description: 'Interact with AgentUI Material Design 3 web components',\n        actions: [\n            {\n                name: 'click_button',\n                description: 'Click a button element',\n                parameters: {\n                    selector: {\n                        type: 'string',\n                        description: 'CSS selector, marker ID (e.g., \"B1\"), or label text',\n                        required: true\n                    }\n                }\n            },\n            {\n                name: 'fill_input',\n                description: 'Fill an input or textarea with text',\n                parameters: {\n                    selector: {\n                        type: 'string',\n                        description: 'CSS selector, marker ID (e.g., \"I1\"), or label text',\n                        required: true\n                    },\n                    value: {\n                        type: 'string',\n                        description: 'Text to enter',\n                        required: true\n                    },\n                    clear: {\n                        type: 'boolean',\n                        description: 'Clear existing content first',\n                        default: true\n                    }\n                }\n            },\n            {\n                name: 'toggle_checkbox',\n                description: 'Toggle a checkbox or switch',\n                parameters: {\n                    selector: {\n                        type: 'string',\n                        description: 'CSS selector, marker ID, or label text',\n                        required: true\n                    },\n                    checked: {\n                        type: 'boolean',\n                        description: 'Target state (true=checked, false=unchecked)',\n                        required: false\n                    }\n                }\n            },\n            {\n                name: 'select_option',\n                description: 'Select an option in a dropdown',\n                parameters: {\n                    selector: {\n                        type: 'string',\n                        description: 'CSS selector for dropdown',\n                        required: true\n                    },\n                    value: {\n                        type: 'string',\n                        description: 'Option value or text to select',\n                        required: true\n                    }\n                }\n            },\n            {\n                name: 'open_modal',\n                description: 'Open a modal dialog',\n                parameters: {\n                    selector: {\n                        type: 'string',\n                        description: 'CSS selector for modal',\n                        required: true\n                    }\n                }\n            },\n            {\n                name: 'close_modal',\n                description: 'Close a modal dialog',\n                parameters: {\n                    selector: {\n                        type: 'string',\n                        description: 'CSS selector for modal',\n                        required: true\n                    }\n                }\n            },\n            {\n                name: 'select_tab',\n                description: 'Select a tab by index or label',\n                parameters: {\n                    tabs_selector: {\n                        type: 'string',\n                        description: 'CSS selector for au-tabs container',\n                        required: true\n                    },\n                    index: {\n                        type: 'number',\n                        description: 'Tab index (0-based)',\n                        required: false\n                    },\n                    label: {\n                        type: 'string',\n                        description: 'Tab label text',\n                        required: false\n                    }\n                }\n            },\n            {\n                name: 'get_component_tree',\n                description: 'Get structured tree of all AgentUI components',\n                parameters: {\n                    visible_only: {\n                        type: 'boolean',\n                        description: 'Only include visible components',\n                        default: true\n                    },\n                    interactive_only: {\n                        type: 'boolean',\n                        description: 'Only include interactive components',\n                        default: false\n                    }\n                }\n            },\n            {\n                name: 'enable_visual_markers',\n                description: 'Enable visual markers for screenshot parsing',\n                parameters: {\n                    style: {\n                        type: 'string',\n                        enum: ['badge', 'outline'],\n                        description: 'Marker visual style',\n                        default: 'badge'\n                    }\n                }\n            },\n            {\n                name: 'confirm_dialog',\n                description: 'Respond to a confirmation dialog',\n                parameters: {\n                    action: {\n                        type: 'string',\n                        enum: ['confirm', 'cancel'],\n                        description: 'Whether to confirm or cancel',\n                        required: true\n                    }\n                }\n            }\n        ]\n    };\n}\n\n/**\n * Convenience namespace exporting all agent API functions.\n * @namespace AgentAPI\n */\nexport const AgentAPI = {\n    getAuComponentTree,\n    describe,\n    getRegisteredComponents,\n    findByLabel,\n    getAccessibleName,\n    getAvailableActions,\n    getComponentState,\n    // 2026 Visual Markers\n    enableVisualMarkers,\n    disableVisualMarkers,\n    getMarkerElement,\n    getMarkerMap,\n    // 2026 MCP Actions\n    getMCPActions\n};\n",
    "/**\n * @fileoverview Component Schema API for AI Agents\n * \n * Provides JSON Schema exports for each AgentUI component.\n * Enables type-safe code generation by AI coding assistants.\n * \n * Based on 2025-2026 research on Structured Outputs and A2UI.\n * \n * @module component-schema\n */\n\n/** @private @type {Map<string, Object>} Internal registry of component JSON schemas */\nconst componentSchemas = new Map();\n\n/**\n * Create the base JSON Schema structure shared by all components.\n * @param {string} tagName - Component tag name (e.g. 'au-button')\n * @param {string} description - Human-readable component description\n * @returns {Object} Base JSON Schema object\n * @private\n */\nconst createBaseSchema = (tagName, description) => ({\n    $schema: 'https://json-schema.org/draft/2020-12/schema',\n    $id: `https://agentui.dev/schemas/${tagName}.json`,\n    title: tagName,\n    description,\n    type: 'object',\n    properties: {},\n    actions: [],\n    events: [],\n    slots: []\n});\n\n// ============================================\n// COMPONENT SCHEMA DEFINITIONS\n// ============================================\n\ncomponentSchemas.set('au-button', {\n    ...createBaseSchema('au-button', 'Interactive button element with MD3 variants'),\n    properties: {\n        variant: {\n            type: 'string',\n            enum: ['filled', 'elevated', 'tonal', 'outlined', 'text', 'danger'],\n            default: 'filled',\n            description: 'Visual style variant'\n        },\n        size: {\n            type: 'string',\n            enum: ['sm', 'md', 'lg'],\n            default: 'md',\n            description: 'Button size'\n        },\n        disabled: {\n            type: 'boolean',\n            default: false,\n            description: 'Whether the button is disabled'\n        }\n    },\n    actions: ['click'],\n    events: ['click'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-input', {\n    ...createBaseSchema('au-input', 'Text input field with floating label'),\n    properties: {\n        type: {\n            type: 'string',\n            enum: ['text', 'email', 'password', 'number', 'tel', 'url'],\n            default: 'text'\n        },\n        variant: {\n            type: 'string',\n            enum: ['outlined', 'filled'],\n            default: 'outlined'\n        },\n        label: { type: 'string', description: 'Floating label text' },\n        placeholder: { type: 'string' },\n        value: { type: 'string', default: '' },\n        disabled: { type: 'boolean', default: false },\n        required: { type: 'boolean', default: false }\n    },\n    actions: ['focus', 'blur', 'clear'],\n    events: ['au-input', 'au-change'],\n    slots: []\n});\n\ncomponentSchemas.set('au-checkbox', {\n    ...createBaseSchema('au-checkbox', 'Checkbox with optional label'),\n    properties: {\n        checked: { type: 'boolean', default: false },\n        disabled: { type: 'boolean', default: false },\n        value: { type: 'string' }\n    },\n    actions: ['toggle', 'check', 'uncheck'],\n    events: ['au-change'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-switch', {\n    ...createBaseSchema('au-switch', 'Toggle switch with on/off state'),\n    properties: {\n        checked: { type: 'boolean', default: false },\n        disabled: { type: 'boolean', default: false }\n    },\n    actions: ['toggle'],\n    events: ['au-change'],\n    slots: []\n});\n\ncomponentSchemas.set('au-card', {\n    ...createBaseSchema('au-card', 'Material Design 3 card container'),\n    properties: {\n        variant: {\n            type: 'string',\n            enum: ['elevated', 'filled', 'outlined'],\n            default: 'elevated'\n        }\n    },\n    actions: [],\n    events: [],\n    slots: ['default', 'header', 'footer']\n});\n\ncomponentSchemas.set('au-modal', {\n    ...createBaseSchema('au-modal', 'Dialog/modal overlay'),\n    properties: {\n        open: { type: 'boolean', default: false },\n        closeOnEscape: { type: 'boolean', default: true },\n        closeOnBackdrop: { type: 'boolean', default: true }\n    },\n    actions: ['open', 'close'],\n    events: ['au-open', 'au-close'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-dropdown', {\n    ...createBaseSchema('au-dropdown', 'Select dropdown with options'),\n    properties: {\n        value: { type: 'string' },\n        placeholder: { type: 'string' },\n        disabled: { type: 'boolean', default: false },\n        required: { type: 'boolean', default: false }\n    },\n    actions: ['open', 'close', 'select'],\n    events: ['au-change'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-tabs', {\n    ...createBaseSchema('au-tabs', 'Tab navigation container'),\n    properties: {\n        active: { type: 'number', default: 0, description: 'Active tab index (0-based)' }\n    },\n    actions: ['selectTab'],\n    events: ['au-tab-change'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-alert', {\n    ...createBaseSchema('au-alert', 'Alert/notification banner'),\n    properties: {\n        variant: {\n            type: 'string',\n            enum: ['info', 'success', 'warning', 'error'],\n            default: 'info'\n        },\n        dismissible: { type: 'boolean', default: false }\n    },\n    actions: ['dismiss'],\n    events: ['au-dismiss'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-stack', {\n    ...createBaseSchema('au-stack', 'Flexbox layout container'),\n    properties: {\n        direction: {\n            type: 'string',\n            enum: ['row', 'column'],\n            default: 'column'\n        },\n        gap: {\n            type: 'string',\n            enum: ['xs', 'sm', 'md', 'lg', 'xl'],\n            default: 'md'\n        },\n        align: {\n            type: 'string',\n            enum: ['start', 'center', 'end', 'stretch'],\n            default: 'stretch'\n        }\n    },\n    actions: [],\n    events: [],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-grid', {\n    ...createBaseSchema('au-grid', 'CSS Grid layout container'),\n    properties: {\n        columns: { type: 'string', default: '1', description: 'Number of columns or CSS grid-template-columns' },\n        gap: { type: 'string', enum: ['xs', 'sm', 'md', 'lg', 'xl'], default: 'md' }\n    },\n    actions: [],\n    events: [],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-textarea', {\n    ...createBaseSchema('au-textarea', 'Multi-line text input with floating label'),\n    properties: {\n        label: { type: 'string', description: 'Floating label text' },\n        placeholder: { type: 'string' },\n        value: { type: 'string', default: '' },\n        rows: { type: 'number', default: 3 },\n        disabled: { type: 'boolean', default: false },\n        required: { type: 'boolean', default: false },\n        readonly: { type: 'boolean', default: false }\n    },\n    actions: ['focus', 'blur'],\n    events: ['au-input', 'au-change'],\n    slots: []\n});\n\ncomponentSchemas.set('au-radio', {\n    ...createBaseSchema('au-radio', 'Radio button for single selection within a group'),\n    properties: {\n        name: { type: 'string', description: 'Radio group name' },\n        value: { type: 'string' },\n        checked: { type: 'boolean', default: false },\n        disabled: { type: 'boolean', default: false }\n    },\n    actions: ['select'],\n    events: ['au-change'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-chip', {\n    ...createBaseSchema('au-chip', 'Compact element for filters, selections, or actions'),\n    properties: {\n        variant: { type: 'string', enum: ['assist', 'filter', 'input', 'suggestion'], default: 'assist' },\n        selected: { type: 'boolean', default: false },\n        disabled: { type: 'boolean', default: false },\n        removable: { type: 'boolean', default: false }\n    },\n    actions: ['select', 'remove'],\n    events: ['au-select', 'au-remove'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-confirm', {\n    ...createBaseSchema('au-confirm', 'Confirmation dialog with accept/cancel actions'),\n    properties: {\n        title: { type: 'string' },\n        message: { type: 'string' },\n        confirmText: { type: 'string', default: 'Confirm' },\n        cancelText: { type: 'string', default: 'Cancel' }\n    },\n    actions: ['show', 'close'],\n    events: ['au-confirm', 'au-cancel'],\n    slots: []\n});\n\ncomponentSchemas.set('au-toast', {\n    ...createBaseSchema('au-toast', 'Temporary notification snackbar'),\n    properties: {\n        variant: { type: 'string', enum: ['info', 'success', 'warning', 'error'], default: 'info' },\n        duration: { type: 'number', default: 3000, description: 'Auto-dismiss duration in ms' },\n        position: { type: 'string', enum: ['top', 'bottom'], default: 'bottom' }\n    },\n    actions: ['show', 'dismiss'],\n    events: ['au-dismiss'],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-progress', {\n    ...createBaseSchema('au-progress', 'Linear or circular progress indicator'),\n    properties: {\n        value: { type: 'number', description: 'Progress value 0-100' },\n        variant: { type: 'string', enum: ['linear', 'circular'], default: 'linear' },\n        indeterminate: { type: 'boolean', default: false }\n    },\n    actions: [],\n    events: [],\n    slots: []\n});\n\ncomponentSchemas.set('au-spinner', {\n    ...createBaseSchema('au-spinner', 'Loading spinner indicator'),\n    properties: {\n        size: { type: 'string', enum: ['sm', 'md', 'lg'], default: 'md' }\n    },\n    actions: [],\n    events: [],\n    slots: []\n});\n\ncomponentSchemas.set('au-tooltip', {\n    ...createBaseSchema('au-tooltip', 'Contextual tooltip on hover/focus'),\n    properties: {\n        text: { type: 'string', description: 'Tooltip text content' },\n        position: { type: 'string', enum: ['top', 'bottom', 'left', 'right'], default: 'top' }\n    },\n    actions: [],\n    events: [],\n    slots: ['default']\n});\n\ncomponentSchemas.set('au-badge', {\n    ...createBaseSchema('au-badge', 'Small status indicator badge'),\n    properties: {\n        value: { type: 'string', description: 'Badge content (number or text)' },\n        variant: { type: 'string', enum: ['standard', 'dot'], default: 'standard' }\n    },\n    actions: [],\n    events: [],\n    slots: ['default']\n});\n\n// ============================================\n// PUBLIC API\n// ============================================\n\n/**\n * Get JSON Schema for a specific component.\n * @param {string} tagName - Component tag name (e.g. 'au-button')\n * @returns {Object|null} JSON Schema object or null if not found\n */\nexport function getComponentSchema(tagName) {\n    return componentSchemas.get(tagName) || null;\n}\n\n/**\n * Get all available component schemas\n * @returns {Map<string, object>} Map of tag names to schemas\n */\nexport function getAllSchemas() {\n    return new Map(componentSchemas);\n}\n\n/**\n * Get list of all schema-documented components\n * @returns {string[]} Array of tag names\n */\nexport function getSchemaComponents() {\n    return Array.from(componentSchemas.keys());\n}\n\n/**\n * Get schemas for multiple components at once\n * @param {string[]} tagNames - Array of component tag names\n * @returns {object} Object mapping tag names to schemas\n */\nexport function getSchemas(tagNames) {\n    const result = {};\n    for (const tag of tagNames) {\n        const schema = componentSchemas.get(tag);\n        if (schema) result[tag] = schema;\n    }\n    return result;\n}\n\n/**\n * Get a minimal schema summary for quick reference\n * @param {string} tagName - Component tag name\n * @returns {object|null} Simplified schema with just properties and actions\n */\nexport function getSchemaQuickRef(tagName) {\n    const schema = componentSchemas.get(tagName);\n    if (!schema) return null;\n\n    return {\n        tag: tagName,\n        description: schema.description,\n        properties: Object.keys(schema.properties || {}),\n        actions: schema.actions || [],\n        events: schema.events || []\n    };\n}\n\n/**\n * Export all schemas as JSON for external tools\n * @returns {string} JSON string of all schemas\n */\nexport function exportSchemasAsJSON() {\n    const allSchemas = {};\n    for (const [tag, schema] of componentSchemas) {\n        allSchemas[tag] = schema;\n    }\n    return JSON.stringify(allSchemas, null, 2);\n}\n\n/**\n * Convenience namespace exporting all schema API functions.\n * @namespace ComponentSchema\n */\nexport const ComponentSchema = {\n    getComponentSchema,\n    getAllSchemas,\n    getSchemaComponents,\n    getSchemas,\n    getSchemaQuickRef,\n    exportSchemasAsJSON\n};\n",
    "/**\n * @fileoverview Centralized Z-Index Layer System for AgentUI\n * \n * Provides consistent layering across all components.\n * Uses named constants to eliminate magic numbers.\n * \n * Layer Stack (lowest to highest):\n * - base: 1 (default content)\n * - sticky: 100 (sticky headers, FABs)\n * - dropdown: 1000 (dropdowns, menus)\n * - drawer: 1100 (navigation drawers)\n * - modal: 1200 (modal dialogs)\n * - toast: 1300 (toast notifications)\n * - tooltip: 1400 (tooltips)\n * - overlay: 9999 (full-screen overlays)\n * - devtools: 999999 (agent dev tools - always on top)\n * \n * @example\n * import { Z_INDEX } from '../core/layers.js';\n * this.style.zIndex = Z_INDEX.modal;\n */\n\n/**\n * Z-Index layer constants\n * @type {Object<string, number>}\n */\nexport const Z_INDEX = Object.freeze({\n    /** Default content layer */\n    base: 1,\n    /** Sticky headers, FABs */\n    sticky: 100,\n    /** Dropdowns, menus, popovers */\n    dropdown: 1000,\n    /** Navigation drawers */\n    drawer: 1100,\n    /** Modal dialogs */\n    modal: 1200,\n    /** Toast notifications */\n    toast: 1300,\n    /** Tooltips */\n    tooltip: 1400,\n    /** Full-screen overlays */\n    overlay: 9999,\n    /** Agent dev tools - always on top */\n    devtools: 999999\n});\n\n/**\n * Inject CSS custom properties for z-index layers.\n * Call this once on app init to use in CSS.\n * \n * @example\n * // In CSS:\n * .my-modal { z-index: var(--z-modal); }\n */\nexport function injectLayerTokens() {\n    // Check if already injected\n    if (document.getElementById('au-layer-tokens')) return;\n\n    const style = document.createElement('style');\n    style.id = 'au-layer-tokens';\n    style.textContent = `:root {\n${Object.entries(Z_INDEX).map(([k, v]) => `    --z-${k}: ${v};`).join('\\n')}\n}`;\n    document.head.appendChild(style);\n}\n\n// Note (P3.2): injectLayerTokens() is NOT auto-called on import.\n// CSS custom properties are defined in tokens.css (canonical source).\n// Call injectLayerTokens() manually if you need JS-injected tokens.\n",
    "/**\n * @fileoverview Centralized Keyboard Manager for AgentUI\n * \n * Provides a stack-based ESC key handler for modal-like components.\n * Components register handlers when opened and unregister when closed.\n * ESC key closes the topmost component (LIFO stack).\n * \n * @example\n * import { keyboard } from '../core/keyboard.js';\n * \n * connectedCallback() {\n *     this._unsubEsc = keyboard.pushEscapeHandler(this, () => this.close());\n * }\n * \n * disconnectedCallback() {\n *     this._unsubEsc?.();\n * }\n */\n\n/**\n * @typedef {Object} EscapeEntry\n * @property {HTMLElement} element - The element that registered the handler\n * @property {() => void} callback - Function to call on ESC\n */\n\n/**\n * Stack-based keyboard manager for modal-like ESC handling.\n * Components push/pop handlers; only the topmost receives the ESC key.\n *\n * @class\n */\nclass KeyboardManager {\n    /** @type {EscapeEntry[]} */\n    #escapeStack = [];\n\n    /** @type {boolean} */\n    #initialized = false;\n\n    constructor() {\n        this.#init();\n    }\n\n    /**\n     * Initialize the global keyboard listener\n     * @private\n     */\n    #init() {\n        if (this.#initialized || typeof window === 'undefined') return;\n\n        document.addEventListener('keydown', (e) => {\n            if (e.key === 'Escape' && this.#escapeStack.length > 0) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                // Get the topmost handler\n                const top = this.#escapeStack[this.#escapeStack.length - 1];\n                top.callback();\n            }\n        });\n\n        this.#initialized = true;\n    }\n\n    /**\n     * Register an ESC key handler for a component.\n     * Handlers are called in LIFO order (last registered = first to receive ESC).\n     * \n     * @param {HTMLElement} element - The element registering the handler\n     * @param {() => void} callback - Function to call when ESC is pressed\n     * @returns {() => void} Unsubscribe function - call when closing/disconnecting\n     */\n    pushEscapeHandler(element, callback) {\n        const entry = { element, callback };\n        this.#escapeStack.push(entry);\n\n        // Return unsubscribe function\n        return () => {\n            const index = this.#escapeStack.indexOf(entry);\n            if (index > -1) {\n                this.#escapeStack.splice(index, 1);\n            }\n        };\n    }\n\n    /**\n     * Check if an element is currently at the top of the ESC stack\n     * @param {HTMLElement} element\n     * @returns {boolean}\n     */\n    isTopmost(element) {\n        if (this.#escapeStack.length === 0) return false;\n        return this.#escapeStack[this.#escapeStack.length - 1].element === element;\n    }\n\n    /**\n     * Get the current stack depth (for debugging)\n     * @returns {number}\n     */\n    get stackDepth() {\n        return this.#escapeStack.length;\n    }\n}\n\n/**\n * Global keyboard manager singleton\n * @type {KeyboardManager}\n */\nexport const keyboard = new KeyboardManager();\n\n// Also export class for testing\nexport { KeyboardManager };\n",
    "/**\n * @fileoverview Centralized Breakpoint System for AgentUI\n * \n * Provides MD3-compliant responsive breakpoints with reactive subscriptions.\n * All components should use this utility for consistent responsive behavior.\n * \n * MD3 Window Size Classes:\n * - Compact: < 600px (mobile phones)\n * - Medium: 600-839px (tablets, foldables)\n * - Expanded: ≥ 840px (desktop, large tablets)\n * \n * @see https://m3.material.io/foundations/layout/applying-layout\n */\n\n/**\n * MD3 Breakpoint values in pixels\n */\nexport const BREAKPOINTS = {\n    /** Maximum width for compact (mobile) layout */\n    compact: 600,\n    /** Maximum width for medium (tablet) layout */\n    medium: 840,\n    /** Minimum width for expanded (desktop) layout */\n    expanded: 840\n};\n\n/**\n * Breakpoint size class names\n * @typedef {'compact' | 'medium' | 'expanded'} BreakpointClass\n */\n\n/**\n * Callback function type for breakpoint changes\n * @typedef {(breakpoint: BreakpointClass) => void} BreakpointCallback\n */\n\n/**\n * Reactive observer for MD3 responsive breakpoints.\n * Uses MediaQueryList listeners for efficient change detection.\n *\n * @class\n */\nclass BreakpointObserver {\n    /** @type {Set<BreakpointCallback>} */\n    #listeners = new Set();\n\n    /** @type {BreakpointClass} */\n    #current = 'expanded';\n\n    /** @type {MediaQueryList|null} */\n    #mqCompact = null;\n\n    /** @type {MediaQueryList|null} */\n    #mqMedium = null;\n\n    constructor() {\n        if (typeof window !== 'undefined') {\n            this.#setupMediaQueries();\n        }\n    }\n\n    /**\n     * Set up media query listeners\n     * @private\n     */\n    #setupMediaQueries() {\n        // Compact: < 600px\n        this.#mqCompact = window.matchMedia(`(max-width: ${BREAKPOINTS.compact - 1}px)`);\n        this.#mqCompact.addEventListener('change', this.#handleChange);\n\n        // Medium: 600-839px\n        this.#mqMedium = window.matchMedia(\n            `(min-width: ${BREAKPOINTS.compact}px) and (max-width: ${BREAKPOINTS.medium - 1}px)`\n        );\n        this.#mqMedium.addEventListener('change', this.#handleChange);\n\n        // Set initial value\n        this.#updateCurrent();\n    }\n\n    /**\n     * Handle media query change events\n     * @private\n     */\n    #handleChange = () => {\n        const oldValue = this.#current;\n        this.#updateCurrent();\n\n        if (oldValue !== this.#current) {\n            this.#notifyListeners();\n        }\n    };\n\n    /**\n     * Update current breakpoint based on media queries\n     * @private\n     */\n    #updateCurrent() {\n        if (this.#mqCompact?.matches) {\n            this.#current = 'compact';\n        } else if (this.#mqMedium?.matches) {\n            this.#current = 'medium';\n        } else {\n            this.#current = 'expanded';\n        }\n    }\n\n    /**\n     * Notify all listeners of breakpoint change\n     * @private\n     */\n    #notifyListeners() {\n        this.#listeners.forEach(callback => {\n            try {\n                callback(this.#current);\n            } catch (e) {\n                console.error('[Breakpoints] Listener error:', e);\n            }\n        });\n    }\n\n    /**\n     * Get current breakpoint class (live query)\n     * @returns {BreakpointClass}\n     */\n    get current() {\n        // Always query live for most accurate state\n        if (this.#mqCompact?.matches) {\n            return 'compact';\n        } else if (this.#mqMedium?.matches) {\n            return 'medium';\n        }\n        return 'expanded';\n    }\n\n    /**\n     * Check if currently in compact (mobile) mode\n     * @returns {boolean}\n     */\n    get isCompact() {\n        return this.#mqCompact?.matches ?? false;\n    }\n\n    /**\n     * Check if currently in medium (tablet) mode\n     * @returns {boolean}\n     */\n    get isMedium() {\n        return this.#mqMedium?.matches ?? false;\n    }\n\n    /**\n     * Check if currently in expanded (desktop) mode\n     * @returns {boolean}\n     */\n    get isExpanded() {\n        return !this.isCompact && !this.isMedium;\n    }\n\n    /**\n     * Check if NOT in compact mode (medium or expanded)\n     * @returns {boolean}\n     */\n    get isNotCompact() {\n        return !this.isCompact;\n    }\n\n    /**\n     * Subscribe to breakpoint changes\n     * @param {BreakpointCallback} callback - Called with new breakpoint class on change\n     * @returns {() => void} Unsubscribe function\n     */\n    subscribe(callback) {\n        this.#listeners.add(callback);\n\n        // Call immediately with current value\n        callback(this.#current);\n\n        // Return unsubscribe function\n        return () => {\n            this.#listeners.delete(callback);\n        };\n    }\n\n    /**\n     * Get window width in pixels (for testing/debugging)\n     * @returns {number}\n     */\n    get windowWidth() {\n        return typeof window !== 'undefined' ? window.innerWidth : 1200;\n    }\n\n    /**\n     * Destroy the observer and remove all listeners\n     */\n    destroy() {\n        if (this.#mqCompact) {\n            this.#mqCompact.removeEventListener('change', this.#handleChange);\n            this.#mqCompact = null;\n        }\n        if (this.#mqMedium) {\n            this.#mqMedium.removeEventListener('change', this.#handleChange);\n            this.#mqMedium = null;\n        }\n        this.#listeners.clear();\n        this.#current = 'expanded';\n    }\n}\n\n/**\n * Global breakpoint observer singleton\n * @type {BreakpointObserver}\n */\nexport const breakpoints = new BreakpointObserver();\n\n// Also expose class for testing\nexport { BreakpointObserver };\n",
    "/**\n * @fileoverview Centralized Utility Functions for AgentUI\n * \n * Common utility functions used across components.\n * Import and use these instead of defining inline.\n */\n\n/**\n * Escape HTML entities to prevent XSS attacks.\n * Use this when inserting user-provided content into templates.\n * \n * @param {string|null|undefined} str - String to escape\n * @returns {string} Escaped string safe for HTML insertion\n * \n * @example\n * import { escapeHTML } from '../core/utils.js';\n * \n * const userInput = '<script>alert(\"xss\")</script>';\n * element.innerHTML = `<div>${escapeHTML(userInput)}</div>`;\n * // Result: <div>&lt;script&gt;alert(\"xss\")&lt;/script&gt;</div>\n */\nexport function escapeHTML(str) {\n    if (str == null) return '';\n    // P1.7 perf fix: single-pass replacement (was 5 sequential regex scans)\n    return String(str).replace(/[&<>\"']/g, c => _ESCAPE_MAP[c]);\n}\n\n/** @private Single-pass HTML escape lookup */\nconst _ESCAPE_MAP = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#039;'\n};\n\n/**\n * Marker class for pre-trusted HTML content.\n * Values wrapped in SafeHTML will NOT be escaped by the `html` tagged template.\n * Extends String so .innerHTML assignment works directly in all DOM implementations.\n * \n * @private - Use the `safe()` function instead of constructing directly.\n */\nclass SafeHTML extends String {\n    constructor(value) {\n        super(value == null ? '' : value);\n    }\n}\n\n/**\n * Mark a string as trusted HTML that should NOT be escaped by the `html` tagged template.\n * Use this only for content you control — never for user input.\n * \n * @param {string|null|undefined} value - Trusted HTML string\n * @returns {SafeHTML} Wrapped value that bypasses escaping\n * \n * @example\n * import { html, safe } from 'agentui-wc';\n * \n * const icon = '<au-icon name=\"home\"></au-icon>';\n * element.innerHTML = html`<div>${safe(icon)}</div>`;\n * // → <div><au-icon name=\"home\"></au-icon></div>\n */\nexport function safe(value) {\n    return new SafeHTML(value);\n}\n\n/**\n * Tagged template literal for XSS-safe HTML generation.\n * All interpolated values are automatically escaped via `escapeHTML()`.\n * Use `safe()` to explicitly mark trusted HTML that should not be escaped.\n * \n * Returns a SafeHTML instance, so nested `html` calls compose safely.\n * \n * @param {TemplateStringsArray} strings - Static template parts\n * @param {...*} values - Interpolated values (auto-escaped)\n * @returns {SafeHTML} Safe HTML string\n * \n * @example\n * import { html, safe } from 'agentui-wc';\n * \n * // Auto-escaped — XSS impossible\n * const title = '<script>alert(\"xss\")</script>';\n * element.innerHTML = html`<h2>${title}</h2>`;\n * // → <h2>&lt;script&gt;alert(\"xss\")&lt;/script&gt;</h2>\n * \n * // Nested templates compose safely\n * const items = ['One', 'Two', '<Three>'];\n * element.innerHTML = html`<ul>${items.map(i => html`<li>${i}</li>`)}</ul>`;\n * // → <ul><li>One</li><li>Two</li><li>&lt;Three&gt;</li></ul>\n */\nexport function html(strings, ...values) {\n    let result = '';\n    for (let i = 0; i < strings.length; i++) {\n        result += strings[i];\n        if (i < values.length) {\n            const val = values[i];\n            if (val instanceof SafeHTML) {\n                // Trusted — no escaping (SafeHTML extends String)\n                result += val;\n            } else if (Array.isArray(val)) {\n                // Process each array element\n                for (const item of val) {\n                    if (item instanceof SafeHTML) {\n                        result += item;\n                    } else {\n                        result += escapeHTML(item);\n                    }\n                }\n            } else {\n                // Auto-escape everything else\n                result += escapeHTML(val);\n            }\n        }\n    }\n    return new SafeHTML(result);\n}\n",
    "/**\n * @fileoverview View Transitions API Wrapper \n * \n * Provides smooth, GPU-accelerated page transitions.\n * Falls back gracefully if not supported.\n * \n * Usage:\n * await transition(() => {\n *     document.getElementById('app').innerHTML = newContent;\n * });\n */\n\n/**\n * Check if View Transitions API is supported\n */\nexport const supportsViewTransitions = 'startViewTransition' in document;\n\n/**\n * Perform a view transition with fallback\n * @param {() => void | Promise<void>} updateCallback - DOM update function\n * @returns {Promise<void>}\n */\nexport async function transition(updateCallback) {\n    if (supportsViewTransitions) {\n        const viewTransition = document.startViewTransition(async () => {\n            await updateCallback();\n        });\n\n        await viewTransition.finished;\n    } else {\n        // Fallback: just run the update\n        await updateCallback();\n    }\n}\n\n/**\n * Transition with custom animation classes.\n * @param {() => void | Promise<void>} updateCallback - DOM update function\n * @param {Object} [options] - Transition options\n * @param {string} [options.name='page'] - View transition name\n * @returns {Promise<void>}\n */\nexport async function transitionNamed(updateCallback, { name = 'page' } = {}) {\n    if (supportsViewTransitions) {\n        // Add transition name dynamically\n        const style = document.createElement('style');\n        style.textContent = `\n            ::view-transition-old(${name}),\n            ::view-transition-new(${name}) {\n                animation-duration: 0.3s;\n            }\n        `;\n        document.head.appendChild(style);\n\n        try {\n            await transition(updateCallback);\n        } finally {\n            try { style.remove(); } catch (_) { /* style may already be detached */ }\n        }\n    } else {\n        await updateCallback();\n    }\n}\n\n/**\n * Navigate with view transition.\n * @param {string} path - Route path to push to history\n * @param {Function} render - Render function for the new view\n * @returns {Promise<void>}\n */\nexport async function navigateWithTransition(path, render) {\n    await transition(() => {\n        window.history.pushState({}, '', path);\n        render();\n    });\n}\n",
    "/**\n * @fileoverview Task Scheduler API \n * \n * Uses scheduler.postTask() for priority-based scheduling.\n * Falls back to setTimeout if not supported.\n * \n * Priority levels:\n * - 'user-blocking': Highest priority (input handlers)\n * - 'user-visible': Medium priority (rendering)\n * - 'background': Lowest priority (analytics, prefetch)\n * \n * Usage:\n * await scheduleTask(() => heavyComputation(), 'background');\n * await yieldToMain();\n */\n\n/**\n * Whether the native Scheduler API (scheduler.postTask) is available.\n * @type {boolean}\n */\nexport const supportsScheduler = 'scheduler' in globalThis;\n\n/**\n * Schedule a task with priority.\n * @template T\n * @param {() => T} callback - Task to schedule\n * @param {'user-blocking' | 'user-visible' | 'background'} [priority='user-visible'] - Task priority\n * @returns {Promise<T>}\n */\nexport async function scheduleTask(callback, priority = 'user-visible') {\n    if (supportsScheduler) {\n        return globalThis.scheduler.postTask(callback, { priority });\n    }\n\n    // Fallback with setTimeout based on priority\n    const delay = priority === 'user-blocking' ? 0 :\n        priority === 'user-visible' ? 0 : 1;\n\n    return new Promise(resolve => {\n        setTimeout(() => resolve(callback()), delay);\n    });\n}\n\n/**\n * Yield to main thread (allow input/rendering)\n * @returns {Promise<void>}\n */\nexport async function yieldToMain() {\n    if (supportsScheduler && 'yield' in globalThis.scheduler) {\n        return globalThis.scheduler.yield();\n    }\n\n    // Fallback: yield with setTimeout\n    return new Promise(resolve => setTimeout(resolve, 0));\n}\n\n/**\n * Process items in chunks, yielding between chunks.\n * Prefer over `processInChunks` because it uses native `scheduler.yield()` when available.\n *\n * @template T\n * @param {T[]} items - Array of items to process\n * @param {(item: T, index: number) => void} process - Callback for each item\n * @param {number} [chunkSize=50] - Items per chunk before yielding\n * @returns {Promise<void>}\n */\nexport async function processWithYield(items, process, chunkSize = 50) {\n    for (let i = 0; i < items.length; i++) {\n        process(items[i], i);\n\n        // Yield every chunk\n        if ((i + 1) % chunkSize === 0) {\n            await yieldToMain();\n        }\n    }\n}\n\n/**\n * Run background task (lowest priority, won't block UI).\n * @template T\n * @param {() => T} callback - Task to run in background\n * @returns {Promise<T>}\n */\nexport function runBackground(callback) {\n    return scheduleTask(callback, 'background');\n}\n\n/**\n * Run user-blocking task (highest priority).\n * @template T\n * @param {() => T} callback - Task to run immediately\n * @returns {Promise<T>}\n */\nexport function runImmediate(callback) {\n    return scheduleTask(callback, 'user-blocking');\n}\n\n/**\n * Wait for next browser paint (double-rAF pattern)\n * Use for CSS animation triggers after DOM changes.\n * This ensures the browser has completed layout/paint before applying\n * additional classes that would trigger transitions.\n * \n * @returns {Promise<void>}\n * @example\n * // Trigger CSS animation after DOM change\n * element.classList.add('is-open');\n * await afterPaint();\n * element.classList.add('is-visible'); // Now transition will animate\n */\nexport function afterPaint() {\n    return new Promise(resolve => {\n        requestAnimationFrame(() => requestAnimationFrame(resolve));\n    });\n}\n",
    "/**\n * @fileoverview Render Utilities for Large-Scale Applications\n * \n * Optimizes rendering for complex apps with thousands of components.\n * \n * Features:\n * - requestAnimationFrame batching\n * - Lazy component rendering\n * - Intersection Observer for viewport-based rendering\n * - Memoization for expensive computations\n */\n\n/**\n * Batches multiple DOM update callbacks into a single animation frame\n * to prevent layout thrashing in complex updates.\n *\n * @class\n * @private\n */\nclass RenderScheduler {\n    /** @type {Function[]} Queued render callbacks */\n    #queue = [];\n    /** @type {boolean} Whether a rAF is already scheduled */\n    #scheduled = false;\n\n    /**\n     * Schedule a render callback for the next animation frame.\n     * Multiple calls within the same frame are batched together.\n     * @param {Function} callback - DOM update function to execute\n     */\n    schedule(callback) {\n        this.#queue.push(callback);\n\n        if (!this.#scheduled) {\n            this.#scheduled = true;\n            requestAnimationFrame(() => this.#flush());\n        }\n    }\n\n    /**\n     * Flush all queued callbacks in a single animation frame.\n     * @private\n     */\n    #flush() {\n        const callbacks = this.#queue; // Swap, not copy (P1.4 perf fix)\n        this.#queue = [];\n        this.#scheduled = false;\n\n        // Execute all callbacks in single frame\n        for (const cb of callbacks) {\n            try {\n                cb();\n            } catch (e) {\n                console.error('[RenderScheduler] Error:', e);\n            }\n        }\n    }\n}\n\n/** @type {RenderScheduler} Singleton rAF-batched render scheduler */\nexport const rafScheduler = new RenderScheduler();\n/** @deprecated Use `rafScheduler` instead to avoid name collision with scheduler.js */\nexport { rafScheduler as scheduler };\n\n/**\n * Memoize expensive function calls with optional LRU eviction.\n * @param {Function} fn - Function to memoize\n * @param {Object} [options] - Memoization options\n * @param {Function} [options.keyFn=JSON.stringify] - Cache key derivation function\n * @param {number} [options.maxSize=Infinity] - Maximum cache entries (LRU eviction)\n * @returns {Function} Memoized function with same signature as `fn`\n */\nexport function memo(fn, options = {}) {\n    const keyFn = options.keyFn ?? JSON.stringify;\n    const maxSize = options.maxSize ?? Infinity;\n    const cache = new Map();\n\n    return (...args) => {\n        const key = keyFn(args);\n\n        if (cache.has(key)) {\n            return cache.get(key);\n        }\n\n        const result = fn(...args);\n\n        // LRU eviction: remove oldest entry if at capacity\n        if (cache.size >= maxSize) {\n            const oldestKey = cache.keys().next().value;\n            cache.delete(oldestKey);\n        }\n\n        cache.set(key, result);\n        return result;\n    };\n}\n\n/**\n * Debounce function calls — delays execution until `delay` ms of silence.\n * @param {Function} fn - Function to debounce\n * @param {number} [delay=100] - Delay in ms\n * @returns {Function} Debounced function\n */\nexport function debounce(fn, delay = 100) {\n    let timer = null;\n\n    return (...args) => {\n        if (timer) clearTimeout(timer);\n        timer = setTimeout(() => fn(...args), delay);\n    };\n}\n\n/**\n * Throttle function calls — ensures at most one call per `limit` ms.\n * @param {Function} fn - Function to throttle\n * @param {number} [limit=100] - Minimum time between calls in ms\n * @returns {Function} Throttled function\n */\nexport function throttle(fn, limit = 100) {\n    let inThrottle = false;\n\n    return (...args) => {\n        if (!inThrottle) {\n            fn(...args);\n            inThrottle = true;\n            setTimeout(() => inThrottle = false, limit);\n        }\n    };\n}\n\n/**\n * Create an IntersectionObserver for lazy/viewport-based rendering.\n * Automatically unobserves each element after it first becomes visible.\n * @param {Function} onVisible - Called with `(element)` when it enters viewport\n * @param {IntersectionObserverInit} [options={}] - IntersectionObserver options\n * @returns {{ observe: (el: Element) => void, disconnect: () => void }}\n */\nexport function createVisibilityObserver(onVisible, options = {}) {\n    const observer = new IntersectionObserver((entries) => {\n        for (const entry of entries) {\n            if (entry.isIntersecting) {\n                onVisible(entry.target);\n                observer.unobserve(entry.target);\n            }\n        }\n    }, {\n        rootMargin: '100px',\n        threshold: 0,\n        ...options\n    });\n\n    return {\n        observe: (el) => observer.observe(el),\n        disconnect: () => observer.disconnect()\n    };\n}\n\n/**\n * Batches DOM reads and writes to prevent layout thrashing.\n * Reads (measure) execute first, then writes (mutate), following the fastdom pattern.\n *\n * @class\n * @private\n */\nclass DomBatch {\n    /** @type {Function[]} Queued read (measure) callbacks */\n    #reads = [];\n    /** @type {Function[]} Queued write (mutate) callbacks */\n    #writes = [];\n    /** @type {boolean} Whether a rAF is already scheduled */\n    #scheduled = false;\n\n    /**\n     * Schedule a DOM read (measure).\n     * @param {Function} fn - Read callback\n     */\n    read(fn) {\n        this.#reads.push(fn);\n        this.#schedule();\n    }\n\n    /**\n     * Schedule a DOM write (mutate).\n     * @param {Function} fn - Write callback\n     */\n    write(fn) {\n        this.#writes.push(fn);\n        this.#schedule();\n    }\n\n    /** @private */\n    #schedule() {\n        if (!this.#scheduled) {\n            this.#scheduled = true;\n            requestAnimationFrame(() => this.#flush());\n        }\n    }\n\n    /** @private */\n    #flush() {\n        // Reads first (measure phase)\n        let fn;\n        while (fn = this.#reads.shift()) {\n            try { fn(); } catch (e) { console.error(e); }\n        }\n\n        // Writes second (mutate phase)\n        while (fn = this.#writes.shift()) {\n            try { fn(); } catch (e) { console.error(e); }\n        }\n\n        this.#scheduled = false;\n\n        // If more work was added during flush, schedule again\n        if (this.#reads.length || this.#writes.length) {\n            this.#schedule();\n        }\n    }\n}\n\n/** @type {DomBatch} Singleton DOM read/write batcher */\nexport const domBatch = new DomBatch();\n\n/**\n * Chunk large array operations to avoid blocking the main thread.\n * Yields to the event loop between chunks via `setTimeout(0)`.\n * @param {Array} items - Array to process\n * @param {Function} processFn - Called with `(item, index)` for each item\n * @param {number} [chunkSize=100] - Items per chunk before yielding\n * @returns {Promise<void>} Resolves when all items are processed\n */\nexport async function processInChunks(items, processFn, chunkSize = 100) {\n    for (let i = 0; i < items.length; i += chunkSize) {\n        const chunk = items.slice(i, i + chunkSize);\n\n        for (let j = 0; j < chunk.length; j++) {\n            processFn(chunk[j], i + j);\n        }\n\n        // Yield to main thread between chunks\n        await new Promise(r => setTimeout(r, 0));\n    }\n}\n",
    "/**\n * @fileoverview au-stack - Flexbox Stack Layout Component\n * \n * Usage: <au-stack direction=\"column\" gap=\"md\" align=\"center\">...</au-stack>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Flexbox stack layout component for vertical/horizontal arrangement.\n *\n * @class\n * @extends AuElement\n * @element au-stack\n * @slot default - Stack children\n */\nexport class AuStack extends AuElement {\n    static baseClass = 'au-stack';\n    /** @type {string[]} */\n    static observedAttributes = ['direction', 'gap', 'align', 'justify', 'wrap', 'nowrap'];\n\n    /** @override */\n    render() {\n        this.#updateStyles();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.#updateStyles();\n    }\n\n    /** @private */\n    #updateStyles() {\n        const direction = this.attr('direction', 'column');\n        const gap = this.attr('gap', 'md');\n        const align = this.attr('align', 'stretch');\n        const justify = this.attr('justify', 'flex-start');\n        // 2026: row direction wraps by default for responsive layouts\n        // Use nowrap attribute to opt-out, or wrap attribute on column for opt-in\n        const hasWrap = this.has('wrap');\n        const hasNowrap = this.has('nowrap');\n        const isRow = direction === 'row' || direction === 'row-reverse';\n        // Row: wrap by default unless nowrap specified\n        // Column: nowrap by default unless wrap specified\n        const shouldWrap = isRow ? !hasNowrap : hasWrap;\n\n        // Gap values map to CSS custom properties\n        const gapMap = {\n            none: '0',\n            xs: 'var(--md-sys-spacing-xs, 4px)',\n            sm: 'var(--md-sys-spacing-sm, 8px)',\n            md: 'var(--md-sys-spacing-md, 16px)',\n            lg: 'var(--md-sys-spacing-lg, 24px)',\n            xl: 'var(--md-sys-spacing-xl, 32px)'\n        };\n\n        // Shorthand justify values → valid CSS justify-content\n        const justifyMap = {\n            between: 'space-between',\n            around: 'space-around',\n            evenly: 'space-evenly'\n        };\n\n        this.style.display = 'flex';\n        this.style.flexDirection = direction;\n        this.style.gap = gapMap[gap] || gap;\n        this.style.alignItems = align;\n        this.style.justifyContent = justifyMap[justify] || justify;\n        this.style.flexWrap = shouldWrap ? 'wrap' : 'nowrap';\n        // 2026: Proper containment for nested flex layouts\n        this.style.boxSizing = 'border-box';\n        this.style.maxWidth = '100%';\n        this.style.minWidth = '0';  // Critical: allows shrinking in parent flexbox\n        this.style.flexShrink = '1';  // MUST shrink to contain children properly\n    }\n}\n\ndefine('au-stack', AuStack);\n",
    "/**\n * @fileoverview au-grid - CSS Grid Layout Component\n * \n * Usage: <au-grid cols=\"3\" gap=\"md\">...</au-grid>\n * \n * Responsive: On compact screens (< 600px), grids with 3+ columns\n * automatically collapse to single column via CSS media query.\n * See components.css for the responsive rules.\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * CSS Grid layout component with responsive column collapse.\n *\n * @class\n * @extends AuElement\n * @element au-grid\n * @slot default - Grid children\n */\nexport class AuGrid extends AuElement {\n    static baseClass = 'au-grid';\n    static cssFile = 'grid';\n    /** @type {string[]} */\n    static observedAttributes = ['cols', 'rows', 'gap', 'align'];\n\n    /** @override */\n    render() {\n        this.#updateStyles();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.#updateStyles();\n    }\n\n    /** @private */\n    #updateStyles() {\n        const cols = this.attr('cols', '1');\n        const rows = this.attr('rows', '');\n        const gap = this.attr('gap', 'md');\n        const align = this.attr('align', 'stretch');\n\n        const gapMap = {\n            none: '0',\n            xs: '4px',\n            sm: '8px',\n            md: '16px',\n            lg: '24px',\n            xl: '32px'\n        };\n\n        this.style.display = 'grid';\n\n        // Set gridTemplateColumns only for non-responsive cases\n        // CSS media queries in components.css handle responsive collapse to 1fr on compact\n        // We don't override CSS's responsive behavior here - CSS has lower specificity \n        // than inline styles, so we need to NOT set this on compact breakpoints\n        // However, since detecting compact reliably in JS during module load is unreliable,\n        // we rely on CSS to override via !important for responsive cases\n        this.style.gridTemplateColumns = cols.includes('fr') || cols.includes('px')\n            ? cols\n            : `repeat(${cols}, 1fr)`;\n\n        if (rows) {\n            this.style.gridTemplateRows = rows.includes('fr') || rows.includes('px')\n                ? rows\n                : `repeat(${rows}, 1fr)`;\n        }\n        this.style.gap = gapMap[gap] || gap;\n        this.style.alignItems = align;\n    }\n}\n\ndefine('au-grid', AuGrid);\n",
    "/**\n * @fileoverview au-container - Responsive Container Component\n * \n * Usage: <au-container size=\"lg\" padding=\"md\">...</au-container>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Responsive container with max-width and auto-centering.\n *\n * @class\n * @extends AuElement\n * @element au-container\n * @slot default - Page content\n */\nexport class AuContainer extends AuElement {\n    static baseClass = 'au-container';\n    /** @type {string[]} */\n    static observedAttributes = ['size', 'padding', 'center'];\n\n    /** @override */\n    render() {\n        this.#updateStyles();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.#updateStyles();\n    }\n\n    /** @private */\n    #updateStyles() {\n        const size = this.attr('size', 'lg');\n        const padding = this.attr('padding', 'md');\n\n        const sizeMap = {\n            sm: '640px',\n            md: '768px',\n            lg: '1024px',\n            xl: '1280px',\n            full: '100%'\n        };\n\n        const paddingMap = {\n            none: '0',\n            sm: '8px',\n            md: '16px',\n            lg: '24px',\n            xl: '32px'\n        };\n\n        // display: block is required for max-width to work on custom elements\n        this.style.display = 'block';\n        this.style.maxWidth = sizeMap[size] || size;\n        this.style.padding = paddingMap[padding] || padding;\n        this.style.width = '100%';\n\n        // Center by default (MD3 standard) — opt-out with center=\"false\"\n        if (this.attr('center', '') !== 'false') {\n            this.style.marginLeft = 'auto';\n            this.style.marginRight = 'auto';\n        }\n    }\n}\n\ndefine('au-container', AuContainer);\n",
    "/**\n * @fileoverview au-navbar - Navigation Bar Component\n * \n * Usage: \n * <au-navbar>\n *   <au-navbar-brand>Logo</au-navbar-brand>\n *   <au-navbar-links>\n *     <a href=\"/\">Home</a>\n *     <a href=\"/about\">About</a>\n *   </au-navbar-links>\n *   <au-navbar-actions>\n *     <au-theme-toggle></au-theme-toggle>\n *   </au-navbar-actions>\n * </au-navbar>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Top navigation bar with brand, links, and action slots.\n *\n * @class\n * @extends AuElement\n * @element au-navbar\n */\nexport class AuNavbar extends AuElement {\n    static baseClass = 'au-navbar';\n    static cssFile = 'navbar';\n    /** @type {string[]} */\n    static observedAttributes = ['sticky', 'variant'];\n\n    /** @override */\n    render() {\n        this.style.display = 'flex';\n        this.style.alignItems = 'center';\n        this.style.justifyContent = 'space-between';\n        this.style.padding = '0 var(--md-sys-spacing-md, 16px)';\n        this.style.height = '64px';\n        this.style.background = 'var(--md-sys-color-surface-container)';\n        this.style.borderBottom = '1px solid var(--md-sys-color-outline-variant)';\n\n        if (this.has('sticky')) {\n            this.style.position = 'sticky';\n            this.style.top = '0';\n            this.style.zIndex = '100';\n        }\n    }\n}\n\n/**\n * Brand section for `<au-navbar>`.\n * @class\n * @extends AuElement\n * @element au-navbar-brand\n */\nexport class AuNavbarBrand extends AuElement {\n    static baseClass = 'au-navbar__brand';\n\n    /** @override */\n    render() {\n        this.style.fontWeight = '600';\n        this.style.fontSize = '1.25rem';\n    }\n}\n\n/**\n * Links section for `<au-navbar>`.\n * @class\n * @extends AuElement\n * @element au-navbar-links\n */\nexport class AuNavbarLinks extends AuElement {\n    static baseClass = 'au-navbar__links';\n\n    /** @override */\n    render() {\n        // All styles handled by CSS in components.css\n    }\n}\n\n/**\n * Actions section for `<au-navbar>`.\n * @class\n * @extends AuElement\n * @element au-navbar-actions\n */\nexport class AuNavbarActions extends AuElement {\n    static baseClass = 'au-navbar__actions';\n\n    /** @override */\n    render() {\n        this.style.display = 'flex';\n        this.style.gap = 'var(--md-sys-spacing-sm, 8px)';\n        this.style.alignItems = 'center';\n    }\n}\n\ndefine('au-navbar', AuNavbar);\ndefine('au-navbar-brand', AuNavbarBrand);\ndefine('au-navbar-links', AuNavbarLinks);\ndefine('au-navbar-actions', AuNavbarActions);\n",
    "/**\n * @fileoverview au-sidebar - Collapsible Sidebar Component\n * \n * Usage:\n * <au-sidebar open>\n *   <au-sidebar-item icon=\"home\" active>Dashboard</au-sidebar-item>\n *   <au-sidebar-item icon=\"settings\">Settings</au-sidebar-item>\n * </au-sidebar>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Collapsible sidebar navigation panel.\n *\n * @class\n * @extends AuElement\n * @element au-sidebar\n * @fires au-sidebar-toggle - When toggled, detail: `{ open }`\n * @slot default - `<au-sidebar-item>` children\n */\nexport class AuSidebar extends AuElement {\n    static baseClass = 'au-sidebar';\n    /** @type {string[]} */\n    static observedAttributes = ['open', 'width'];\n\n    /** @override */\n    render() {\n        const width = this.attr('width', '250px');\n\n        this.style.width = this.has('open') ? width : '64px';\n        this.style.height = '100vh';\n        this.style.background = 'var(--md-sys-color-surface-container)';\n        this.style.borderRight = '1px solid var(--md-sys-color-outline-variant)';\n        this.style.transition = 'width var(--md-sys-motion-duration-medium2) var(--md-sys-motion-easing-emphasized)';\n        this.style.overflow = 'hidden';\n        this.style.display = 'flex';\n        this.style.flexDirection = 'column';\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.render();\n    }\n\n    /** Toggle the sidebar open/closed. */\n    toggle() {\n        if (this.has('open')) {\n            this.removeAttribute('open');\n        } else {\n            this.setAttribute('open', '');\n        }\n        this.emit('au-sidebar-toggle', { open: this.has('open') });\n    }\n}\n\n/**\n * Individual item within `<au-sidebar>`.\n *\n * @class\n * @extends AuElement\n * @element au-sidebar-item\n * @fires au-sidebar-select - When clicked, detail: `{ item }`\n */\nexport class AuSidebarItem extends AuElement {\n    static baseClass = 'au-sidebar__item';\n    /** @type {string[]} */\n    static observedAttributes = ['icon', 'active'];\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.listen(this, 'click', () => {\n            this.emit('au-sidebar-select', { item: this });\n        });\n    }\n\n    /** @override */\n    render() {\n        const icon = this.attr('icon', '');\n        const text = this.textContent;\n\n        this.style.display = 'flex';\n        this.style.alignItems = 'center';\n        this.style.gap = 'var(--md-sys-spacing-md, 16px)';\n        this.style.padding = '12px 16px';\n        this.style.cursor = 'pointer';\n        this.style.borderRadius = 'var(--md-sys-shape-corner-medium, 8px)';\n        this.style.margin = '4px 8px';\n        this.style.transition = 'background var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard)';\n\n        if (this.has('active')) {\n            this.style.background = 'var(--md-sys-color-primary-container)';\n            this.style.color = 'var(--md-sys-color-on-primary-container)';\n        }\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.render();\n    }\n}\n\ndefine('au-sidebar', AuSidebar);\ndefine('au-sidebar-item', AuSidebarItem);\n",
    "/**\n * @fileoverview au-divider - Divider Line Component\n * \n * Usage:\n * <au-divider></au-divider>\n * <au-divider vertical></au-divider>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Horizontal or vertical divider line.\n *\n * @class\n * @extends AuElement\n * @element au-divider\n */\nexport class AuDivider extends AuElement {\n    static baseClass = 'au-divider';\n    static cssFile = null; // CSS is inline/JS only\n    /** @type {string[]} */\n    static observedAttributes = ['vertical', 'inset'];\n\n    /** @override */\n    render() {\n        const vertical = this.has('vertical');\n        const inset = this.has('inset');\n\n        this.style.display = 'block';\n        this.style.background = 'var(--md-sys-color-outline-variant)';\n        this.style.flexShrink = '0';\n\n        if (vertical) {\n            this.style.width = '1px';\n            this.style.minHeight = '24px';\n            this.style.margin = inset ? '0 8px' : '0';\n        } else {\n            this.style.height = '1px';\n            this.style.width = '100%';\n            this.style.margin = inset ? '0 16px' : '0';\n        }\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.render();\n    }\n}\n\ndefine('au-divider', AuDivider);\n",
    "/**\n * au-layout.js - Material Design 3 Responsive Layout Container\n * \n * Main layout container that orchestrates drawer, content, and bottom nav.\n * Provides responsive layout structure with proper spacing.\n * \n * LIGHT DOM: Uses Light DOM for styling consistency.\n * Uses slot=\"...\" attributes on children to distribute content.\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * MD3 responsive layout container orchestrating drawer, content, and bottom nav.\n *\n * @class\n * @extends AuElement\n * @element au-layout\n * @slot header - Navbar or top bar\n * @slot drawer - `<au-drawer>` navigation\n * @slot footer - Footer content\n * @slot bottom - `<au-bottom-nav>` for mobile\n * @slot default - Main page content\n */\nexport class AuLayout extends AuElement {\n    /** @type {string[]} */\n    static get observedAttributes() {\n        return ['has-drawer', 'has-bottom-nav', 'full-bleed'];\n    }\n\n    static baseClass = 'au-layout';\n    static cssFile = 'layout';\n    // Disable containment - .au-layout-drawer uses position:fixed on mobile\n    static useContainment = false;\n\n\n    constructor() {\n        super();\n    }\n\n    /** @override */\n    connectedCallback() {\n        // Capture slotted children before render\n        if (!this._slotsCaptured) {\n            this._slots = {\n                header: this.querySelector('[slot=\"header\"]'),\n                drawer: this.querySelector('[slot=\"drawer\"]'),\n                footer: this.querySelector('[slot=\"footer\"]'),\n                bottom: this.querySelector('[slot=\"bottom\"]'),\n                default: Array.from(this.children).filter(c => !c.hasAttribute('slot'))\n            };\n            this._slotsCaptured = true;\n        }\n        super.connectedCallback();\n        this._setupScrollReset();\n        this._updateLayout();\n        // Defer a re-check: child components like au-bottom-nav[hide-on-desktop]\n        // set display:none in their own connectedCallback, which may run after ours.\n        if (typeof requestAnimationFrame === 'function') {\n            requestAnimationFrame(() => {\n                this._recheckBottomNav();\n                this._checkPaddingIntegrity();\n            });\n        }\n    }\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        // Listener cleanup handled by AuElement AbortController\n    }\n\n    /** @private */\n    _setupScrollReset() {\n        // Reset content scroll when navigating to a new section\n        this.listen(window, 'hashchange', () => {\n            const mainContainer = this.querySelector('.au-layout-main');\n            if (mainContainer) {\n                mainContainer.scrollTop = 0;\n            }\n        });\n    }\n\n    /** @private */\n    _updateLayout() {\n        const hasDrawer = this._slots.drawer !== null;\n        const hasBottomNav = this._slots.bottom !== null;\n\n        this.toggleAttribute('has-drawer', hasDrawer);\n        this.toggleAttribute('has-bottom-nav', hasBottomNav);\n    }\n\n    /**\n     * Re-check bottom-nav visibility after child components have initialized.\n     * @private\n     */\n    _recheckBottomNav() {\n        const bottomNav = this._slots.bottom;\n        if (!bottomNav) return;\n        const isVisible = getComputedStyle(bottomNav).display !== 'none';\n        this.toggleAttribute('has-bottom-nav', isVisible);\n    }\n\n    /**\n     * Warn if user CSS overrides bottom-nav padding on `.au-layout-content`.\n     * @private\n     */\n    _checkPaddingIntegrity() {\n        if (!this.hasAttribute('has-bottom-nav')) return;\n        // When full-bleed is active, .au-layout-main height already compensates\n        // for bottom-nav — padding-bottom: 0 is intentional, not an error.\n        if (this.hasAttribute('full-bleed')) return;\n        const content = this.querySelector('.au-layout-content');\n        if (!content) return;\n        // getComputedStyle must be called as window.getComputedStyle() —\n        // extracting it to a variable throws \"Illegal invocation\" in browsers.\n        const win = typeof window !== 'undefined' ? window : (typeof globalThis !== 'undefined' ? globalThis : null);\n        if (!win || typeof win.getComputedStyle !== 'function') return;\n        const pad = parseFloat(win.getComputedStyle(content).paddingBottom);\n        if (isNaN(pad)) return;\n        if (pad < 60) {\n            // Before warning, check if a direct child has sufficient padding-bottom.\n            // Common pattern: <main class=\"app-main\" style=\"padding-bottom: 96px\">\n            // inside .au-layout-content — content is NOT hidden in this case.\n            const children = content.children;\n            for (let i = 0; i < children.length; i++) {\n                const childPad = parseFloat(win.getComputedStyle(children[i]).paddingBottom);\n                if (!isNaN(childPad) && childPad >= 60) return; // child handles it\n            }\n            console.warn(\n                '[au-layout] ⚠️ padding-bottom on .au-layout-content is ' + pad + 'px, ' +\n                'but has-bottom-nav is active — content may be hidden behind the bottom nav.\\n' +\n                'Fix: use <au-layout full-bleed> instead of overriding padding manually.'\n            );\n        }\n    }\n\n    /** @override */\n    render() {\n        // Build layout structure with DOM manipulation\n        this.innerHTML = '';\n\n        // Layout wrapper\n        const wrapper = document.createElement('div');\n        wrapper.className = 'au-layout-wrapper';\n\n        // Header\n        const headerContainer = document.createElement('header');\n        headerContainer.className = 'au-layout-header';\n        if (this._slots.header) {\n            headerContainer.appendChild(this._slots.header);\n        }\n        wrapper.appendChild(headerContainer);\n\n        // Layout body (drawer + main)\n        const body = document.createElement('div');\n        body.className = 'au-layout-body';\n\n        // Drawer container\n        const drawerContainer = document.createElement('aside');\n        drawerContainer.className = 'au-layout-drawer';\n        if (this._slots.drawer) {\n            drawerContainer.appendChild(this._slots.drawer);\n        }\n        body.appendChild(drawerContainer);\n\n        // Main container\n        const mainContainer = document.createElement('div');\n        mainContainer.className = 'au-layout-main';\n\n        const content = document.createElement('main');\n        content.className = 'au-layout-content';\n        if (this._slots.default) {\n            this._slots.default.forEach(child => content.appendChild(child));\n        }\n        mainContainer.appendChild(content);\n        body.appendChild(mainContainer);\n\n        wrapper.appendChild(body);\n\n        // Footer\n        const footerContainer = document.createElement('footer');\n        footerContainer.className = 'au-layout-footer';\n        if (this._slots.footer) {\n            footerContainer.appendChild(this._slots.footer);\n        }\n        wrapper.appendChild(footerContainer);\n\n        this.appendChild(wrapper);\n\n        // Bottom nav container (outside wrapper, fixed)\n        const bottomContainer = document.createElement('div');\n        bottomContainer.className = 'au-layout-bottom';\n        if (this._slots.bottom) {\n            bottomContainer.appendChild(this._slots.bottom);\n        }\n        this.appendChild(bottomContainer);\n    }\n}\n\ndefine('au-layout', AuLayout);\n",
    "/**\n * au-drawer.js - Material Design 3 Adaptive Navigation Drawer\n * \n * Responsive drawer that adapts to screen size:\n * - Desktop: Expanded rail or standard drawer\n * - Tablet: Collapsed rail\n * - Mobile: Hidden, opens as modal overlay\n * \n * Follows MD3 Navigation Drawer/Rail specifications.\n * LIGHT DOM: Uses Light DOM for styling consistency.\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { breakpoints } from '../core/breakpoints.js';\nimport { keyboard } from '../core/keyboard.js';\n\n/**\n * MD3 Adaptive Navigation Drawer with responsive breakpoint behaviour.\n *\n * @class\n * @extends AuElement\n * @element au-drawer\n * @fires au-nav-select - Bubbles when a child `au-drawer-item` is selected\n * @slot header - Optional header content\n * @slot footer - Optional footer content\n * @slot default - `<au-drawer-item>` children\n */\nexport class AuDrawer extends AuElement {\n    /** @type {string[]} */\n    static get observedAttributes() {\n        return ['mode', 'open', 'expand-on-hover', 'position'];\n    }\n\n    static baseClass = 'au-drawer';\n    static cssFile = 'drawer';\n    // CRITICAL: Disable containment - it creates containing block for fixed children\n    // causing the nav with position:fixed to inherit 0 height from the host\n    static useContainment = false;\n\n\n    constructor() {\n        super();\n        this._currentMode = 'expanded'; // expanded | rail | hidden\n        this._isHovering = false;\n        this._unsubscribe = null;\n    }\n\n    // Modes: auto | permanent | temporary | rail\n    get mode() { return this.getAttribute('mode') || 'auto'; }\n    set mode(v) { this.setAttribute('mode', v); }\n\n    get open() { return this.hasAttribute('open'); }\n    set open(v) { this.toggleAttribute('open', Boolean(v)); }\n\n    get expandOnHover() { return this.hasAttribute('expand-on-hover'); }\n    set expandOnHover(v) { this.toggleAttribute('expand-on-hover', Boolean(v)); }\n\n    get position() { return this.getAttribute('position') || 'start'; }\n    set position(v) { this.setAttribute('position', v); }\n\n    /** @override */\n    connectedCallback() {\n        // Capture slotted children before render\n        if (!this._slotsCaptured) {\n            this._slots = {\n                header: this.querySelector('[slot=\"header\"]'),\n                footer: this.querySelector('[slot=\"footer\"]'),\n                default: Array.from(this.children).filter(c => !c.hasAttribute('slot'))\n            };\n            this._slotsCaptured = true;\n        }\n        super.connectedCallback();\n        this._setupBreakpointListener();\n        this._setupListeners();\n        // Force immediate mode application\n        this._forceUpdateMode();\n    }\n\n    /**\n     * Calculate the initial display mode based on current breakpoints.\n     * @private\n     * @returns {'expanded'|'rail'|'hidden'}\n     */\n    _getInitialMode() {\n        const mode = this.mode;\n        const isCompact = breakpoints.isCompact;\n        const isMedium = breakpoints.isMedium;\n\n        if (mode === 'permanent') {\n            return 'expanded';\n        } else if (mode === 'temporary') {\n            return 'hidden';\n        } else if (mode === 'rail') {\n            return isCompact ? 'hidden' : 'rail';\n        } else {\n            // Auto mode\n            if (isCompact) {\n                return 'hidden';\n            } else if (isMedium) {\n                return 'rail';\n            } else {\n                return 'expanded';\n            }\n        }\n    }\n\n    /** @private */\n    _forceUpdateMode() {\n        this._currentMode = this._getInitialMode();\n        this._applyMode();\n    }\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        if (this._unsubscribe) {\n            this._unsubscribe();\n            this._unsubscribe = null;\n        }\n        // Clean up ESC handler\n        this._unsubEsc?.();\n        this._unsubEsc = null;\n    }\n\n    /** @override */\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (!this.isConnected) return;\n\n        if (name === 'open') {\n            this._updateOpenState();\n        } else if (name === 'mode') {\n            this._updateMode();\n        }\n    }\n\n    /** @private */\n    _setupBreakpointListener() {\n        // Subscribe to centralized breakpoint changes\n        this._unsubscribe = breakpoints.subscribe(() => {\n            this._updateMode();\n        });\n    }\n\n    /** @private */\n    _updateMode() {\n        const mode = this.mode;\n        const isCompact = breakpoints.isCompact;\n        const isMedium = breakpoints.isMedium;\n\n        let newMode;\n\n        if (mode === 'permanent') {\n            newMode = 'expanded';\n        } else if (mode === 'temporary') {\n            newMode = 'hidden';\n        } else if (mode === 'rail') {\n            newMode = isCompact ? 'hidden' : 'rail';\n        } else {\n            // Auto mode\n            if (isCompact) {\n                newMode = 'hidden';\n            } else if (isMedium) {\n                newMode = 'rail';\n            } else {\n                newMode = 'expanded';\n            }\n        }\n\n        if (newMode !== this._currentMode) {\n            this._currentMode = newMode;\n            this._applyMode();\n        }\n    }\n\n    /** @private */\n    _applyMode() {\n        const drawer = this.querySelector('.au-drawer-nav');\n        if (!drawer) return;\n\n        drawer.classList.remove('au-drawer-mode-expanded', 'au-drawer-mode-rail', 'au-drawer-mode-hidden');\n        drawer.classList.add(`au-drawer-mode-${this._currentMode}`);\n\n        // Update child items for rail mode\n        const items = this.querySelectorAll('au-drawer-item');\n        items.forEach(item => {\n            if (this._currentMode === 'rail' && !this._isHovering) {\n                item.setAttribute('hide-label', '');\n            } else {\n                item.removeAttribute('hide-label');\n            }\n        });\n\n        // When switching to expanded/rail mode, auto-close drawer and hide scrim\n        if (this._currentMode !== 'hidden') {\n            this.open = false;\n            this._hideScrim();\n            // Clean up ESC handler\n            this._unsubEsc?.();\n            this._unsubEsc = null;\n        } else if (!this.open) {\n            // Hidden mode but drawer is closed - ensure scrim is hidden\n            this._hideScrim();\n        }\n    }\n\n    /** @private */\n    _setupListeners() {\n        // Scrim click to close\n        const scrim = this.querySelector('.au-drawer-scrim');\n        if (scrim) {\n            this.listen(scrim, 'click', () => {\n                this.open = false;\n            });\n        }\n\n        // Expand on hover for rail mode\n        const drawer = this.querySelector('.au-drawer-nav');\n        if (drawer && this.expandOnHover) {\n            this.listen(drawer, 'mouseenter', () => {\n                if (this._currentMode === 'rail') {\n                    this._isHovering = true;\n                    drawer.classList.add('au-drawer-expanded-hover');\n                    this._applyMode();\n                }\n            });\n\n            this.listen(drawer, 'mouseleave', () => {\n                if (this._currentMode === 'rail') {\n                    this._isHovering = false;\n                    drawer.classList.remove('au-drawer-expanded-hover');\n                    this._applyMode();\n                }\n            });\n        }\n\n        // Listen for nav item selection\n        this.listen(this, 'au-nav-select', (e) => {\n            // On mobile, close drawer after selection\n            if (this._currentMode === 'hidden' && this.open) {\n                this.open = false;\n            }\n            // Update active states\n            this._updateActiveItem(e.detail.item);\n        });\n\n        // Initialize ESC handler tracker\n        this._unsubEsc = null;\n    }\n\n    /** @private */\n    _updateActiveItem(selectedItem) {\n        const items = this.querySelectorAll('au-drawer-item');\n        items.forEach(item => {\n            item.active = (item === selectedItem);\n        });\n    }\n\n    /** @private */\n    _updateOpenState() {\n        const drawer = this.querySelector('.au-drawer-nav');\n\n        if (this.open) {\n            drawer?.classList.add('au-drawer-open');\n            if (this._currentMode === 'hidden') {\n                this._showScrim();\n                // Register ESC handler when opening in hidden (modal) mode\n                this._unsubEsc = keyboard.pushEscapeHandler(this, () => {\n                    this.open = false;\n                });\n            }\n        } else {\n            drawer?.classList.remove('au-drawer-open');\n            this._hideScrim();\n            // Unregister ESC handler when closing\n            this._unsubEsc?.();\n            this._unsubEsc = null;\n        }\n    }\n\n    /** @private */\n    _showScrim() {\n        const scrim = this.querySelector('.au-drawer-scrim');\n        if (scrim) {\n            scrim.classList.add('au-drawer-scrim-visible');\n        }\n    }\n\n    /** @private */\n    _hideScrim() {\n        const scrim = this.querySelector('.au-drawer-scrim');\n        if (scrim) {\n            scrim.classList.remove('au-drawer-scrim-visible');\n        }\n    }\n\n    /** Toggle the drawer open/closed. */\n    toggle() {\n        this.open = !this.open;\n    }\n\n    /** @override */\n    render() {\n        // Build DOM structure\n        this.innerHTML = '';\n\n        // Scrim (for modal mode)\n        const scrim = document.createElement('div');\n        scrim.className = 'au-drawer-scrim';\n        this.appendChild(scrim);\n\n        // Nav drawer\n        const nav = document.createElement('nav');\n        nav.className = `au-drawer-nav au-drawer-mode-${this._getInitialMode()}`;\n        nav.setAttribute('role', 'navigation');\n\n        // Header\n        const header = document.createElement('div');\n        header.className = 'au-drawer-header';\n        if (this._slots.header) {\n            header.appendChild(this._slots.header);\n        }\n        nav.appendChild(header);\n\n        // Content (default slot)\n        const content = document.createElement('div');\n        content.className = 'au-drawer-content';\n        content.setAttribute('role', 'menu'); // ARIA: menuitem children require menu parent\n        if (this._slots.default) {\n            this._slots.default.forEach(child => content.appendChild(child));\n        }\n        nav.appendChild(content);\n\n        // Footer\n        if (this._slots.footer) {\n            nav.appendChild(this._slots.footer);\n        }\n\n        this.appendChild(nav);\n    }\n}\n\ndefine('au-drawer', AuDrawer);\n",
    "/**\n * @fileoverview au-icon - Material Symbols Icon Component\n * \n * Supports both:\n * 1. Material Symbols font (2500+ icons) - primary\n * 2. Inline SVG fallback for critical icons\n * \n * Usage: \n *   <au-icon name=\"check\"></au-icon>           <!-- Material Symbol -->\n *   <au-icon name=\"check\" svg></au-icon>       <!-- Force SVG -->\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\n\n/** @private Inline SVG paths for critical icons (fallback when font not loaded) */\nconst SVG_ICONS = {\n    // Actions\n    check: 'M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z',\n    close: 'M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z',\n    add: 'M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z',\n    remove: 'M19 13H5v-2h14z',\n    edit: 'M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75z',\n    delete: 'M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z',\n    search: 'M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z',\n\n    // Navigation\n    menu: 'M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z',\n    chevron_right: 'M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z',\n    chevron_left: 'M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z',\n    expand_more: 'M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z',\n    expand_less: 'M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z',\n    home: 'M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z',\n    arrow_back: 'M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z',\n    arrow_forward: 'M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z',\n\n    // Status\n    info: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2zm0-8h-2V7h2z',\n    warning: 'M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z',\n    error: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2zm0-4h-2V7h2z',\n    check_circle: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z',\n    cancel: 'M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z',\n\n    // UI\n    settings: 'M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z',\n    person: 'M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z',\n    light_mode: 'M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z',\n    dark_mode: 'M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z',\n    visibility: 'M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3',\n    visibility_off: 'M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z',\n\n    // Drawer/Navigation icons\n    download: 'M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z',\n    smart_button: 'M22 9v6c0 1.1-.9 2-2 2h-1v-2h1V9H4v6h6v2H4c-1.1 0-2-.9-2-2V9c0-1.1.9-2 2-2h16c1.1 0 2 .9 2 2zm-7.5 11 1.09-2.41L18 16.5l-2.41-1.09L14.5 13l-1.09 2.41L11 16.5l2.41 1.09L14.5 20zm2.5-5 .62-1.38L19 14l-1.38-.62L17 12l-.62 1.38L15 14l1.38.62L17 16zm-2.5 5 1.09-2.41L18 16.5l-2.41-1.09L14.5 13l-1.09 2.41L11 16.5l2.41 1.09L14.5 20z',\n    text_fields: 'M2.5 4v3h5v12h3V7h5V4h-13zm19 5h-9v3h3v7h3v-7h3V9z',\n    check_box: 'M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z',\n    toggle_on: 'M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z',\n    radio_button_checked: 'M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z',\n    arrow_drop_down_circle: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 12-4-4h8l-4 4z',\n    view_carousel: 'M7 19h10V4H7v15zm-5-2h4V6H2v11zM18 6v11h4V6h-4z',\n    grid_view: 'M3 3v8h8V3H3zm6 6H5V5h4v4zm-6 4v8h8v-8H3zm6 6H5v-4h4v4zm4-16v8h8V3h-8zm6 6h-4V5h4v4zm-6 4v8h8v-8h-8zm6 6h-4v-4h4v4z',\n    tab: 'M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h10v4h8v10z',\n    notifications: 'M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z',\n    open_in_new: 'M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z',\n    hourglass_empty: 'M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5-4-4V4h8v3.5l-4 4z',\n    account_circle: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88C7.55 15.8 9.68 15 12 15s4.45.8 6.14 2.12C16.43 19.18 14.03 20 12 20z',\n    fiber_manual_record: 'M12 12m-8 0a8 8 0 1 0 16 0 8 8 0 1 0-16 0',\n    label: 'M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 1.99 2 1.99L16 19c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z',\n    emoji_emotions: 'M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z',\n    business: 'M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z',\n    input: 'M21 3.01H3c-1.1 0-2 .9-2 2V9h2V4.99h18v14.03H3V15H1v4.01c0 1.1.9 1.98 2 1.98h18c1.1 0 2-.88 2-1.98v-14c0-1.11-.9-2-2-2zM11 16l4-4-4-4v3H1v2h10v3z',\n    category: 'M12 2l-5.5 9h11L12 2zm0 3.84L13.93 9h-3.87L12 5.84zM17.5 13c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 7c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM3 21.5h8v-8H3v8zm2-6h4v4H5v-4z',\n    widgets: 'M13 13v8h8v-8h-8zM3 21h8v-8H3v8zM3 3v8h8V3H3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65z',\n    smart_toy: 'M20 9V7c0-1.1-.9-2-2-2h-3c0-1.66-1.34-3-3-3S9 3.34 9 5H6c-1.1 0-2 .9-2 2v2c-1.66 0-3 1.34-3 3s1.34 3 3 3v4c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-4c1.66 0 3-1.34 3-3s-1.34-3-3-3zM7.5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S9.83 13 9 13s-1.5-.67-1.5-1.5zM16 17H8v-2h8v2zm-1-4c-.83 0-1.5-.67-1.5-1.5S14.17 10 15 10s1.5.67 1.5 1.5S15.83 13 15 13z',\n    notification_important: 'M18 16v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-6 6c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm1-15.06c1.77.52 3 2.14 3 4.06v5.5l1 1v.5H7v-.5l1-1V11c0-1.92 1.23-3.54 3-4.06V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v.94zM13 11h-2v6h2v-6zm0-4h-2v2h2V7z',\n\n    // Enterprise icons\n    folder_managed: 'M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-2.06 11L15 15.28 12.06 17l.78-3.33-2.59-2.24 3.41-.29L15 8l1.34 3.14 3.41.29-2.59 2.24.78 3.33z',\n    shield: 'M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z',\n    apps: 'M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z',\n    monitoring: 'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 12h2v5H7v-5zm4-3h2v8h-2V9zm4-3h2v11h-2V6z'\n};\n\n// P2.4 perf fix: Only actual aliases (was 45 identity entries + 6 aliases = wasted memory)\n// Identity mappings (check → check, close → close, etc.) are useless — removed.\nconst ICON_ALIASES = {\n    success: 'check_circle',\n    sun: 'light_mode',\n    moon: 'dark_mode',\n    user: 'person',\n    plus: 'add',\n    minus: 'remove'\n};\n\n// Exhaustive list of known icon names (for validation only)\nconst KNOWN_ICONS = new Set([\n    'check', 'close', 'add', 'remove', 'edit', 'delete', 'search', 'menu',\n    'chevron_right', 'chevron_left', 'expand_more', 'expand_less', 'home',\n    'arrow_back', 'arrow_forward', 'info', 'warning', 'error', 'check_circle',\n    'cancel', 'settings', 'person', 'light_mode', 'dark_mode', 'visibility',\n    'visibility_off', 'download', 'smart_button', 'text_fields', 'check_box',\n    'toggle_on', 'radio_button_checked', 'arrow_drop_down_circle', 'view_carousel',\n    'grid_view', 'tab', 'notifications', 'open_in_new', 'hourglass_empty',\n    'account_circle', 'fiber_manual_record', 'label', 'emoji_emotions',\n    'business', 'input', 'category', 'widgets', 'smart_toy',\n    'notification_important', 'folder_managed', 'shield', 'apps', 'monitoring',\n    // All aliases resolve too\n    ...Object.keys(ICON_ALIASES)\n]);\n\n// Named size → pixel mapping\nconst SIZE_MAP = { xs: 16, sm: 20, md: 24, lg: 32, xl: 40 };\n\n/**\n * Material Symbols icon component with font and SVG fallback.\n *\n * @class\n * @extends AuElement\n * @element au-icon\n */\nexport class AuIcon extends AuElement {\n    static baseClass = 'au-icon';\n    static cssFile = 'icon';\n    /** @type {string[]} */\n    static observedAttributes = ['name', 'size', 'svg', 'filled', 'font'];\n\n\n    /** @override */\n    render() {\n        const name = this.attr('name', 'info');\n        const sizeAttr = this.attr('size', '24');\n        const size = SIZE_MAP[sizeAttr] || parseInt(sizeAttr, 10) || 24;\n        const forceFont = this.has('font'); // New: force font instead of SVG\n        const filled = this.has('filled');\n\n        // Accessibility: set role and aria-hidden (decorative by default)\n        this.setAttribute('role', 'img');\n        this.setAttribute('aria-hidden', 'true');\n\n        // Resolve aliases (P2.4: was a no-op — SYMBOL_NAMES[name] ? name : name  always returned name)\n        const resolvedName = ICON_ALIASES[name] || name;\n        const svgPath = SVG_ICONS[resolvedName] || SVG_ICONS[name];\n\n        // SVG first (default) - eliminates 254KB font dependency for common icons\n        // Only fall back to font if: 1) force font attr, or 2) no SVG exists\n        if (!forceFont && svgPath) {\n            this.innerHTML = `\n                <svg width=\"${size}\" height=\"${size}\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\">\n                    <path d=\"${svgPath}\"></path>\n                </svg>\n            `;\n            return;\n        }\n\n        // Fall back to Material Symbols font (for rare icons not in SVG set)\n        const symbolName = ICON_ALIASES[name] || name;\n\n        // Log warning for unknown icon names (AI agent readiness)\n        if (!KNOWN_ICONS.has(name) && !SVG_ICONS[name]) {\n            this.logError('UNKNOWN_ICON', `Icon name \"${name}\" not found in predefined icons. Using font fallback.`);\n        }\n\n        // Auto-inject Google Fonts when a non-bundled icon is used (AI-First: zero-config)\n        if (!AuIcon._fontInjected) {\n            AuIcon._fontInjected = true;\n            const fontUrl = 'https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined';\n            if (!document.querySelector(`link[href=\"${fontUrl}\"]`)) {\n                const link = document.createElement('link');\n                link.rel = 'stylesheet';\n                link.href = fontUrl;\n                document.head.appendChild(link);\n            }\n        }\n\n        this.innerHTML = html`<span class=\"material-symbols-outlined\" aria-hidden=\"true\">${symbolName}</span>`;\n\n        // Apply size and fill\n        const span = this.querySelector('span');\n        if (span) {\n            span.style.fontSize = `${size}px`;\n            if (filled) {\n                span.style.fontVariationSettings = \"'FILL' 1\";\n            }\n        }\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.render();\n    }\n}\n\n// Export icon names for reference\nexport const IconNames = [...KNOWN_ICONS];\nexport const SvgIconNames = Object.keys(SVG_ICONS);\n\ndefine('au-icon', AuIcon);\n",
    "/**\n * au-drawer-item.js - Material Design 3 Drawer/Nav Item Component\n * \n * Navigation item for drawer (horizontal layout) and bottom navigation (vertical).\n * Follows MD3 Navigation Drawer/Rail/Bar item specifications.\n * \n * LIGHT DOM: This component uses Light DOM for styling consistency.\n * Uses 'label' attribute or text content for the label.\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\nimport { attachRipple } from '../core/ripple.js';\n// Import AuIcon to ensure it's registered\nimport './au-icon.js';\n\n/**\n * MD3 Navigation Drawer / Bottom Nav item component.\n *\n * @class\n * @extends AuElement\n * @element au-drawer-item\n * @fires au-nav-select - When item is clicked, detail: `{ href, item }`\n */\nexport class AuDrawerItem extends AuElement {\n    /** @type {string[]} */\n    static get observedAttributes() {\n        return ['icon', 'href', 'active', 'badge', 'disabled', 'layout', 'label'];\n    }\n\n    static baseClass = 'au-drawer-item';\n    static cssFile = 'drawer-item';\n\n\n    constructor() {\n        super();\n        // Immediately capture text content from child nodes SYNCHRONOUSLY\n        // This runs before connectedCallback and before any render\n        // Must be synchronous because microtask/setTimeout is too late\n        this._capturedLabel = '';\n\n        // Synchronously capture direct text nodes before any DOM manipulation\n        const textContent = Array.from(this.childNodes)\n            .filter(n => n.nodeType === Node.TEXT_NODE)\n            .map(n => n.textContent.trim())\n            .join('')\n            .trim();\n\n        if (textContent) {\n            this._capturedLabel = textContent;\n        }\n    }\n\n    get icon() { return this.getAttribute('icon') || ''; }\n    set icon(v) { this.setAttribute('icon', v); }\n\n    get href() { return this.getAttribute('href') || ''; }\n    set href(v) { this.setAttribute('href', v); }\n\n    get active() { return this.hasAttribute('active'); }\n    set active(v) { this.toggleAttribute('active', Boolean(v)); }\n\n    get badge() { return this.getAttribute('badge'); }\n    set badge(v) { v ? this.setAttribute('badge', v) : this.removeAttribute('badge'); }\n\n    get disabled() { return this.hasAttribute('disabled'); }\n    set disabled(v) { this.toggleAttribute('disabled', Boolean(v)); }\n\n    // Layout: 'horizontal' (default for drawer) or 'vertical' (for bottom-nav)\n    get layout() { return this.getAttribute('layout') || 'horizontal'; }\n    set layout(v) { this.setAttribute('layout', v); }\n\n    // Label getter - uses attribute or captured text\n    get label() { return this.getAttribute('label') || this._capturedLabel || ''; }\n    set label(v) { this.setAttribute('label', v); }\n\n    /** @override */\n    connectedCallback() {\n        // If label attribute already exists, capture it\n        if (!this._capturedLabel && this.hasAttribute('label')) {\n            this._capturedLabel = this.getAttribute('label');\n        }\n        // Final attempt to capture text if still empty\n        if (!this._capturedLabel && !this.hasAttribute('label')) {\n            this._capturedLabel = this.textContent.trim();\n            if (this._capturedLabel) {\n                this.setAttribute('label', this._capturedLabel);\n            }\n        }\n        super.connectedCallback();\n        this._setupListeners();\n        this._setupRipple();\n\n        // Keyboard accessibility\n        this.setAttribute('tabindex', '0');\n        this.setAttribute('role', 'menuitem');\n        this.setupActivation(() => this._handleClick(new MouseEvent('click')));\n    }\n\n    /** @override */\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (oldValue !== newValue && this.isConnected) {\n            this.render();\n        }\n    }\n\n    /** @private */\n    _setupListeners() {\n        this.listen(this, 'click', this._handleClick.bind(this));\n    }\n\n    /** @private */\n    _setupRipple() {\n        if (this.disabled) return;\n        const link = this.querySelector('.au-drawer-item-link');\n        if (link) {\n            this._rippleCleanup = attachRipple(link);\n        }\n    }\n\n    /** @private */\n    _handleClick(e) {\n        if (this.disabled) {\n            e.preventDefault();\n            return;\n        }\n\n        if (this.href) {\n            // Hash navigation\n            if (this.href.startsWith('#')) {\n                e.preventDefault();\n                window.location.hash = this.href;\n            }\n            // Let regular links work normally\n        }\n\n        // Dispatch selection event for parent drawer/nav to handle\n        this.emit('au-nav-select', { href: this.href, item: this }, { bubbles: true, composed: true });\n    }\n\n    /** @override */\n    render() {\n        // Use label prop (getter handles fallback logic)\n        const labelText = this.label;\n        const hasLabel = labelText.length > 0;\n        const badgeHtml = this.badge ? html`<span class=\"au-drawer-item-badge\">${this.badge}</span>` : '';\n        const tag = this.href ? 'a' : 'button';\n        const hrefAttr = this.href ? `href=\"${this.href}\"` : '';\n        const disabledAttr = this.disabled ? (this.href ? 'aria-disabled=\"true\"' : 'disabled') : '';\n        // A11Y: Always add aria-label for screen readers - ensures link/button is identifiable\n        // even when label is visually separate or hidden in collapsed drawer\n        const ariaLabel = labelText ? `aria-label=\"${labelText}\"` : '';\n\n        this.innerHTML = html`\n            ${safe(`<${tag} class=\"au-drawer-item-link\" ${hrefAttr} ${disabledAttr} ${ariaLabel}>`)}\n                <span class=\"au-drawer-item-icon\">\n                    <au-icon name=\"${this.icon}\" size=\"24\"></au-icon>\n                </span>\n                ${hasLabel ? html`<span class=\"au-drawer-item-label\" aria-hidden=\"true\">${labelText}</span>` : ''}\n                ${badgeHtml}\n            ${safe(`</${tag}>`)}\n        `;\n    }\n}\n\n// Also export as au-nav-item alias for bottom navigation\nexport { AuDrawerItem as AuNavItem };\n\ndefine('au-drawer-item', AuDrawerItem);\n\n// Register alias - au-nav-item defaults to vertical layout\ndefine('au-nav-item', class extends AuDrawerItem {\n    connectedCallback() {\n        // Set vertical layout by default for bottom-nav items\n        if (!this.hasAttribute('layout')) {\n            this.setAttribute('layout', 'vertical');\n        }\n        super.connectedCallback();\n    }\n});\n",
    "/**\n * au-bottom-nav.js - Material Design 3 Bottom Navigation Bar\n * \n * Fixed bottom navigation for mobile devices.\n * Follows MD3 Navigation Bar specifications (3-5 destinations).\n * \n * LIGHT DOM: Uses Light DOM for styling consistency.\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { breakpoints } from '../core/breakpoints.js';\n\n/**\n * MD3 Bottom Navigation Bar for mobile viewports.\n *\n * @class\n * @extends AuElement\n * @element au-bottom-nav\n * @fires au-change - When active destination changes, detail: `{ value, item }`\n */\nexport class AuBottomNav extends AuElement {\n    /** @type {string[]} */\n    static get observedAttributes() {\n        return ['hide-on-desktop', 'value'];\n    }\n\n    static baseClass = 'au-bottom-nav';\n    static cssFile = 'bottom-nav';\n    // Disable containment - bottom-nav is position:fixed\n    static useContainment = false;\n\n\n    constructor() {\n        super();\n        this._unsubscribe = null;\n    }\n\n    get hideOnDesktop() { return this.hasAttribute('hide-on-desktop'); }\n    set hideOnDesktop(v) { this.toggleAttribute('hide-on-desktop', Boolean(v)); }\n\n    get value() { return this.getAttribute('value') || ''; }\n    set value(v) { this.setAttribute('value', v); }\n\n    /** @override */\n    connectedCallback() {\n        // Preserve children before render\n        if (!this._childrenCaptured) {\n            this._userChildren = Array.from(this.children);\n            this._childrenCaptured = true;\n        }\n        super.connectedCallback();\n        this._setupBreakpointListener();\n        this._setupListeners();\n        this._updateVisibility();\n    }\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        if (this._unsubscribe) {\n            this._unsubscribe();\n            this._unsubscribe = null;\n        }\n    }\n\n    /** @override */\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (!this.isConnected) return;\n\n        if (name === 'hide-on-desktop') {\n            this._updateVisibility();\n        }\n    }\n\n    /** @private */\n    _setupBreakpointListener() {\n        if (this.hideOnDesktop) {\n            // Subscribe to centralized breakpoint changes\n            this._unsubscribe = breakpoints.subscribe(() => {\n                this._updateVisibility();\n            });\n        }\n    }\n\n    /** @private */\n    _updateVisibility() {\n        // Hide on medium+ screens (tablets and desktop) using centralized breakpoints\n        if (this.hideOnDesktop && breakpoints.isNotCompact) {\n            this.style.display = 'none';\n        } else {\n            this.style.display = '';\n        }\n    }\n\n    /** @private */\n    _setupListeners() {\n        // Listen for nav item selection\n        this.listen(this, 'au-nav-select', (e) => {\n            this._updateActiveItem(e.detail.item);\n            this.value = e.detail.href || '';\n\n            this.emit('au-change', { value: this.value, item: e.detail.item }, { bubbles: true });\n        });\n    }\n\n    /** @private */\n    _updateActiveItem(selectedItem) {\n        const items = this.querySelectorAll('au-nav-item, au-drawer-item');\n        items.forEach(item => {\n            item.active = (item === selectedItem);\n        });\n    }\n\n    /** @override */\n    render() {\n        // Create nav wrapper and append preserved children\n        const nav = document.createElement('nav');\n        nav.className = 'au-bottom-nav-nav';\n        nav.setAttribute('role', 'menu'); // ARIA: menuitem children require menu parent\n        nav.setAttribute('aria-label', 'Bottom navigation');\n\n        // Clear and rebuild\n        this.innerHTML = '';\n        this.appendChild(nav);\n\n        // Re-append user children\n        if (this._userChildren) {\n            this._userChildren.forEach(child => nav.appendChild(child));\n        }\n    }\n}\n\ndefine('au-bottom-nav', AuBottomNav);\n",
    "/**\n * @fileoverview au-button - MD3 Button Component\n * \n * Usage: <au-button variant=\"primary\" size=\"md\">Label</au-button>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { createRipple } from '../core/ripple.js';\nimport { html } from '../core/utils.js';\n\n/**\n * MD3 Button component with ripple effect and variant support.\n *\n * @class\n * @extends AuElement\n * @element au-button\n * @fires click\n * @slot default - Button label text or icon content\n *\n * @example\n * <au-button variant=\"filled\">Save</au-button>\n * <au-button variant=\"outlined\" size=\"sm\">Cancel</au-button>\n */\nexport class AuButton extends AuElement {\n    static baseClass = 'au-button';\n    static cssFile = 'button';\n    /** @type {string[]} Observed HTML attributes */\n    static observedAttributes = ['variant', 'size', 'disabled'];\n\n    /**\n     * Self-documenting component for AI agents\n     */\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.setAttribute('role', 'button');\n        this.setupActivation(() => this.click());\n\n        // MD3 Ripple effect on press\n        this.listen(this, 'pointerdown', (e) => {\n            if (!this.isDisabled) {\n                createRipple(this, e);\n            }\n        });\n    }\n\n    /** @override */\n    render() {\n        // Only wrap text on first render to preserve custom children (icons, etc.)\n        if (!this._initialRenderDone) {\n            // Check if there are element children (like au-icon) - don't touch if so\n            const hasElementChildren = Array.from(this.children).some(\n                child => child.nodeType === 1 // Element node\n            );\n\n            if (!hasElementChildren) {\n                // Only text content - wrap it in a label span\n                const label = this.textContent.trim();\n                if (label) {\n                    this.innerHTML = html`<span class=\"au-button__label\">${label}</span>`;\n                }\n            }\n            // If hasElementChildren, leave DOM untouched (icon-only or icon+text buttons)\n\n            this._initialRenderDone = true;\n        }\n        this.#updateClasses();\n    }\n\n    /**\n     * @override\n     * @param {string} attr - Changed attribute name\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        if (attr === 'disabled') {\n            this.updateTabindex();\n        }\n        this.#updateClasses();\n    }\n\n    /** @private */\n    #updateClasses() {\n        const variant = this.attr('variant', 'primary');\n        const size = this.attr('size', 'md');\n\n        // AGENT VALIDATION: Check variant\n        const validVariants = ['filled', 'elevated', 'tonal', 'outlined', 'text', 'danger', 'primary', 'secondary', 'ghost'];\n        if (!validVariants.includes(variant)) {\n            this.logError('INVALID_VARIANT', `Invalid button variant '${variant}'. Valid: ${validVariants.join(', ')}`);\n        }\n\n        // Preserve custom classes while updating component classes\n        const baseClasses = ['au-button', `au-button--${variant}`, `au-button--${size}`];\n\n        // Add base classes without removing custom ones\n        baseClasses.forEach(cls => this.classList.add(cls));\n\n        // Remove old variant/size classes that are no longer active\n        Array.from(this.classList).forEach(cls => {\n            if (cls.startsWith('au-button--') && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n\n        if (this.has('disabled')) {\n            this.classList.add('is-disabled');\n        } else {\n            this.classList.remove('is-disabled');\n        }\n    }\n}\n\ndefine('au-button', AuButton);\n",
    "/**\n * @fileoverview au-input - MD3 Text Field Component\n * \n * Usage: <au-input type=\"text\" placeholder=\"Enter text\" variant=\"filled\"></au-input>\n * \n * Features:\n * - Native focus handling via CSS :focus-within\n * - Animated underline indicator\n * - Supports all input types\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe, escapeHTML } from '../core/utils.js';\n\n/** @private Input types that always show a native browser placeholder (dd/mm/yyyy, --:--:-- etc.) */\nconst ALWAYS_FLOAT_TYPES = ['date', 'time', 'datetime-local', 'month', 'week'];\n\n/**\n * MD3 Text Field component with floating label and validation support.\n *\n * @class\n * @extends AuElement\n * @element au-input\n * @fires au-input - On each keystroke, detail: `{ value }`\n * @fires au-change - On value commit\n * @fires au-focus - When the input receives focus\n * @fires au-blur - When the input loses focus\n */\nexport class AuInput extends AuElement {\n    static baseClass = 'au-input';\n    static cssFile = 'input';\n    /** @type {string[]} Observed HTML attributes */\n    static observedAttributes = ['type', 'placeholder', 'value', 'disabled', 'variant', 'size', 'label'];\n\n    /**\n     * Self-documenting component for AI agents\n     */\n\n    /** @type {HTMLInputElement|null} */\n    #input = null;\n\n    /** @override */\n    render() {\n        // Idempotent: if already rendered, just update references and listeners\n        if (this.querySelector('.au-input__field')) {\n            this.#input = this.querySelector('input');\n            this.#updateClasses();\n            this.#updateValueState();\n            this.#setupListeners();  // Always re-attach listeners (AbortController clears on disconnect)\n            return;\n        }\n\n        const type = this.attr('type', 'text');\n        const placeholder = this.attr('placeholder', '');\n        const label = this.attr('label', '');\n        const value = this.attr('value', '');\n\n        // Use label for floating label, fallback to placeholder\n        const labelText = label || placeholder;\n\n        // Never show native placeholder when using floating label\n        // Only show if explicitly no label is provided AND no placeholder\n        const showNativePlaceholder = !labelText;\n\n        // AGENT VALIDATION: Input must have a label\n        if (!labelText && !this.getAttribute('aria-label')) {\n            this.logError('A11Y_MISSING_LABEL', 'Input must have a label or aria-label attribute.');\n        }\n\n        // Generate unique ID for label-input association (accessibility)\n        const inputId = this.id ? `${this.id}__field` : `au-input-${Math.random().toString(36).substring(2, 9)}`;\n\n\n        this.innerHTML = html`\n            ${labelText ? html`<label class=\"au-input__label\" for=\"${inputId}\">${labelText}</label>` : ''}\n            <input \n                class=\"au-input__field\"\n                id=\"${inputId}\"\n                type=\"${type}\"\n                ${showNativePlaceholder ? safe(`placeholder=\"${escapeHTML(placeholder)}\"`) : ''}\n                ${!labelText ? safe(`aria-label=\"${escapeHTML(placeholder || 'Text input')}\"`) : ''}\n                value=\"${value}\"\n                ${this.has('disabled') ? 'disabled' : ''}\n            />\n        `;\n\n        this.#input = this.querySelector('input');\n        this.#updateClasses();\n        this.#updateValueState();\n        this.#setupListeners();\n    }\n\n    /** @private */\n    #setupListeners() {\n        if (!this.#input) return;\n\n        // Forward events\n        this.listen(this.#input, 'input', (e) => {\n            this.#updateValueState();\n            this.emit('au-input', { value: e.target.value });\n        });\n\n        this.listen(this.#input, 'focus', () => {\n            this.emit('au-focus');\n        });\n\n        this.listen(this.#input, 'blur', () => {\n            this.#updateValueState();\n            this.emit('au-blur');\n        });\n    }\n\n    /** @private */\n    #updateValueState() {\n        const type = this.attr('type', 'text');\n        if (ALWAYS_FLOAT_TYPES.includes(type) || this.#input?.value) {\n            this.classList.add('has-value');\n        } else {\n            this.classList.remove('has-value');\n        }\n    }\n\n    /**\n     * @override\n     * @param {string} attr - Changed attribute name\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        if (!this.#input) return;\n\n        switch (attr) {\n            case 'value':\n                this.#input.value = newValue ?? '';\n                this.#updateValueState();\n                break;\n            case 'placeholder':\n                this.#input.placeholder = newValue ?? '';\n                break;\n            case 'type':\n                this.#input.type = newValue ?? 'text';\n                this.#updateValueState();\n                break;\n            case 'disabled':\n                this.#input.disabled = this.has('disabled');\n                break;\n        }\n\n        this.#updateClasses();\n    }\n\n    /** @private */\n    #updateClasses() {\n        const variant = this.attr('variant', 'outlined');\n        const size = this.attr('size', 'md');\n\n        // Preserve custom classes while updating component classes\n        const baseClasses = ['au-input', `au-input--${variant}`, `au-input--${size}`];\n        baseClasses.forEach(cls => this.classList.add(cls));\n\n        // Remove old variant/size classes\n        Array.from(this.classList).forEach(cls => {\n            if (cls.startsWith('au-input--') && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n\n        if (this.has('disabled')) {\n            this.classList.add('is-disabled');\n        } else {\n            this.classList.remove('is-disabled');\n        }\n    }\n\n    /**\n     * Current input value.\n     * @type {string}\n     */\n    get value() {\n        return this.#input?.value ?? '';\n    }\n\n    /** @param {string} v */\n    set value(v) {\n        if (this.#input) {\n            this.#input.value = v;\n            this.#updateValueState();\n        }\n    }\n\n    /** Focus the internal input element. */\n    focus() {\n        this.#input?.focus();\n    }\n\n    /** Clear the input value. */\n    clear() {\n        this.value = '';\n    }\n}\n\ndefine('au-input', AuInput);\n",
    "/**\n * @fileoverview au-textarea - Multi-line Text Input Component\n * \n * Usage: <au-textarea placeholder=\"Enter description\" rows=\"4\"></au-textarea>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\n\n/**\n * Multi-line text input component with MD3 styling.\n *\n * @class\n * @extends AuElement\n * @element au-textarea\n * @fires au-input - On each keystroke, detail: `{ value }`\n * @fires au-change - On value commit, detail: `{ value }`\n */\nexport class AuTextarea extends AuElement {\n    static baseClass = 'au-textarea';\n    static cssFile = 'input';\n    /** @type {string[]} */\n    static observedAttributes = ['placeholder', 'rows', 'disabled', 'readonly', 'name'];\n\n    #textarea = null;\n\n    /** @override */\n    render() {\n        // Idempotent HTML structure creation\n        if (!this.querySelector('.au-textarea__field')) {\n            const placeholder = this.attr('placeholder', '');\n            const rows = this.attr('rows', '4');\n            const disabled = this.has('disabled') ? 'disabled' : '';\n            const readonly = this.has('readonly') ? 'readonly' : '';\n            const name = this.attr('name', '');\n\n            this.innerHTML = html`\n                <textarea \n                    class=\"au-textarea__field\"\n                    placeholder=\"${placeholder}\"\n                    aria-label=\"${placeholder || 'Text area'}\"\n                    rows=\"${rows}\"\n                    name=\"${name}\"\n                    ${disabled}\n                    ${readonly}\n                ></textarea>\n            `;\n\n            // Styles (only apply once when creating)\n            this.style.display = 'block';\n            this.style.position = 'relative';\n        }\n\n        // Always get reference (for both new and pre-rendered cases)\n        this.#textarea = this.querySelector('textarea');\n\n        // Apply styles to native textarea\n        this.#textarea.style.width = '100%';\n        this.#textarea.style.padding = '12px 16px';\n        this.#textarea.style.fontSize = 'var(--md-sys-typescale-body-large-size, 16px)';\n        this.#textarea.style.fontFamily = 'inherit';\n        this.#textarea.style.border = '1px solid var(--md-sys-color-outline)';\n        this.#textarea.style.borderRadius = 'var(--md-sys-shape-corner-small, 4px)';\n        this.#textarea.style.background = 'var(--md-sys-color-surface-container-highest, var(--md-sys-color-surface))';\n        this.#textarea.style.color = 'var(--md-sys-color-on-surface)';\n        this.#textarea.style.resize = 'vertical';\n        this.#textarea.style.transition = 'border-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard)';\n        this.#textarea.style.outline = 'none';\n        this.#textarea.style.boxSizing = 'border-box';\n\n        // Focus styles - use box-shadow to avoid layout shift (no border-width change)\n        this.listen(this.#textarea, 'focus', () => {\n            this.#textarea.style.borderColor = 'var(--md-sys-color-primary)';\n            this.#textarea.style.boxShadow = 'inset 0 0 0 1px var(--md-sys-color-primary)';\n        });\n\n        this.listen(this.#textarea, 'blur', () => {\n            this.#textarea.style.borderColor = 'var(--md-sys-color-outline)';\n            this.#textarea.style.boxShadow = 'none';\n        });\n\n        // Forward events (always attach - AbortController prevents duplicates)\n        this.listen(this.#textarea, 'input', (e) => {\n            this.emit('au-input', { value: e.target.value });\n        });\n\n        this.listen(this.#textarea, 'change', (e) => {\n            this.emit('au-change', { value: e.target.value });\n        });\n    }\n\n    /**\n     * Current textarea value.\n     * @type {string}\n     */\n    get value() {\n        return this.#textarea?.value || '';\n    }\n\n    /** @param {string} v */\n    set value(v) {\n        if (this.#textarea) {\n            this.#textarea.value = v;\n        }\n    }\n\n    /** Focus the internal textarea element. */\n    focus() {\n        this.#textarea?.focus();\n    }\n}\n\ndefine('au-textarea', AuTextarea);\n",
    "/**\n * @fileoverview au-form - Form Container with Validation\n * \n * Usage: \n * <au-form onsubmit=\"handleSubmit\">\n *   <au-input name=\"email\" required></au-input>\n *   <au-button type=\"submit\">Submit</au-button>\n * </au-form>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Form container with built-in validation and data collection.\n *\n * @class\n * @extends AuElement\n * @element au-form\n * @fires au-submit  - Valid submission, detail: `{ data, isValid }`\n * @fires au-invalid - Failed validation, detail: `{ data, errors }`\n * @fires au-reset   - Form reset\n * @slot default - Input controls and submit button\n */\nexport class AuForm extends AuElement {\n    static baseClass = 'au-form';\n    /** @type {string[]} */\n    static observedAttributes = ['action', 'method'];\n\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        this.listen(this, 'submit', (e) => {\n            e.preventDefault();\n            this.#handleSubmit();\n        });\n\n        // Handle enter key in inputs\n        this.listen(this, 'keydown', (e) => {\n            if (e.key === 'Enter' && e.target.matches('input')) {\n                e.preventDefault();\n                this.#handleSubmit();\n            }\n        });\n    }\n\n    /** @override */\n    render() {\n        // Form is a passthrough container\n        this.setAttribute('role', 'form');\n\n        // AGENT VALIDATION: Form should have interactive controls\n        // Double rAF ensures children are rendered before checking\n        if (this.hasAttribute('debug')) {\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    const hasControls = this.querySelector('au-input, au-button, au-select, au-textarea, input, button, select, textarea');\n                    if (!hasControls) {\n                        this.logError('EMPTY_FORM', 'Form appears to be empty. Add input controls.');\n                    }\n                });\n            });\n        }\n    }\n\n    /** @private */\n    #handleSubmit() {\n        const data = this.getFormData();\n        const isValid = this.validate();\n\n        if (isValid) {\n            this.emit('au-submit', { data, isValid });\n        } else {\n            this.emit('au-invalid', { data, errors: this.#getErrors() });\n        }\n    }\n\n    /**\n     * Collect all form control values.\n     * @returns {Object<string, string|boolean>} Values keyed by field name\n     */\n    getFormData() {\n        const data = {};\n\n        // Get all au-input values\n        this.querySelectorAll('au-input[name]').forEach(input => {\n            data[input.getAttribute('name')] = input.value;\n        });\n\n        // Get native input values\n        this.querySelectorAll('input[name], select[name], textarea[name]').forEach(input => {\n            if (input.type === 'checkbox') {\n                data[input.name] = input.checked;\n            } else {\n                data[input.name] = input.value;\n            }\n        });\n\n        return data;\n    }\n\n    /**\n     * Alias for {@link getFormData} — preferred for agent consumers.\n     * @returns {Object<string, string|boolean>}\n     */\n    getValues() {\n        return this.getFormData();\n    }\n\n    /**\n     * Validate all `[required]` fields.\n     * @returns {boolean} `true` when every required field has a value\n     */\n    validate() {\n        let isValid = true;\n\n        this.querySelectorAll('[required]').forEach(field => {\n            const value = field.value || field.getAttribute('value') || '';\n            if (!value.trim()) {\n                field.classList.add('is-invalid');\n                isValid = false;\n            } else {\n                field.classList.remove('is-invalid');\n            }\n        });\n\n        return isValid;\n    }\n\n    /** @private */\n    #getErrors() {\n        const errors = [];\n        this.querySelectorAll('.is-invalid').forEach(field => {\n            errors.push({\n                name: field.getAttribute('name'),\n                message: 'This field is required'\n            });\n        });\n        return errors;\n    }\n\n    /**\n     * Reset all controls to their initial (empty) state.\n     */\n    reset() {\n        this.querySelectorAll('au-input').forEach(input => {\n            input.value = '';\n        });\n        this.querySelectorAll('input, select, textarea').forEach(el => {\n            el.value = '';\n        });\n        this.querySelectorAll('.is-invalid').forEach(el => {\n            el.classList.remove('is-invalid');\n        });\n        this.emit('au-reset');\n    }\n}\n\ndefine('au-form', AuForm);\n",
    "/**\n * @fileoverview au-dropdown - MD3 Select Menu Component  Popover API)\n * Uses native Popover API for top-layer and light-dismiss.\n * \n * MD3 Reference: https://m3.material.io/components/menus\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\nimport { throttle } from '../core/render.js';\n\n/**\n * MD3 Select Menu component using the native Popover API.\n *\n * @class\n * @extends AuElement\n * @element au-dropdown\n * @fires au-select - When an option is selected, detail: `{ value, label }`\n */\nexport class AuDropdown extends AuElement {\n    static baseClass = 'au-dropdown';\n    static cssFile = 'input';\n    /** @type {string[]} */\n    static observedAttributes = ['placeholder', 'value', 'disabled'];\n\n    #menu = null;\n    #trigger = null;\n    #options = []; // Store options data\n    #isSelecting = false; // Guard to prevent attributeChangedCallback loop from select()\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        // P2.3 perf fix: throttle scroll/resize (was firing 60+ times/sec unthrottled)\n        this.listen(window, 'scroll', throttle(() => this.#updatePosition(), 16), { capture: true, passive: true });\n        this.listen(window, 'resize', throttle(() => this.#updatePosition(), 100), { passive: true });\n    }\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.#menu?.remove();\n    }\n\n    /** @override */\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (!this.isConnected || oldVal === newVal) return;\n\n        if (name === 'value' && newVal !== null && !this.#isSelecting) {\n            // Look up the option and update displayed label (no event emission)\n            const opt = this.#options.find(o => o.value === newVal);\n            if (opt) {\n                const valueEl = this.querySelector('.au-dropdown__value');\n                if (valueEl) valueEl.textContent = opt.label;\n                this.#menu?.querySelectorAll('.au-dropdown__option').forEach(o =>\n                    o.classList.toggle('is-active', o.getAttribute('data-value') === newVal)\n                );\n            }\n        }\n\n        if (name === 'disabled') {\n            const trigger = this.querySelector('.au-dropdown__trigger');\n            if (trigger) trigger.disabled = this.hasAttribute('disabled');\n        }\n    }\n\n    /** @override */\n    render() {\n        // Only build once - check both trigger AND menu exist\n        if (this.querySelector('.au-dropdown__trigger') && this.#menu) return;\n\n        // Use requestAnimationFrame to ensure children (au-option) are parsed\n        requestAnimationFrame(() => this.#buildDropdown());\n    }\n\n    /** @private */\n    #buildDropdown() {\n        // Trigger already built?\n        if (this.querySelector('.au-dropdown__trigger') && this.#menu) return;\n\n        const placeholder = this.getAttribute('placeholder') || 'Select';\n\n        // Save options as data BEFORE clearing\n        // Support BOTH au-option AND standard HTML option tags for AI-First compatibility\n        const muOptions = this.querySelectorAll('au-option');\n        const htmlOptions = this.querySelectorAll('option');\n        const allOptions = muOptions.length > 0 ? muOptions : htmlOptions;\n\n        this.#options = Array.from(allOptions).map(opt => ({\n            value: opt.getAttribute('value') || opt.textContent.trim(),\n            label: opt.textContent.trim(),\n            selected: opt.hasAttribute('selected')\n        }));\n\n        // Create trigger button\n        this.#trigger = document.createElement('button');\n        this.#trigger.className = 'au-dropdown__trigger';\n        this.#trigger.type = 'button';\n\n        // Generate unique ID for popover targeting\n        const menuId = `au-dropdown-menu-${Math.random().toString(36).slice(2, 9)}`;\n\n        // Accessibility attributes\n        this.#trigger.setAttribute('aria-haspopup', 'listbox');\n        this.#trigger.setAttribute('aria-expanded', 'false');\n        this.#trigger.setAttribute('aria-label', placeholder);\n        this.#trigger.setAttribute('popovertarget', menuId); // Native popover trigger\n        this.#trigger.innerHTML = html`\n            <span class=\"au-dropdown__value\">${placeholder}</span>\n            <svg class=\"au-dropdown__arrow\" width=\"10\" height=\"6\" viewBox=\"0 0 10 6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\">\n                <path d=\"M1 1l4 4 4-4\"/>\n            </svg>\n        `;\n\n        // Keyboard navigation on trigger\n        this.listen(this.#trigger, 'keydown', (e) => {\n            if (!this.hasAttribute('disabled')) {\n                if (e.key === 'ArrowDown' || e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    this.open();\n                }\n            }\n        });\n\n        // Clear and add trigger\n        this.innerHTML = '';\n        this.appendChild(this.#trigger);\n\n        // Create menu with native Popover API\n        this.#menu = document.createElement('div');\n        this.#menu.id = menuId;\n        this.#menu.className = 'au-dropdown__menu';\n        this.#menu.setAttribute('popover', 'auto'); // Auto-dismiss on click outside!\n        this.#menu.setAttribute('role', 'listbox');\n        this.#menu.tabIndex = -1;\n\n        // Listen for popover toggle events (native API)\n        this.listen(this.#menu, 'toggle', (e) => {\n            if (e.newState === 'open') {\n                this.classList.add('is-open');\n                this.#trigger?.setAttribute('aria-expanded', 'true');\n                this.#updatePosition();\n                // Focus first option\n                requestAnimationFrame(() => {\n                    const val = this.getAttribute('value');\n                    const target = val\n                        ? this.#menu.querySelector(`[data-value=\"${val}\"]`)\n                        : this.#menu.firstChild;\n                    target?.focus();\n                });\n            } else {\n                this.classList.remove('is-open');\n                this.#trigger?.setAttribute('aria-expanded', 'false');\n            }\n        });\n\n        // Keyboard navigation in menu\n        this.listen(this.#menu, 'keydown', (e) => this.#handleMenuKey(e));\n\n        // Build options\n        this.#options.forEach(opt => {\n            const el = document.createElement('div');\n            el.className = 'au-dropdown__option';\n            el.setAttribute('data-value', opt.value);\n            el.textContent = opt.label;\n            el.setAttribute('role', 'option');\n            el.tabIndex = -1;\n            this.listen(el, 'click', () => this.select(opt.value, opt.label));\n            this.#menu.appendChild(el);\n        });\n\n        // Append menu to component (not portal - popover handles top-layer!)\n        this.appendChild(this.#menu);\n\n        // Apply initial selected value (from selected attribute on option)\n        const selectedOpt = this.#options.find(o => o.selected);\n        if (selectedOpt) {\n            this.select(selectedOpt.value, selectedOpt.label);\n        }\n    }\n\n    /** @private */\n    #handleMenuKey(e) {\n        const options = Array.from(this.#menu.querySelectorAll('.au-dropdown__option'));\n        const current = document.activeElement;\n        const idx = options.indexOf(current);\n\n        if (e.key === 'ArrowDown') {\n            e.preventDefault();\n            const next = options[idx + 1] || options[0];\n            next?.focus();\n        } else if (e.key === 'ArrowUp') {\n            e.preventDefault();\n            const prev = options[idx - 1] || options[options.length - 1];\n            prev?.focus();\n        } else if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            if (idx >= 0) {\n                const opt = this.#options[idx];\n                this.select(opt.value, opt.label);\n            }\n        } else if (e.key === 'Escape') {\n            e.preventDefault();\n            this.close();\n            this.#trigger?.focus();\n        }\n    }\n\n    /**\n     * Position menu relative to trigger (Anchor Positioning not yet baseline)\n     * Uses manual positioning until CSS Anchor Positioning is widely available.\n     */\n    #updatePosition() {\n        if (!this.#menu || !this.#trigger) return;\n\n        const triggerRect = this.#trigger.getBoundingClientRect();\n        const menuHeight = this.#menu.scrollHeight || 200;\n        const spaceBelow = window.innerHeight - triggerRect.bottom - 8;\n\n        // Decide if opening above or below\n        const openAbove = spaceBelow < menuHeight && triggerRect.top > menuHeight;\n        const top = openAbove\n            ? triggerRect.top - menuHeight - 4\n            : triggerRect.bottom + 4;\n\n        // Popover in top-layer requires position:fixed with calculated coordinates\n        Object.assign(this.#menu.style, {\n            position: 'fixed',\n            margin: '0',\n            top: `${top}px`,\n            left: `${triggerRect.left}px`,\n            width: `${triggerRect.width}px`,\n            minWidth: '160px',\n            maxHeight: '280px'\n        });\n    }\n\n    /** Toggle the dropdown open/closed. */\n    toggle() {\n        if (this.#menu?.matches(':popover-open')) {\n            this.close();\n        } else {\n            this.open();\n        }\n    }\n\n    /** Open the dropdown menu. */\n    open() {\n        if (this.hasAttribute('disabled') || !this.#menu) return;\n        this.#menu.showPopover(); // Native API!\n    }\n\n    /** Close the dropdown menu. */\n    close() {\n        if (this.#menu?.matches(':popover-open')) {\n            this.#menu.hidePopover(); // Native API!\n        }\n    }\n\n    /**\n     * Select an option by value.\n     * @param {string} value - Option value\n     * @param {string} label - Option display label\n     */\n    select(value, label) {\n        this.#isSelecting = true;\n        const valueEl = this.querySelector('.au-dropdown__value');\n        if (valueEl) valueEl.textContent = label;\n\n        this.setAttribute('value', value);\n        this.#menu?.querySelectorAll('.au-dropdown__option').forEach(o =>\n            o.classList.toggle('is-active', o.getAttribute('data-value') === value)\n        );\n\n        this.emit('au-select', { value, label });\n        this.close();\n        this.#isSelecting = false;\n    }\n\n    /**\n     * Current selected value.\n     * @type {string}\n     */\n    get value() { return this.getAttribute('value') || ''; }\n    /** @param {string} v */\n    set value(v) { this.setAttribute('value', v); }\n}\n\n/**\n * Option element for use inside `<au-dropdown>`.\n *\n * @class\n * @extends AuElement\n * @element au-option\n */\nexport class AuOption extends AuElement {\n    static baseClass = 'au-dropdown__option';\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.setAttribute('role', 'option');\n    }\n    /** @override */\n    render() { }\n}\n\ndefine('au-dropdown', AuDropdown);\ndefine('au-option', AuOption);\n",
    "/**\n * @fileoverview Shared Form Control Styles for AgentUI\n * \n * Eliminates inline style duplication across au-checkbox, au-radio, au-switch.\n * All three share the same base layout pattern and state layer configuration.\n */\n\n/**\n * Apply MD3 form control layout styles to the host element.\n * Shared by au-checkbox, au-radio (full set) and au-switch (partial).\n * \n * @param {HTMLElement} el - Host element\n * @param {boolean} disabled - Whether the control is disabled\n */\nexport function applyFormControlLayout(el, disabled) {\n    el.style.display = 'inline-flex';\n    el.style.alignItems = 'center';\n    el.style.gap = '12px';           // MD3: 12dp gap\n    el.style.cursor = disabled ? 'not-allowed' : 'pointer';\n    el.style.userSelect = 'none';\n    el.style.minHeight = '48px';     // MD3: 48dp touch target\n    el.style.padding = '0 4px';      // Touch-friendly padding\n}\n\n/**\n * Apply MD3 state layer styles (40dp circle for ripple confinement).\n * Used by au-checkbox and au-radio.\n * \n * @param {HTMLElement} el - State layer element\n */\nexport function applyStateLayerStyles(el) {\n    el.style.cssText = `\n        width: 40px; height: 40px;\n        border-radius: 50%;\n        display: flex; align-items: center; justify-content: center;\n        position: relative; overflow: hidden;\n        flex-shrink: 0;\n    `;\n}\n\n/**\n * Update cursor style for disabled/enabled state.\n * Shared by all form controls in their updateState methods.\n * \n * @param {HTMLElement} el - Host element\n * @param {boolean} disabled - Whether the control is disabled\n */\nexport function updateFormCursor(el, disabled) {\n    el.style.cursor = disabled ? 'not-allowed' : 'pointer';\n}\n",
    "/**\n * @fileoverview au-checkbox - Checkbox Component with MD3 Indeterminate Support\n * \n * Usage: \n *   <au-checkbox name=\"agree\" checked>I agree</au-checkbox>\n *   <au-checkbox indeterminate>Parent task</au-checkbox>\n * \n * States:\n *   - Unchecked: empty box\n *   - Checked: checkmark drawn with stroke animation\n *   - Indeterminate: horizontal line (set programmatically, cleared on user click)\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\nimport { createRipple } from '../core/ripple.js';\nimport { applyFormControlLayout, applyStateLayerStyles, updateFormCursor } from '../core/form-styles.js';\n\n/**\n * MD3 Checkbox component with indeterminate state support.\n *\n * @class\n * @extends AuElement\n * @element au-checkbox\n * @fires au-change - When checked state changes, detail: `{ checked, indeterminate, source }`\n */\nexport class AuCheckbox extends AuElement {\n    static baseClass = 'au-checkbox';\n    static cssFile = 'checkbox';\n    /** @type {string[]} */\n    static observedAttributes = ['checked', 'disabled', 'name', 'label', 'indeterminate'];\n\n    #input = null;\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Accessibility: set role and keyboard navigation\n        this.setAttribute('role', 'checkbox');\n        this.setupActivation(() => this.toggle());\n\n        // Guard: defer click activation to prevent re-render loops.\n        // When innerHTML replaces DOM, new elements are created while click events\n        // still propagate. This prevents processing clicks during initialization.\n        this._initializing = true;\n        queueMicrotask(() => { this._initializing = false; });\n\n        this.listen(this, 'pointerdown', (e) => {\n            if (!this.isDisabled) {\n                const stateLayer = this.querySelector('.au-checkbox__state-layer');\n                if (stateLayer) createRipple(stateLayer, e, { centered: true, eventTarget: this });\n            }\n        });\n        this.listen(this, 'click', () => {\n            if (!this.isDisabled && !this._initializing) {\n                this.toggle();\n            }\n        });\n    }\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered\n        if (this.querySelector('.au-checkbox__box')) {\n            this.#updateState();\n            return;\n        }\n\n        const label = this.attr('label', '') || this.textContent;\n        // SVG with both checkmark and indeterminate line paths\n        this.innerHTML = html`\n            <span class=\"au-checkbox__state-layer\">\n                <span class=\"au-checkbox__box\">\n                    <svg class=\"au-checkbox__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                        <path class=\"au-checkbox__check\" d=\"M4 12l6 6L20 6\"/>\n                        <line class=\"au-checkbox__indeterminate\" x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/>\n                    </svg>\n                </span>\n            </span>\n            <span class=\"au-checkbox__label\">${label}</span>\n        `;\n\n        applyFormControlLayout(this, this.has('disabled'));\n\n        this.#updateState();\n    }\n\n    /**\n     * @override\n     * @param {string} attr\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        this.#updateState();\n    }\n\n    /** @private */\n    #updateState() {\n        const stateLayer = this.querySelector('.au-checkbox__state-layer');\n        const box = this.querySelector('.au-checkbox__box');\n        const icon = this.querySelector('.au-checkbox__icon');\n        const checkPath = this.querySelector('.au-checkbox__check');\n        const indeterminateLine = this.querySelector('.au-checkbox__indeterminate');\n        const label = this.querySelector('.au-checkbox__label');\n\n        // MD3: 40dp circular state layer for ripple confinement\n        if (stateLayer) {\n            applyStateLayerStyles(stateLayer);\n        }\n\n        const isDisabled = this.has('disabled');\n        const isChecked = this.has('checked');\n        const isIndeterminate = this.has('indeterminate');\n\n        // Visual priority: indeterminate > checked > unchecked\n        const isFilled = isChecked || isIndeterminate;\n\n        updateFormCursor(this, isDisabled);\n\n        if (box) {\n            box.style.width = '18px';  /* MD3: 18dp container */\n            box.style.height = '18px';\n            box.style.borderRadius = '2px';  /* MD3: 2dp corner radius */\n            box.style.display = 'flex';\n            box.style.alignItems = 'center';\n            box.style.justifyContent = 'center';\n            box.style.transition = 'all var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard)';\n            box.style.flexShrink = '0';\n\n            if (isDisabled) {\n                box.style.border = `2px solid color-mix(in srgb, var(--md-sys-color-on-surface) 38%, transparent)`;\n                box.style.background = isFilled ? 'color-mix(in srgb, var(--md-sys-color-on-surface) 38%, transparent)' : 'transparent';\n            } else {\n                box.style.border = `2px solid ${isFilled ? 'var(--md-sys-color-primary)' : 'var(--md-sys-color-outline)'}`;\n                box.style.background = isFilled ? 'var(--md-sys-color-primary)' : 'transparent';\n            }\n        }\n\n        if (icon) {\n            icon.style.width = '14px';\n            icon.style.height = '14px';\n            icon.style.color = isDisabled ? 'var(--md-sys-color-surface)' : 'var(--md-sys-color-on-primary)';\n        }\n\n        // Checkmark animation (GPU accelerated stroke-dashoffset)\n        if (checkPath) {\n            const pathLength = 24;\n            checkPath.style.strokeDasharray = pathLength;\n            checkPath.style.strokeDashoffset = (isChecked && !isIndeterminate) ? '0' : pathLength;\n            checkPath.style.transition = 'stroke-dashoffset 200ms var(--md-sys-motion-easing-standard, ease-out)';\n        }\n\n        // Indeterminate line animation (GPU accelerated stroke-dashoffset)\n        if (indeterminateLine) {\n            const lineLength = 14;\n            indeterminateLine.style.strokeDasharray = lineLength;\n            indeterminateLine.style.strokeDashoffset = isIndeterminate ? '0' : lineLength;\n            indeterminateLine.style.transition = 'stroke-dashoffset 200ms var(--md-sys-motion-easing-standard, ease-out)';\n        }\n\n        if (label) {\n            label.style.color = isDisabled ? 'color-mix(in srgb, var(--md-sys-color-on-surface) 38%, transparent)' : 'var(--md-sys-color-on-surface)';\n        }\n\n        // Accessibility: update ARIA states\n        this.setAttribute('aria-checked', isIndeterminate ? 'mixed' : String(isChecked));\n        this.setAttribute('aria-disabled', String(isDisabled));\n        this.setAttribute('tabindex', isDisabled ? '-1' : '0');\n    }\n\n    /** Toggle the checked state and clear indeterminate. */\n    toggle() {\n        // User click always clears indeterminate and toggles checked\n        if (this.has('indeterminate')) {\n            this.removeAttribute('indeterminate');\n        }\n\n        if (this.has('checked')) {\n            this.removeAttribute('checked');\n        } else {\n            this.setAttribute('checked', '');\n        }\n        this.emit('au-change', {\n            checked: this.has('checked'),\n            indeterminate: false,\n            source: 'user'\n        });\n    }\n\n    /**\n     * Whether the checkbox is checked.\n     * @type {boolean}\n     */\n    get checked() {\n        return this.has('checked');\n    }\n\n    /** @param {boolean} v */\n    set checked(v) {\n        if (v) {\n            this.setAttribute('checked', '');\n        } else {\n            this.removeAttribute('checked');\n        }\n    }\n\n    /**\n     * Whether the checkbox is in indeterminate state.\n     * @type {boolean}\n     */\n    get indeterminate() {\n        return this.has('indeterminate');\n    }\n\n    /** @param {boolean} v */\n    set indeterminate(v) {\n        if (v) {\n            this.setAttribute('indeterminate', '');\n        } else {\n            this.removeAttribute('indeterminate');\n        }\n    }\n}\n\ndefine('au-checkbox', AuCheckbox);\n",
    "/**\n * @fileoverview au-switch - Toggle Switch Component\n * \n * Usage: <au-switch checked></au-switch>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\nimport { createRipple } from '../core/ripple.js';\nimport { updateFormCursor } from '../core/form-styles.js';\n\n/**\n * MD3 Toggle Switch component.\n *\n * @class\n * @extends AuElement\n * @element au-switch\n * @fires au-change - When toggled, detail: `{ checked, source }`\n */\nexport class AuSwitch extends AuElement {\n    static baseClass = 'au-switch';\n    static cssFile = 'switch';\n    /** @type {string[]} */\n    static observedAttributes = ['checked', 'disabled', 'label'];\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Accessibility: set role and keyboard navigation\n        this.setAttribute('role', 'switch');\n        this.setupActivation(() => this.toggle());\n\n        // Guard: defer click activation to prevent re-render loops.\n        // When innerHTML replaces DOM, new elements are created while click events\n        // still propagate. This prevents processing clicks during initialization.\n        this._initializing = true;\n        queueMicrotask(() => { this._initializing = false; });\n\n        this.listen(this, 'pointerdown', (e) => {\n            if (!this.isDisabled) {\n                const stateLayer = this.querySelector('.au-switch__state-layer');\n                if (stateLayer) createRipple(stateLayer, e, { centered: true, eventTarget: this });\n            }\n        });\n        this.listen(this, 'click', () => {\n            if (!this.isDisabled && !this._initializing) {\n                this.toggle();\n            }\n        });\n    }\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered  \n        if (this.querySelector('.au-switch__track')) {\n            this.#updateState();\n            return;\n        }\n\n        const label = this.attr('label', '') || this.textContent;\n        this.innerHTML = html`\n            <span class=\"au-switch__track\">\n                <span class=\"au-switch__state-layer\">\n                    <span class=\"au-switch__thumb\"></span>\n                </span>\n            </span>\n            ${label ? html`<span class=\"au-switch__label\">${label}</span>` : ''}\n        `;\n\n        this.style.display = 'inline-flex';\n        this.style.alignItems = 'center';\n        this.style.gap = '12px';\n        updateFormCursor(this, this.has('disabled'));\n\n        this.#updateState();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.#updateState();\n    }\n\n    /** @private */\n    #updateState() {\n        const track = this.querySelector('.au-switch__track');\n        const stateLayer = this.querySelector('.au-switch__state-layer');\n        const thumb = this.querySelector('.au-switch__thumb');\n        const isChecked = this.has('checked');\n        const isDisabled = this.has('disabled');\n\n        // Update cursor\n        updateFormCursor(this, isDisabled);\n\n        if (track) {\n            track.style.width = '52px';\n            track.style.height = '32px';\n            track.style.borderRadius = '16px';\n            track.style.position = 'relative';\n            track.style.transition = 'background var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard)';\n\n            // MD3 disabled state\n            if (isDisabled) {\n                track.style.background = 'color-mix(in srgb, var(--md-sys-color-on-surface) 12%, transparent)';\n            } else {\n                track.style.background = isChecked\n                    ? 'var(--md-sys-color-primary)'\n                    : 'var(--md-sys-color-surface-container-highest)';\n            }\n        }\n\n        // MD3: 40dp state layer centered on thumb, following thumb position\n        if (stateLayer) {\n            const stateLayerLeft = isChecked ? 20 : -2;  // Center 40dp layer on thumb\n            stateLayer.style.cssText = `\n                width: 40px; height: 40px;\n                border-radius: 50%;\n                position: absolute;\n                top: -4px;\n                left: ${stateLayerLeft}px;\n                display: flex; align-items: center; justify-content: center;\n                overflow: hidden;\n                transition: left var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-emphasized);\n            `;\n        }\n\n        if (thumb) {\n            // MD3: Thumb is 16dp when off, 24dp when on\n            const thumbSize = isChecked ? 24 : 16;\n\n            thumb.style.width = `${thumbSize}px`;\n            thumb.style.height = `${thumbSize}px`;\n            thumb.style.borderRadius = `${thumbSize / 2}px`;\n            thumb.style.transition = 'all var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-emphasized)';\n\n            // MD3 disabled state\n            if (isDisabled) {\n                thumb.style.background = 'color-mix(in srgb, var(--md-sys-color-on-surface) 38%, transparent)';\n                thumb.style.boxShadow = 'none';\n            } else {\n                thumb.style.background = isChecked\n                    ? 'var(--md-sys-color-on-primary)'\n                    : 'var(--md-sys-color-outline)';\n                thumb.style.boxShadow = 'var(--md-sys-elevation-level1)';\n            }\n        }\n\n        // Style label if present\n        const label = this.querySelector('.au-switch__label');\n        if (label) {\n            label.style.color = isDisabled ? 'color-mix(in srgb, var(--md-sys-color-on-surface) 38%, transparent)' : 'var(--md-sys-color-on-surface)';\n        }\n\n        // Accessibility: update ARIA states\n        this.setAttribute('aria-checked', String(isChecked));\n        this.setAttribute('aria-disabled', String(isDisabled));\n        this.setAttribute('tabindex', isDisabled ? '-1' : '0');\n        // Set aria-label from label text or attribute\n        const labelText = label?.textContent || this.attr('label', '');\n        if (labelText) this.setAttribute('aria-label', labelText);\n    }\n\n    /** Toggle the switch state. */\n    toggle() {\n        if (this.has('checked')) {\n            this.removeAttribute('checked');\n        } else {\n            this.setAttribute('checked', '');\n        }\n        this.emit('au-change', { checked: this.has('checked'), source: 'user' });\n    }\n\n    /**\n     * Whether the switch is checked.\n     * @type {boolean}\n     */\n    get checked() {\n        return this.has('checked');\n    }\n\n    /** @param {boolean} v */\n    set checked(v) {\n        if (v) {\n            this.setAttribute('checked', '');\n        } else {\n            this.removeAttribute('checked');\n        }\n    }\n}\n\ndefine('au-switch', AuSwitch);\n",
    "/**\n * @fileoverview au-radio - Radio Button Group Component\n * \n * Usage:\n * <au-radio-group name=\"size\" value=\"md\">\n *   <au-radio value=\"sm\">Small</au-radio>\n *   <au-radio value=\"md\">Medium</au-radio>\n *   <au-radio value=\"lg\">Large</au-radio>\n * </au-radio-group>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\nimport { createRipple } from '../core/ripple.js';\nimport { applyFormControlLayout, applyStateLayerStyles, updateFormCursor } from '../core/form-styles.js';\n\n/**\n * MD3 Radio Button Group managing exclusive selection.\n *\n * @class\n * @extends AuElement\n * @element au-radio-group\n * @fires au-change - When value changes, detail: `{ value, source }`\n * @slot default - `<au-radio>` children\n */\nexport class AuRadioGroup extends AuElement {\n    static baseClass = 'au-radio-group';\n    static cssFile = 'radio';\n    /** @type {string[]} */\n    static observedAttributes = ['name', 'value'];\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Accessibility: set role\n        this.setAttribute('role', 'radiogroup');\n\n        // Guard: defer click activation to prevent re-render loops.\n        this._initializing = true;\n        queueMicrotask(() => { this._initializing = false; });\n\n        // Ripple effect on pointerdown\n        this.listen(this, 'pointerdown', (e) => {\n            let radio = e.target;\n            while (radio && radio.tagName !== 'AU-RADIO') {\n                radio = radio.parentElement;\n            }\n            if (radio && !radio.hasAttribute('disabled')) {\n                const stateLayer = radio.querySelector('.au-radio__state-layer');\n                if (stateLayer) createRipple(stateLayer, e, { centered: true, eventTarget: this });\n            }\n        });\n\n        this.listen(this, 'click', (e) => {\n            if (this._initializing) return;\n\n            // Find the clicked radio - could be nested span\n            let radio = e.target;\n            while (radio && radio.tagName !== 'AU-RADIO') {\n                radio = radio.parentElement;\n            }\n\n            if (radio && !radio.hasAttribute('disabled')) {\n                this.select(radio.getAttribute('value'));\n            }\n        });\n    }\n\n    /** @override */\n    render() {\n        this.style.display = 'flex';\n        this.style.flexDirection = 'column';\n        this.style.gap = '8px';\n\n        // Defer selection update to ensure children are fully upgraded\n        // Use setTimeout(0) instead of queueMicrotask - microtasks run before\n        // custom element upgrades, setTimeout runs after\n        this.setTimeout(() => this.#updateSelection(), 0);\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        if (attr === 'value') {\n            this.#updateSelection();\n        }\n    }\n\n    /** @private */\n    #updateSelection() {\n        const currentValue = this.attr('value', '');\n        this.querySelectorAll('au-radio').forEach(radio => {\n            const isSelected = radio.attr('value') === currentValue;\n            if (isSelected) {\n                radio.setAttribute('checked', '');\n            } else {\n                radio.removeAttribute('checked');\n            }\n        });\n    }\n\n    /**\n     * Select a value and emit change.\n     * @param {string} value\n     */\n    select(value) {\n        this.setAttribute('value', value);\n        this.emit('au-change', { value, source: 'user' });\n    }\n\n    get value() {\n        return this.attr('value', '');\n    }\n\n    set value(v) {\n        this.setAttribute('value', v);\n    }\n}\n\n/**\n * Individual radio button within an `<au-radio-group>`.\n *\n * @class\n * @extends AuElement\n * @element au-radio\n */\nexport class AuRadio extends AuElement {\n    static baseClass = 'au-radio';\n    /** @type {string[]} */\n    static observedAttributes = ['value', 'checked', 'disabled', 'label'];\n\n    #labelText = '';\n    #rendered = false;\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Accessibility: set role and keyboard navigation\n        this.setAttribute('role', 'radio');\n        this.setupActivation(() => {\n            const group = this.closest('au-radio-group');\n            if (group) group.select(this.getAttribute('value'));\n        });\n    }\n\n    /** @override */\n    render() {\n        // Read label only once to avoid losing it after innerHTML\n        if (!this.#rendered) {\n            this.#labelText = this.attr('label', '') || this.textContent.trim();\n            this.#rendered = true;\n        }\n\n        this.innerHTML = html`\n            <span class=\"au-radio__state-layer\">\n                <span class=\"au-radio__circle\">\n                    <span class=\"au-radio__dot\"></span>\n                </span>\n            </span>\n            <span class=\"au-radio__label\">${this.#labelText}</span>\n        `;\n\n        applyFormControlLayout(this, this.has('disabled'));\n\n        this.#updateState();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        // For checked changes, just update visuals without full re-render\n        if (attr === 'checked' || attr === 'disabled') {\n            this.#updateState();\n        } else if (attr === 'label') {\n            this.#labelText = newValue;\n            const labelEl = this.querySelector('.au-radio__label');\n            if (labelEl) labelEl.textContent = newValue;\n        }\n    }\n\n    /** @private */\n    #updateState() {\n        const stateLayer = this.querySelector('.au-radio__state-layer');\n        const circle = this.querySelector('.au-radio__circle');\n        const dot = this.querySelector('.au-radio__dot');\n        const label = this.querySelector('.au-radio__label');\n        const isChecked = this.has('checked');\n        const isDisabled = this.has('disabled');\n\n        // Update cursor\n        updateFormCursor(this, isDisabled);\n\n        // MD3: 40dp circular state layer for ripple confinement\n        if (stateLayer) {\n            applyStateLayerStyles(stateLayer);\n        }\n\n        if (circle) {\n            circle.style.width = '20px';\n            circle.style.height = '20px';\n            circle.style.borderRadius = '50%';\n            circle.style.display = 'flex';\n            circle.style.alignItems = 'center';\n            circle.style.justifyContent = 'center';\n            circle.style.transition = 'border-color var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard)';\n\n            // MD3 disabled state\n            if (isDisabled) {\n                circle.style.border = '2px solid color-mix(in srgb, var(--md-sys-color-on-surface) 38%, transparent)';\n            } else {\n                circle.style.border = `2px solid ${isChecked ? 'var(--md-sys-color-primary)' : 'var(--md-sys-color-outline)'}`;\n            }\n        }\n\n        if (dot) {\n            dot.style.width = '10px';\n            dot.style.height = '10px';\n            dot.style.borderRadius = '50%';\n            dot.style.transform = isChecked ? 'scale(0.5)' : 'scale(0)';\n            dot.style.transition = 'transform var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard)';\n\n            // MD3 disabled state\n            if (isDisabled) {\n                dot.style.background = 'color-mix(in srgb, var(--md-sys-color-on-surface) 38%, transparent)';\n            } else {\n                dot.style.background = 'var(--md-sys-color-primary)';\n            }\n        }\n\n        if (label) {\n            label.style.color = isDisabled ? 'color-mix(in srgb, var(--md-sys-color-on-surface) 38%, transparent)' : 'var(--md-sys-color-on-surface)';\n        }\n\n        // Accessibility: update ARIA states\n        this.setAttribute('aria-checked', String(isChecked));\n        this.setAttribute('aria-disabled', String(isDisabled));\n        this.setAttribute('tabindex', isDisabled ? '-1' : '0');\n    }\n}\n\ndefine('au-radio-group', AuRadioGroup);\ndefine('au-radio', AuRadio);\n",
    "/**\n * @fileoverview au-chip - Chip/Tag Component (MD3)\n * \n * Usage:\n * <au-chip>Tag</au-chip>\n * <au-chip selected>Selected</au-chip>\n * <au-chip removable>Removable</au-chip>\n * <au-chip static>Display only (non-interactive badge)</au-chip>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { createRipple } from '../core/ripple.js';\nimport { html } from '../core/utils.js';\n\n/**\n * MD3 Chip/Tag component with selectable and removable modes.\n *\n * @class\n * @extends AuElement\n * @element au-chip\n * @fires au-change - When selection state changes, detail: `{ selected }`\n * @fires au-remove - When the chip is removed\n * @slot default - Chip label text\n */\nexport class AuChip extends AuElement {\n    static baseClass = 'au-chip';\n    static cssFile = null; // CSS is inline/JS only\n    /** @type {string[]} */\n    static observedAttributes = ['selected', 'removable', 'variant', 'static'];\n\n    #originalLabel = null;\n\n    /**\n     * Self-documenting component for AI agents\n     */\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        // Store original label before render\n        if (!this.#originalLabel && !this.querySelector('.au-chip__label')) {\n            this.#originalLabel = this.textContent.trim();\n        }\n\n        // Static mode: no interactivity\n        if (this.has('static')) {\n            this.render();\n            return;\n        }\n\n        // Interactive mode: keyboard accessibility\n        this.setAttribute('tabindex', '0');\n        this.setAttribute('role', 'button');\n        this.setupActivation(() => {\n            if (!this.has('removable')) {\n                this.toggle();\n            }\n        });\n\n        this.listen(this, 'pointerdown', (e) => {\n            if (!e.target.closest('.au-chip__remove')) {\n                createRipple(this, e);\n            }\n        });\n\n        this.listen(this, 'click', (e) => {\n            if (e.target.closest('.au-chip__remove')) {\n                this.emit('au-remove');\n                this.remove();\n            } else if (!this.has('removable')) {\n                this.toggle();\n            }\n        });\n    }\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered\n        if (this.querySelector('.au-chip__label')) {\n            this.#updateStyles();\n            return;\n        }\n\n        const label = this.#originalLabel || this.textContent.trim();\n        const removable = this.has('removable') && !this.has('static'); // No remove button in static mode\n\n        this.innerHTML = html`\n            <span class=\"au-chip__label\">${label}</span>\n            ${removable ? '<button class=\"au-chip__remove\" aria-label=\"Remove\">✕</button>' : ''}\n        `;\n\n        this.#updateStyles();\n    }\n\n    /**\n     * @override\n     * @param {string} attr\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        this.#updateStyles();\n    }\n\n    /** @private */\n    #updateStyles() {\n        const isSelected = this.has('selected');\n        const isStatic = this.has('static');\n        const variant = this.attr('variant', 'outlined');\n\n        this.style.display = 'inline-flex';\n        this.style.alignItems = 'center';\n        this.style.gap = '4px';\n        this.style.padding = '8px 16px';  /* MD3: 32dp height, 16dp horizontal */\n        this.style.borderRadius = '8px';\n        this.style.fontSize = 'var(--md-sys-typescale-label-large-size, 14px)';\n        this.style.userSelect = 'none';\n        this.style.transition = 'all var(--md-sys-motion-duration-short4) var(--md-sys-motion-easing-standard)';\n\n        // Static mode: no pointer cursor\n        this.style.cursor = isStatic ? 'default' : 'pointer';\n\n        if (variant === 'filled' || isSelected) {\n            this.style.background = isSelected\n                ? 'var(--md-sys-color-secondary-container)'\n                : 'var(--md-sys-color-surface-container-high)';\n            this.style.color = isSelected\n                ? 'var(--md-sys-color-on-secondary-container)'\n                : 'var(--md-sys-color-on-surface)';\n            this.style.border = '1px solid transparent'; // MD3: transparent border prevents layout shift\n        } else {\n            this.style.background = 'transparent';\n            this.style.color = 'var(--md-sys-color-on-surface)';\n            this.style.border = '1px solid var(--md-sys-color-outline)';\n        }\n\n        const removeBtn = this.querySelector('.au-chip__remove');\n        if (removeBtn) {\n            removeBtn.style.background = 'none';\n            removeBtn.style.border = 'none';\n            removeBtn.style.padding = '0';\n            removeBtn.style.marginLeft = '4px';\n            removeBtn.style.cursor = 'pointer';\n            removeBtn.style.color = 'inherit';\n            removeBtn.style.opacity = '0.7';\n        }\n    }\n\n    /** Toggle the selected state. No-op for static chips. */\n    toggle() {\n        // Static chips don't toggle\n        if (this.has('static')) return;\n\n        if (this.has('selected')) {\n            this.removeAttribute('selected');\n        } else {\n            this.setAttribute('selected', '');\n        }\n        this.emit('au-change', { selected: this.has('selected') });\n    }\n}\n\ndefine('au-chip', AuChip);\n",
    "/**\n * @fileoverview au-card - MD3 Card Container Component\n * \n * Usage: <au-card variant=\"elevated\">Content here</au-card>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * MD3 Card container component with elevation and padding options.\n *\n * @class\n * @extends AuElement\n * @element au-card\n * @slot default - Card body content\n */\nexport class AuCard extends AuElement {\n    static baseClass = 'au-card';\n    static cssFile = 'card';\n    /** @type {string[]} */\n    static observedAttributes = ['variant', 'padding'];\n\n    /**\n     * Self-documenting component for AI agents\n     */\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.#updateClasses();\n    }\n\n    /** @override */\n    render() {\n        // Card just wraps content, no internal structure needed\n        this.#updateClasses();\n    }\n\n    /**\n     * @override\n     * @param {string} attr\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        this.#updateClasses();\n    }\n\n    /** @private */\n    #updateClasses() {\n        const variant = this.attr('variant', 'flat');\n        const padding = this.attr('padding', 'md');\n\n        // Preserve custom classes while updating component classes\n        const baseClasses = ['au-card', `au-card--${variant}`, `au-card--padding-${padding}`];\n        baseClasses.forEach(cls => this.classList.add(cls));\n\n        // Remove old variant/padding classes\n        Array.from(this.classList).forEach(cls => {\n            if ((cls.startsWith('au-card--') || cls.startsWith('au-card--padding-')) && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n    }\n}\n\ndefine('au-card', AuCard);\n",
    "/**\n * @fileoverview au-callout - MD3 Callout/Info Box Component\n * \n * Usage: \n * <au-callout variant=\"info\">Important information here</au-callout>\n * <au-callout variant=\"warning\">Warning message</au-callout>\n * <au-callout variant=\"success\">Success message</au-callout>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * MD3 Callout / Info Box with variant-based colouring.\n *\n * @class\n * @extends AuElement\n * @element au-callout\n */\nexport class AuCallout extends AuElement {\n    static baseClass = 'au-callout';\n    /** @type {string[]} */\n    static observedAttributes = ['variant', 'title'];\n\n\n    /** @override */\n    render() {\n        this.#updateStyles();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.#updateStyles();\n    }\n\n    /** @private */\n    #updateStyles() {\n        const variant = this.attr('variant', 'info');\n\n        // MD3 color mappings\n        const variantColors = {\n            info: {\n                bg: 'var(--md-sys-color-primary-container)',\n                border: 'var(--md-sys-color-primary)',\n                text: 'var(--md-sys-color-on-primary-container)'\n            },\n            warning: {\n                bg: 'var(--md-sys-color-error-container)',\n                border: 'var(--md-sys-color-error)',\n                text: 'var(--md-sys-color-on-error-container)'\n            },\n            success: {\n                bg: 'var(--md-sys-color-tertiary-container)',\n                border: 'var(--md-sys-color-tertiary)',\n                text: 'var(--md-sys-color-on-tertiary-container)'\n            },\n            tip: {\n                bg: 'var(--md-sys-color-secondary-container)',\n                border: 'var(--md-sys-color-secondary)',\n                text: 'var(--md-sys-color-on-secondary-container)'\n            }\n        };\n\n        const colors = variantColors[variant] || variantColors.info;\n\n        // Apply MD3 callout styling\n        this.style.display = 'block';\n        // 2026: Proper containment - critical for responsive layout\n        this.style.boxSizing = 'border-box';\n        this.style.maxWidth = '100%';\n        this.style.wordWrap = 'break-word';\n        this.style.overflowWrap = 'break-word';\n        this.style.padding = '20px';  /* MD3: 20dp padding */\n        this.style.marginTop = '24px';  /* MD3: 24dp spacing from previous content */\n        this.style.marginBottom = '24px';\n        this.style.background = colors.bg;\n        this.style.borderLeft = `4px solid ${colors.border}`;\n        this.style.borderRadius = 'var(--md-sys-shape-corner-medium)';\n        this.style.color = colors.text;\n        this.style.lineHeight = '1.6';\n    }\n}\n\ndefine('au-callout', AuCallout);\n",
    "/**\n * @fileoverview au-tabs - MD3 Tabs Component\n * \n * Usage: \n * <au-tabs active=\"0\">\n *   <au-tab>Tab 1</au-tab>\n *   <au-tab>Tab 2</au-tab>\n * </au-tabs>\n * \n * Features:\n * - Sliding indicator animation (CSS transitions)\n * - DOM-preserving updates (no recreation)\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { attachRipple } from '../core/ripple.js';\n\n/**\n * MD3 Tabs component with sliding indicator animation.\n *\n * @class\n * @extends AuElement\n * @element au-tabs\n * @fires au-tab-change - When the active tab changes, detail: `{ index }`\n * @slot default - `<au-tab>` children\n */\nexport class AuTabs extends AuElement {\n    static baseClass = 'au-tabs';\n    static cssFile = 'tabs';\n    /** @type {string[]} */\n    static observedAttributes = ['active'];\n\n\n    #tabs = [];\n    #list = null;\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Listen for tab clicks via event delegation\n        this.listen(this, 'click', (e) => {\n            const tab = e.target.closest('au-tab');\n            if (tab) {\n                // Recalculate tabs array each time to handle dynamic changes\n                // and cases where tabs were hidden during initial render\n                const list = this.querySelector('.au-tabs__list');\n                const currentTabs = list\n                    ? Array.from(list.querySelectorAll('au-tab'))\n                    : Array.from(this.querySelectorAll('au-tab'));\n                const index = currentTabs.indexOf(tab);\n                if (index !== -1) {\n                    this.setAttribute('active', index.toString());\n                }\n            }\n        });\n    }\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered\n        if (this.querySelector('.au-tabs__list')) {\n            this.#tabs = Array.from(this.querySelectorAll('au-tab'));\n            this.#list = this.querySelector('.au-tabs__list');\n            this.#updateActive();\n            return;\n        }\n\n        // Create list wrapper for tabs (indicator is ::after pseudo-element, no DOM needed)\n        this.#list = document.createElement('div');\n        this.#list.className = 'au-tabs__list';\n        this.#list.setAttribute('role', 'tablist');\n\n        // Move existing au-tab children into list\n        this.#tabs = Array.from(this.querySelectorAll('au-tab'));\n        this.#tabs.forEach((tab) => {\n            tab.setAttribute('role', 'tab');\n            this.#list.appendChild(tab);\n        });\n\n        // NO DOM indicator element - using ::after pseudo-element via CSS\n        this.appendChild(this.#list);\n\n        this.#updateActive();\n    }\n\n    /**\n     * @override\n     * @param {string} attr\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        if (attr === 'active') {\n            this.#updateActive();\n            this.emit('au-tab-change', { index: parseInt(newValue) || 0 });\n        }\n    }\n\n    /** @private */\n    #updateActive() {\n        const activeIndex = parseInt(this.attr('active', '0'));\n        const tabCount = this.#tabs.length;\n\n        // Update tab active states\n        this.#tabs.forEach((tab, i) => {\n            tab.classList.toggle('is-active', i === activeIndex);\n            tab.setAttribute('aria-selected', i === activeIndex ? 'true' : 'false');\n        });\n\n        // Update indicator position via CSS custom properties (::after uses these)\n        if (this.#list && tabCount > 0) {\n            const width = 100 / tabCount;\n            this.#list.style.setProperty('--indicator-width', `${width}%`);\n            this.#list.style.setProperty('--indicator-left', `${activeIndex * width}%`);\n        }\n    }\n}\n\n/**\n * Individual tab element for use inside `<au-tabs>`.\n *\n * @class\n * @extends AuElement\n * @element au-tab\n */\nexport class AuTab extends AuElement {\n    static baseClass = 'au-tabs__tab';\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.setAttribute('tabindex', '0');\n        // MD3: tabs have unbounded ripple on press\n        this._rippleCleanup = attachRipple(this);\n    }\n\n    /** @override */\n    render() {\n        // Tab just wraps content, no transformation needed\n    }\n}\n\ndefine('au-tabs', AuTabs);\ndefine('au-tab', AuTab);\n",
    "/**\n * @fileoverview au-alert - MD3 Alert Component\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\n\n/**\n * MD3 Alert/Banner component for displaying status messages.\n *\n * @class\n * @extends AuElement\n * @element au-alert\n * @fires au-dismiss - When the alert is dismissed\n * @slot default - Alert message content\n */\nexport class AuAlert extends AuElement {\n    static baseClass = 'au-alert';\n    /** @type {string[]} */\n    static observedAttributes = ['severity', 'dismissible'];\n\n    #closeBtn = null;\n    #originalContent = null;\n\n    /** @override */\n    connectedCallback() {\n        // Accessibility: set role and aria-live for screen readers (always safe)\n        this.setAttribute('role', 'alert');\n        this.setAttribute('aria-live', 'polite');\n\n        // For AJAX-loaded content: defer entire initialization until HTML parser finishes\n        // This is necessary because super.connectedCallback() calls render(),\n        // and render needs the content to be available.\n        // Note: this.setTimeout() works before super.connectedCallback() because\n        // _timers is a class field initialized at construction time.\n        if (!this.#originalContent && !this.querySelector('.au-alert__content') && !this.innerHTML.trim()) {\n            // Content not yet available, defer initialization\n            this.setTimeout(() => {\n                if (!this.isConnected) return; // Guard: element may have been removed\n                this.#originalContent = this.innerHTML;\n                super.connectedCallback();\n                this.#initializeComponent();\n            }, 0);\n        } else {\n            // Content already available (static HTML or already initialized)\n            if (!this.#originalContent && !this.querySelector('.au-alert__content')) {\n                this.#originalContent = this.innerHTML;\n            }\n            super.connectedCallback();\n            this.#initializeComponent();\n        }\n    }\n\n    /** @private */\n    #initializeComponent() {\n        // Event delegation for close button\n        this.listen(this, 'click', (e) => {\n            if (e.target.classList.contains('au-alert__close')) {\n                this.dismiss();\n            }\n        });\n    }\n\n    /**\n     * Programmatically dismiss the alert\n     */\n    dismiss() {\n        this.emit('au-dismiss');\n        this.remove();\n    }\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered\n        if (this.querySelector('.au-alert__content')) {\n            this.#updateClasses();\n            return;\n        }\n\n        const severity = this.attr('severity', 'info');\n        const dismissible = this.has('dismissible');\n\n        // Icon names matching au-icon\n        const iconNames = {\n            success: 'success',\n            error: 'error',\n            warning: 'warning',\n            info: 'info'\n        };\n\n        const content = this.#originalContent || '';\n        const iconName = iconNames[severity] || iconNames.info;\n\n        this.innerHTML = html`\n            <au-icon name=\"${iconName}\" size=\"24\" class=\"au-alert__icon\"></au-icon>\n            <span class=\"au-alert__content\">${safe(content)}</span>\n            ${dismissible ? safe('<button class=\"au-alert__close\" aria-label=\"Dismiss\"><au-icon name=\"close\" size=\"18\"></au-icon></button>') : ''}\n        `;\n\n        this.#updateClasses();\n    }\n\n    /**\n     * @override\n     * @param {string} attr\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        this.#updateClasses();\n    }\n\n    /** @private */\n    #updateClasses() {\n        const severity = this.attr('severity', 'info');\n\n        // Preserve custom classes while updating component classes\n        const baseClasses = ['au-alert', `au-alert--${severity}`];\n        baseClasses.forEach(cls => this.classList.add(cls));\n\n        // Remove old severity classes\n        Array.from(this.classList).forEach(cls => {\n            if (cls.startsWith('au-alert--') && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n    }\n}\n\ndefine('au-alert', AuAlert);\n",
    "/**\n * @fileoverview au-badge - MD3 Badge Component\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * MD3 Badge component for status indicators.\n *\n * @class\n * @extends AuElement\n * @element au-badge\n * @slot default - Badge content (text or number)\n */\nexport class AuBadge extends AuElement {\n    static baseClass = 'au-badge';\n    static cssFile = 'badge';\n    /** @type {string[]} */\n    static observedAttributes = ['variant', 'size'];\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.#updateClasses();\n    }\n\n    /** @override */\n    render() {\n        this.#updateClasses();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.#updateClasses();\n    }\n\n    /** @private */\n    #updateClasses() {\n        const variant = this.attr('variant', 'primary');\n        const size = this.attr('size', 'md');\n\n        // Preserve custom classes while updating component classes\n        const baseClasses = ['au-badge', `au-badge--${variant}`, `au-badge--${size}`];\n        baseClasses.forEach(cls => this.classList.add(cls));\n\n        // Remove old variant/size classes\n        Array.from(this.classList).forEach(cls => {\n            if (cls.startsWith('au-badge--') && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n    }\n}\n\ndefine('au-badge', AuBadge);\n",
    "/**\n * @fileoverview au-progress - MD3 Linear Progress Indicator\n * Port of Material Web's md-linear-progress.\n * Source: https://github.com/material-components/material-web/blob/main/progress/internal/linear-progress.ts\n *\n * Determinate: single bar with width %.\n * Indeterminate: two bars (primary + secondary) with Material Web keyframes.\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * MD3 Linear Progress Indicator with determinate and indeterminate modes.\n *\n * @class\n * @extends AuElement\n * @element au-progress\n */\nexport class AuProgress extends AuElement {\n    static baseClass = 'au-progress';\n    static cssFile = 'progress';\n    /** @type {string[]} */\n    static observedAttributes = ['value', 'max', 'variant', 'indeterminate'];\n\n    #primaryBar = null;\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered\n        if (this.querySelector('.au-progress__progress')) {\n            this.#primaryBar = this.querySelector('.au-progress__primary-bar');\n            return;\n        }\n\n        this.setAttribute('role', 'progressbar');\n\n        // Material Web structure:\n        // .progress > (.bar.primary-bar > .bar-inner) + (.bar.secondary-bar > .bar-inner)\n        this.innerHTML = `<div class=\"au-progress__progress${this.hasAttribute('indeterminate') ? ' au-progress__indeterminate' : ''}\">\n    <div class=\"au-progress__bar au-progress__primary-bar\">\n        <div class=\"au-progress__bar-inner\"></div>\n    </div>\n    <div class=\"au-progress__bar au-progress__secondary-bar\">\n        <div class=\"au-progress__bar-inner\"></div>\n    </div>\n</div>`;\n        this.#primaryBar = this.querySelector('.au-progress__primary-bar');\n        this.#updateProgress();\n        this.#updateClasses();\n    }\n\n    /**\n     * @override\n     * @param {string} attr\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        if (attr === 'value' || attr === 'max') {\n            this.#updateProgress();\n        }\n        if (attr === 'indeterminate') {\n            const progress = this.querySelector('.au-progress__progress');\n            if (progress) {\n                if (newValue !== null) {\n                    progress.classList.add('au-progress__indeterminate');\n                } else {\n                    progress.classList.remove('au-progress__indeterminate');\n                }\n            }\n        }\n        this.#updateClasses();\n    }\n\n    /** @private */\n    #updateProgress() {\n        const value = parseFloat(this.attr('value', '0'));\n        const max = parseFloat(this.attr('max', '100'));\n        const percent = Math.min(100, Math.max(0, (value / max) * 100));\n\n        if (this.#primaryBar) {\n            this.#primaryBar.style.width = `${percent}%`;\n        }\n\n        this.setAttribute('aria-valuenow', value.toString());\n        this.setAttribute('aria-valuemax', max.toString());\n    }\n\n    /** @private */\n    #updateClasses() {\n        const variant = this.attr('variant', 'primary');\n\n        const baseClasses = ['au-progress', `au-progress--${variant}`];\n        baseClasses.forEach(cls => this.classList.add(cls));\n\n        Array.from(this.classList).forEach(cls => {\n            if (cls.startsWith('au-progress--') && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n    }\n}\n\ndefine('au-progress', AuProgress);\n",
    "/**\n * @fileoverview au-table - Data Table Component\n * \n * Usage:\n * <au-table>\n *   <au-thead>\n *     <au-tr><au-th>Name</au-th><au-th>Email</au-th></au-tr>\n *   </au-thead>\n *   <au-tbody>\n *     <au-tr><au-td>John</au-td><au-td>john@example.com</au-td></au-tr>\n *   </au-tbody>\n * </au-table>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * MD3 Data Table container.\n *\n * @class\n * @extends AuElement\n * @element au-table\n * @slot default - `<au-thead>` and `<au-tbody>` children\n */\nexport class AuTable extends AuElement {\n    static baseClass = 'au-table';\n    /** @type {string[]} */\n    static observedAttributes = ['striped', 'hover'];\n\n\n    /** @override */\n    render() {\n        this.style.display = 'table';\n        this.style.width = '100%';\n        this.style.borderCollapse = 'collapse';\n        this.style.fontSize = 'var(--md-sys-typescale-body-medium-size, 14px)';\n    }\n}\n\n/**\n * Table header group.\n * @class\n * @extends AuElement\n * @element au-thead\n */\nexport class AuThead extends AuElement {\n    static baseClass = 'au-table__head';\n\n    /** @override */\n    render() {\n        this.style.display = 'table-header-group';\n        this.style.background = 'var(--md-sys-color-surface-container)';\n    }\n}\n\n/**\n * Table body group.\n * @class\n * @extends AuElement\n * @element au-tbody\n */\nexport class AuTbody extends AuElement {\n    static baseClass = 'au-table__body';\n\n    /** @override */\n    render() {\n        this.style.display = 'table-row-group';\n    }\n}\n\n/**\n * Table row.\n * @class\n * @extends AuElement\n * @element au-tr\n */\nexport class AuTr extends AuElement {\n    static baseClass = 'au-table__row';\n\n    /** @override */\n    render() {\n        this.style.display = 'table-row';\n        this.style.borderBottom = '1px solid var(--md-sys-color-outline-variant)';\n    }\n}\n\n/**\n * Table header cell.\n * @class\n * @extends AuElement\n * @element au-th\n */\nexport class AuTh extends AuElement {\n    static baseClass = 'au-table__header';\n\n    /** @override */\n    render() {\n        this.style.display = 'table-cell';\n        this.style.padding = '12px 16px';\n        this.style.fontWeight = '600';\n        this.style.textAlign = 'left';\n    }\n}\n\n/**\n * Table data cell.\n * @class\n * @extends AuElement\n * @element au-td\n */\nexport class AuTd extends AuElement {\n    static baseClass = 'au-table__cell';\n\n    /** @override */\n    render() {\n        this.style.display = 'table-cell';\n        this.style.padding = '12px 16px';\n    }\n}\n\ndefine('au-table', AuTable);\ndefine('au-thead', AuThead);\ndefine('au-tbody', AuTbody);\ndefine('au-tr', AuTr);\ndefine('au-th', AuTh);\ndefine('au-td', AuTd);\n",
    "/**\n * @fileoverview au-avatar - User Avatar Component\n * \n * Usage: \n * <au-avatar src=\"/path/to/image.jpg\" alt=\"John Doe\" size=\"md\"></au-avatar>\n * <au-avatar initials=\"JD\" size=\"lg\"></au-avatar>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Circular avatar component showing image, initials, or a default user icon.\n *\n * @class\n * @extends AuElement\n * @element au-avatar\n */\nexport class AuAvatar extends AuElement {\n    static baseClass = 'au-avatar';\n    static cssFile = null; // CSS is inline/JS only\n    /** @type {string[]} */\n    static observedAttributes = ['src', 'alt', 'initials', 'size'];\n\n    /** @override */\n    render() {\n        const src = this.attr('src', '');\n        const alt = this.attr('alt', '');\n        const initials = this.attr('initials', '');\n        const size = this.attr('size', 'md');\n\n        const sizeMap = { sm: '32px', md: '40px', lg: '56px', xl: '80px' };\n        const fontSize = { sm: '12px', md: '14px', lg: '20px', xl: '28px' };\n\n        this.style.width = sizeMap[size] || size;\n        this.style.height = sizeMap[size] || size;\n        this.style.borderRadius = '50%';\n        this.style.display = 'inline-flex';\n        this.style.alignItems = 'center';\n        this.style.justifyContent = 'center';\n        this.style.overflow = 'hidden';\n        this.style.background = 'var(--md-sys-color-primary-container)';\n        this.style.color = 'var(--md-sys-color-on-primary-container)';\n        this.style.fontSize = fontSize[size] || '14px';\n        this.style.fontWeight = '600';\n\n        this.innerHTML = ''; // Clear existing content\n\n        let generatedInitials = '';\n        if (alt) {\n            const words = alt.split(' ');\n            generatedInitials = words.map(w => w[0]).join('').toUpperCase().slice(0, 2);\n        }\n\n        if (src) {\n            const img = document.createElement('img');\n            img.src = src;\n            img.alt = alt; // Safe: setting property, not attribute string\n            img.style.cssText = 'width:100%;height:100%;object-fit:cover;';\n            img.onerror = () => {\n                // Fallback to initials if image fails\n                this.innerHTML = '';\n                this.#renderInitials(initials, generatedInitials);\n            };\n            this.appendChild(img);\n        } else {\n            this.#renderInitials(initials, generatedInitials);\n        }\n    }\n\n    /**\n     * @private\n     * @param {string} initials - Explicit initials attribute\n     * @param {string} generatedInitials - Initials generated from alt text\n     */\n    #renderInitials(initials, generatedInitials) {\n        // Initials are derived from short string manipulation, relatively low risk,\n        // but let's be safe and use textContent for the span.\n\n        if (initials) {\n            const span = document.createElement('span');\n            span.textContent = initials.toUpperCase().slice(0, 2);\n            this.appendChild(span);\n        } else if (generatedInitials) {\n            const span = document.createElement('span');\n            span.textContent = generatedInitials;\n            this.appendChild(span);\n        } else {\n            // Default user icon\n            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n            svg.setAttribute('width', '60%');\n            svg.setAttribute('height', '60%');\n            svg.setAttribute('viewBox', '0 0 16 16');\n            svg.setAttribute('fill', 'currentColor');\n\n            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n            path.setAttribute('d', 'M10.561 8.073a6.005 6.005 0 0 1 3.432 5.142.75.75 0 0 1-1.498.07 4.5 4.5 0 0 0-8.99 0 .75.75 0 0 1-1.498-.07 6.004 6.004 0 0 1 3.431-5.142 3.999 3.999 0 1 1 5.123 0ZM10.5 5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z');\n\n            svg.appendChild(path);\n            this.appendChild(svg);\n        }\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.render();\n    }\n}\n\ndefine('au-avatar', AuAvatar);\n",
    "/**\n * @fileoverview au-skeleton - Skeleton Loader Component\n * \n * Usage: \n * <au-skeleton width=\"200px\" height=\"20px\"></au-skeleton>\n * <au-skeleton variant=\"circle\" size=\"40px\"></au-skeleton>\n * <au-skeleton variant=\"text\" lines=\"3\"></au-skeleton>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Skeleton placeholder loader with pulse animation.\n *\n * @class\n * @extends AuElement\n * @element au-skeleton\n */\nexport class AuSkeleton extends AuElement {\n    static baseClass = 'au-skeleton';\n    /** @type {string[]} */\n    static observedAttributes = ['variant', 'width', 'height', 'size', 'lines'];\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered (has skeleton line or animation)\n        if (this.querySelector('.au-skeleton__line') || this.style.animation) {\n            return;\n        }\n\n        const variant = this.attr('variant', 'rect');\n        const width = this.attr('width', '100%');\n        const height = this.attr('height', '20px');\n        const size = this.attr('size', '40px');\n        const lines = parseInt(this.attr('lines', '1'));\n\n        this.style.display = 'block';\n\n        if (variant === 'text' && lines > 1) {\n            // Multiple text lines\n            this.innerHTML = Array(lines).fill(0).map((_, i) =>\n                `<div class=\"au-skeleton__line\" style=\"\n                    height: 16px;\n                    margin-bottom: 8px;\n                    width: ${i === lines - 1 ? '70%' : '100%'};\n                    background: var(--md-sys-color-surface-container-highest);\n                    border-radius: 4px;\n                    animation: au-skeleton-pulse 1.5s ease-in-out infinite;\n                \"></div>`\n            ).join('');\n        } else {\n            this.style.width = variant === 'circle' ? size : width;\n            this.style.height = variant === 'circle' ? size : height;\n            this.style.borderRadius = variant === 'circle' ? '50%' : '4px';\n            this.style.background = 'var(--md-sys-color-surface-container-highest)';\n            this.style.animation = 'au-skeleton-pulse 1.5s ease-in-out infinite';\n        }\n\n        // Add keyframes if not exist\n        if (!document.getElementById('au-skeleton-styles')) {\n            const style = document.createElement('style');\n            style.id = 'au-skeleton-styles';\n            style.textContent = `\n                @keyframes au-skeleton-pulse {\n                    0%, 100% { opacity: 1; }\n                    50% { opacity: 0.5; }\n                }\n            `;\n            document.head.appendChild(style);\n        }\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.render();\n    }\n}\n\ndefine('au-skeleton', AuSkeleton);\n",
    "/**\n * @fileoverview au-spinner - MD3 Circular Progress Indicator\n * Exact port of Material Web's md-circular-progress (indeterminate mode).\n * Uses two bordered divs clipped into half circles.\n * Source: https://github.com/material-components/material-web/blob/main/progress/internal/circular-progress.ts\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * MD3 Circular Progress Indicator (indeterminate mode).\n *\n * @class\n * @extends AuElement\n * @element au-spinner\n */\nexport class AuSpinner extends AuElement {\n    static baseClass = 'au-spinner';\n    /** @type {string[]} */\n    static observedAttributes = ['size', 'color'];\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered\n        if (this.querySelector('.au-spinner__spinner')) return;\n\n        // Accessibility\n        if (!this.hasAttribute('role')) this.setAttribute('role', 'progressbar');\n        if (!this.hasAttribute('aria-label')) this.setAttribute('aria-label', 'Loading');\n\n        // Exact Material Web structure for indeterminate mode:\n        // .progress > .spinner > (.left > .circle) + (.right > .circle)\n        this.innerHTML = `<div class=\"au-spinner__progress\">\n    <div class=\"au-spinner__spinner\">\n        <div class=\"au-spinner__left\"><div class=\"au-spinner__circle\"></div></div>\n        <div class=\"au-spinner__right\"><div class=\"au-spinner__circle\"></div></div>\n    </div>\n</div>`;\n        this.#updateClasses();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.#updateClasses();\n    }\n\n    /** @private */\n    #updateClasses() {\n        const size = this.attr('size', 'md');\n        const color = this.attr('color', 'primary');\n\n        const baseClasses = ['au-spinner', `au-spinner--${size}`, `au-spinner--${color}`];\n        baseClasses.forEach(cls => this.classList.add(cls));\n\n        Array.from(this.classList).forEach(cls => {\n            if (cls.startsWith('au-spinner--') && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n    }\n}\n\ndefine('au-spinner', AuSpinner);\n",
    "/**\n * @fileoverview au-modal - MD3 Dialog Component  Native Dialog)\n * Uses native <dialog> element with showModal() for proper top-layer,\n * focus trapping, ESC handling, and backdrop - all built-in.\n * \n * MD3 Reference: https://m3.material.io/components/dialogs\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\nimport { afterPaint } from '../core/scheduler.js';\n\n/**\n * MD3 Dialog component using the native `<dialog>` element.\n * Provides top-layer rendering, focus trapping, ESC handling, and backdrop.\n *\n * @class\n * @extends AuElement\n * @element au-modal\n * @fires au-open - When the dialog opens\n * @fires au-close - When the dialog closes\n * @slot default - Dialog body content\n */\nexport class AuModal extends AuElement {\n    static baseClass = 'au-modal';\n    static cssFile = 'overlays';\n    /** @type {string[]} */\n    static observedAttributes = ['open', 'size'];\n\n    /** @type {HTMLDialogElement|null} */\n    #dialog = null;\n\n    /** @override */\n    disconnectedCallback() {\n        // ML5: Restore body scroll if we locked it (prevents frozen scroll\n        // when modal is force-removed from DOM without close())\n        if (this.classList.contains('is-open')) {\n            document.body.style.overflow = '';\n        }\n        super.disconnectedCallback();\n    }\n\n    /** @override */\n    connectedCallback() {\n        // Store user content only once, before first render\n        if (!this.hasAttribute('data-rendered')) {\n            this._userContent = this.innerHTML;\n            this.setAttribute('data-rendered', 'true');\n        }\n\n        super.connectedCallback();\n\n        // CRITICAL: Always setup listeners after super.connectedCallback()\n        // because it resets the AbortController. The render() creates DOM,\n        // but listeners must be attached here to survive disconnect/reconnect.\n        this.#setupListeners();\n    }\n\n    /** @override */\n    render() {\n        // Idempotent: check if already rendered via DOM structure\n        if (this.querySelector('dialog')) return;\n\n        const size = this.attr('size', 'md');\n        const content = this._userContent || '';\n\n        this.innerHTML = html`\n            <dialog class=\"au-modal__dialog au-modal--${size}\">\n                <button class=\"au-modal__close\" aria-label=\"Close\">✕</button>\n                <div class=\"au-modal__body\">${safe(content)}</div>\n            </dialog>\n        `;\n\n        this.#dialog = this.querySelector('dialog');\n    }\n\n    /**\n     * Setup all event listeners. Called after every connectedCallback\n     * to ensure listeners survive DOM disconnect/reconnect cycles.\n     * @private\n     */\n    #setupListeners() {\n        this.#dialog = this.querySelector('dialog');\n        if (!this.#dialog) return;\n\n        // Native dialog 'close' event (fires on ESC, form[method=dialog], or .close())\n        // Note: Do NOT emit au-close here — close() method handles that.\n        // This handler catches external closes (e.g., form[method=dialog]).\n        this.listen(this.#dialog, 'close', () => {\n            this.removeAttribute('open');\n            this.classList.remove('is-open', 'is-visible');\n            document.body.style.overflow = '';\n        });\n\n        // ESC key triggers 'cancel' event on dialog\n        this.listen(this.#dialog, 'cancel', (e) => {\n            e.preventDefault(); // Prevent default close to control animation\n            this.close();\n        });\n\n        // Click on backdrop (::backdrop pseudo-element triggers click on dialog)\n        this.listen(this.#dialog, 'click', (e) => {\n            // Only close if clicking the dialog element itself (backdrop area)\n            // not its children\n            if (e.target === this.#dialog) {\n                this.close();\n            }\n        });\n\n        // Close button - MD3 standard X button in top-right\n        const closeBtn = this.querySelector('.au-modal__close');\n        if (closeBtn) {\n            this.listen(closeBtn, 'click', () => {\n                this.close();\n            });\n        }\n    }\n\n    /**\n     * @override\n     * @param {string} attr\n     * @param {string|null} newValue\n     * @param {string|null} oldValue\n     */\n    update(attr, newValue, oldValue) {\n        if (attr === 'open') {\n            if (newValue !== null) {\n                this.#showDialog();\n            }\n        }\n    }\n\n    /** @private */\n    #showDialog() {\n        if (!this.#dialog || this.#dialog.open) return;\n\n        this.classList.add('is-open');\n        this.#dialog.showModal(); // Native top-layer, focus trap, backdrop!\n        document.body.style.overflow = 'hidden';\n\n        // Emit open event\n        this.emit('au-open');\n\n        // Trigger animation - MD3 requires emphasized-decelerate for enter\n        afterPaint().then(() => this.classList.add('is-visible'));\n    }\n\n    /**\n     * Open the modal dialog.\n     * Sets the `open` attribute which triggers `#showDialog`.\n     */\n    open() {\n        this.setAttribute('open', '');\n    }\n\n    /**\n     * Close the modal dialog with an MD3 exit animation.\n     * Emits `au-close` after the transition completes.\n     */\n    close() {\n        if (!this.#dialog) return;\n\n        // MD3: emphasized-accelerate for exit\n        this.classList.remove('is-visible');\n\n        // 2026: Use transitionend instead of setTimeout\n        // In test environments (JSDOM/linkedom), transitionend won't fire, so use a flag\n        let cleaned = false;\n        const cleanup = () => {\n            if (cleaned) return;\n            cleaned = true;\n            if (this.#dialog && this.#dialog.open) {\n                this.#dialog.close();\n            }\n            this.removeAttribute('open');\n            this.classList.remove('is-open');\n            document.body.style.overflow = '';\n            this.emit('au-close');\n        };\n\n        // Listen for transition end\n        const dialog = this.#dialog;\n        const onTransitionEnd = (e) => {\n            if (e.target === dialog) {\n                dialog.removeEventListener('transitionend', onTransitionEnd);\n                cleanup();\n            }\n        };\n        // ML7: Use managed listener for auto-cleanup on disconnect\n        this.listen(dialog, 'transitionend', onTransitionEnd);\n\n        // Fallback: cleanup after expected transition time (200ms matches CSS)\n        this.setTimeout(() => {\n            dialog.removeEventListener('transitionend', onTransitionEnd);\n            cleanup();\n        }, 200);\n    }\n}\n\ndefine('au-modal', AuModal);\n",
    "/**\n * @fileoverview au-toast - MD3 Snackbar/Toast Notification\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\n\n/**\n * MD3 Snackbar/Toast notification component with auto-dismiss.\n *\n * @class\n * @extends AuElement\n * @element au-toast\n * @fires au-dismiss - When the toast is dismissed\n */\nexport class AuToast extends AuElement {\n    static baseClass = 'au-toast';\n    static cssFile = null; // Toast CSS is in main bundle only (no separate snackbar.css)\n    /** @type {string[]} */\n    static observedAttributes = ['severity', 'duration', 'position'];\n\n    #timeout = null;\n    #originalContent = null;\n\n    /** @override */\n    connectedCallback() {\n        // Store content before render (must be before super because super calls render)\n        if (!this.#originalContent && !this.querySelector('.au-toast__content')) {\n            this.#originalContent = this.innerHTML;\n        }\n\n        super.connectedCallback();\n\n        // Event delegation for close button\n        this.listen(this, 'click', (e) => {\n            if (e.target.classList.contains('au-toast__close')) {\n                this.dismiss();\n            }\n        });\n\n        // Auto-dismiss\n        const duration = parseInt(this.attr('duration', '3000'));\n        if (duration > 0) {\n            this.#timeout = this.setTimeout(() => this.dismiss(), duration);\n        }\n    }\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        // Timer cleanup handled by AuElement\n    }\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered\n        if (this.querySelector('.au-toast__content')) {\n            this.#updateClasses();\n            return;\n        }\n\n        const content = this.#originalContent || '';\n\n        this.innerHTML = html`\n            <span class=\"au-toast__content\">${safe(content)}</span>\n            <button class=\"au-toast__close\" aria-label=\"Dismiss\">✕</button>\n        `;\n\n        this.#updateClasses();\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        this.#updateClasses();\n    }\n\n    /** @private */\n    #updateClasses() {\n        const severity = this.attr('severity', 'info');\n        const position = this.attr('position', 'bottom-center');\n\n        const baseClasses = ['au-toast', `au-toast--${severity}`, `au-toast--${position}`];\n        baseClasses.forEach(cls => this.classList.add(cls));\n\n        Array.from(this.classList).forEach(cls => {\n            if (cls.startsWith('au-toast--') && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n    }\n\n    /** Dismiss the toast with an exit animation. */\n    dismiss() {\n        this.emit('au-dismiss');\n        this.classList.add('is-exiting');\n\n        // Use animationend instead of setTimeout\n        let removed = false;\n        const cleanup = () => {\n            if (!removed) {\n                removed = true;\n                const container = this.parentElement;\n                this.remove();\n                // ML3: Clean up empty container to prevent DOM accumulation\n                if (container?.tagName === 'AU-TOAST-CONTAINER' && container.children.length === 0) {\n                    container.remove();\n                }\n            }\n        };\n\n        this.listen(this, 'animationend', cleanup, { once: true });\n        // Fallback in case animation doesn't fire (test env, reduced motion)\n        this.setTimeout(cleanup, 200);\n    }\n}\n\ndefine('au-toast', AuToast);\n\n/**\n * Container element for positioning toast notifications.\n *\n * @class\n * @extends AuElement\n * @element au-toast-container\n */\nexport class AuToastContainer extends AuElement {\n    static baseClass = 'au-toast-container';\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.setAttribute('role', 'status');\n        this.setAttribute('aria-live', 'polite');\n    }\n}\n\ndefine('au-toast-container', AuToastContainer);\n\n/**\n * Toast manager for programmatic toast creation.\n * @namespace Toast\n */\nexport const Toast = {\n    /**\n     * Show a toast notification.\n     * @param {string} message - Toast message\n     * @param {Object} [options={}] - Toast options\n     * @param {string} [options.severity] - 'info'|'success'|'warning'|'error'\n     * @param {number} [options.duration] - Auto-dismiss duration in ms\n     * @param {string} [options.position='bottom-center'] - Toast position\n     * @returns {AuToast} The created toast element\n     */\n    show(message, options = {}) {\n        const position = options.position || 'bottom-center';\n        let container = document.querySelector(`au-toast-container[position=\"${position}\"]`);\n\n        if (!container) {\n            container = document.createElement('au-toast-container');\n            container.setAttribute('position', position);\n            document.body.appendChild(container);\n        }\n\n        const toast = document.createElement('au-toast');\n        toast.textContent = message;\n\n        if (options.severity) {\n            toast.setAttribute('severity', options.severity);\n        }\n        if (options.duration) {\n            toast.setAttribute('duration', options.duration.toString());\n        }\n\n        container.appendChild(toast);\n        return toast;\n    }\n};\n\n// ============================================\n// EVENTBUS LISTENER AUTO-REGISTRATION\n// Self-registers when this module is loaded (works with lazy loading)\n// Uses hasListeners to prevent duplicate registration\n// ============================================\nimport { bus, UIEvents, registerComponent } from '../core/bus.js';\n\nif (typeof window !== 'undefined' && bus && !bus.hasListeners(UIEvents.TOAST_SHOW)) {\n    bus.on(UIEvents.TOAST_SHOW, (data) => {\n        Toast.show(data.message, data);\n    });\n}\n\n// Register component capabilities for AI agent discovery\nregisterComponent('au-toast', {\n    signals: [UIEvents.TOAST_SHOW, UIEvents.TOAST_DISMISS],\n    options: {\n        severities: ['info', 'success', 'warning', 'error'],\n        positions: ['top-left', 'top-center', 'top-right', 'bottom-left', 'bottom-center', 'bottom-right'],\n        defaultDuration: 3000\n    },\n    description: 'MD3 Snackbar/Toast Notification component'\n});\n",
    "/**\n * @fileoverview au-tooltip - MD3 Tooltip Component\n * Uses portal pattern with Floating UI-style positioning\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/** Gap between tooltip and trigger element (MD3 spec: 8px) */\nconst TOOLTIP_GAP = 8;\n\n/**\n * MD3 Tooltip using portal positioning with auto-flip.\n *\n * @class\n * @extends AuElement\n * @element au-tooltip\n */\nexport class AuTooltip extends AuElement {\n    static baseClass = 'au-tooltip';\n    static cssFile = 'tooltip';\n    /** @type {string[]} */\n    static observedAttributes = ['content', 'position'];\n\n\n    #tooltip = null;\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        this.listen(this, 'mouseenter', () => this.show());\n        this.listen(this, 'mouseleave', () => this.hide());\n        this.listen(this, 'focus', () => this.show(), { capture: true });\n        this.listen(this, 'blur', () => this.hide(), { capture: true });\n    }\n\n    /** @override */\n    render() {\n        const position = this.attr('position', 'top');\n\n        const baseClasses = ['au-tooltip', `au-tooltip--${position}`];\n        baseClasses.forEach(cls => this.classList.add(cls));\n        Array.from(this.classList).forEach(cls => {\n            if (cls.startsWith('au-tooltip--') && !baseClasses.includes(cls)) {\n                this.classList.remove(cls);\n            }\n        });\n\n        this.style.position = 'relative';\n        this.style.display = 'inline-block';\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        if (attr === 'position') {\n            const position = this.attr('position', 'top');\n\n            const baseClasses = ['au-tooltip', `au-tooltip--${position}`];\n            baseClasses.forEach(cls => this.classList.add(cls));\n            Array.from(this.classList).forEach(cls => {\n                if (cls.startsWith('au-tooltip--') && !baseClasses.includes(cls)) {\n                    this.classList.remove(cls);\n                }\n            });\n        }\n    }\n\n    /** Show the tooltip and position it relative to the trigger. */\n    show() {\n        if (this.#tooltip) return;\n\n        const content = this.attr('content', '');\n        if (!content) return;\n\n        const position = this.attr('position', 'top');\n\n        // Create tooltip element\n        this.#tooltip = document.createElement('div');\n        this.#tooltip.className = `au-tooltip__content au-tooltip__content--${position}`;\n        this.#tooltip.textContent = content;\n        this.#tooltip.setAttribute('role', 'tooltip');\n\n        // Initial styles for measurement - CRITICAL: override CSS transforms\n        this.#tooltip.style.cssText = `\n            position: fixed !important;\n            top: 0 !important;\n            left: 0 !important;\n            transform: none !important;\n            visibility: hidden;\n            z-index: var(--au-z-tooltip, 9999);\n            pointer-events: none;\n            margin: 0 !important;\n        `;\n\n        // Portal: append to body\n        document.body.appendChild(this.#tooltip);\n\n        // Calculate and apply position\n        this.#computePosition(position);\n\n        // Trigger visibility\n        requestAnimationFrame(() => {\n            if (this.#tooltip) {\n                this.#tooltip.style.visibility = 'visible';\n                this.#tooltip.style.opacity = '1';\n            }\n        });\n    }\n\n    /**\n     * Floating UI-style fixed positioning logic.\n     * @private\n     */\n    #computePosition(placement) {\n        const triggerRect = this.getBoundingClientRect();\n        const tooltipRect = this.#tooltip.getBoundingClientRect();\n\n        let { x, y } = this.#getCoordinates(placement, triggerRect, tooltipRect);\n\n        // Viewport boundary detection and auto-flip\n        const finalPlacement = this.#autoFlip(placement, x, y, tooltipRect, triggerRect);\n\n        if (finalPlacement !== placement) {\n            ({ x, y } = this.#getCoordinates(finalPlacement, triggerRect, tooltipRect));\n        }\n\n        // Clamp to viewport edges\n        const viewportWidth = window.innerWidth;\n        const viewportHeight = window.innerHeight;\n\n        x = Math.max(4, Math.min(x, viewportWidth - tooltipRect.width - 4));\n        y = Math.max(4, Math.min(y, viewportHeight - tooltipRect.height - 4));\n\n        // Apply final position with !important to override CSS\n        this.#tooltip.style.setProperty('left', `${x}px`, 'important');\n        this.#tooltip.style.setProperty('top', `${y}px`, 'important');\n    }\n\n    /**\n     * Calculate x,y coordinates for a given placement.\n     * @private\n     */\n    #getCoordinates(placement, triggerRect, tooltipRect) {\n        let x, y;\n\n        switch (placement) {\n            case 'top':\n                x = triggerRect.left + (triggerRect.width - tooltipRect.width) / 2;\n                y = triggerRect.top - tooltipRect.height - TOOLTIP_GAP;\n                break;\n            case 'bottom':\n                x = triggerRect.left + (triggerRect.width - tooltipRect.width) / 2;\n                y = triggerRect.bottom + TOOLTIP_GAP;\n                break;\n            case 'left':\n                x = triggerRect.left - tooltipRect.width - TOOLTIP_GAP;\n                y = triggerRect.top + (triggerRect.height - tooltipRect.height) / 2;\n                break;\n            case 'right':\n                x = triggerRect.right + TOOLTIP_GAP;\n                y = triggerRect.top + (triggerRect.height - tooltipRect.height) / 2;\n                break;\n            default:\n                x = triggerRect.left + (triggerRect.width - tooltipRect.width) / 2;\n                y = triggerRect.top - tooltipRect.height - TOOLTIP_GAP;\n        }\n\n        return { x, y };\n    }\n\n    /**\n     * Auto-flip to opposite side if tooltip overflows viewport.\n     * @private\n     */\n    #autoFlip(placement, x, y, tooltipRect, triggerRect) {\n        const viewportWidth = window.innerWidth;\n        const viewportHeight = window.innerHeight;\n\n        switch (placement) {\n            case 'top':\n                if (y < 0) return 'bottom';\n                break;\n            case 'bottom':\n                if (y + tooltipRect.height > viewportHeight) return 'top';\n                break;\n            case 'left':\n                if (x < 0) return 'right';\n                break;\n            case 'right':\n                if (x + tooltipRect.width > viewportWidth) return 'left';\n                break;\n        }\n\n        return placement;\n    }\n\n    /** Hide and remove the tooltip element. */\n    hide() {\n        if (this.#tooltip) {\n            this.#tooltip.remove();\n            this.#tooltip = null;\n        }\n    }\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.hide();\n    }\n}\n\ndefine('au-tooltip', AuTooltip);\n\n\n",
    "/**\n * @fileoverview au-confirm - Programmatic Confirm Dialog\n * Agent-friendly confirm dialog with Promise-based API\n * \n * Extends AuModal to leverage native <dialog> benefits:\n * - Backdrop blur\n * - ESC key handling (native)\n * - Focus trapping (native)\n * - Top-layer stacking (native)\n * \n * @example\n * const ok = await auConfirm('Delete this item?');\n * if (ok) deleteItem();\n * \n * @example\n * const ok = await auConfirm('Are you sure?', {\n *     title: 'Confirm Delete',\n *     confirmText: 'Delete',\n *     cancelText: 'Cancel',\n *     variant: 'danger'\n * });\n */\n\nimport { define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\nimport { AuModal } from './au-modal.js';\n\n/**\n * @typedef {Object} ConfirmOptions\n * @property {string} [title] - Dialog title\n * @property {string} [confirmText='Confirm'] - Confirm button text\n * @property {string} [cancelText='Cancel'] - Cancel button text\n * @property {'primary'|'danger'|'warning'} [variant='primary'] - Button variant\n */\n\n/** @type {AuConfirm|null} */\nlet activeConfirm = null;\n\n/**\n * Show a confirm dialog and wait for user response\n * @param {string} message - Message to display\n * @param {ConfirmOptions} [options] - Configuration options\n * @returns {Promise<boolean>} - Resolves true if confirmed, false if cancelled\n */\nexport async function auConfirm(message, options = {}) {\n    const {\n        title = 'Confirm',\n        confirmText = 'Confirm',\n        cancelText = 'Cancel',\n        variant = 'primary'\n    } = options;\n\n    // Remove any existing confirm dialog\n    if (activeConfirm) {\n        activeConfirm.remove();\n    }\n\n    return new Promise((resolve) => {\n        const dialog = /** @type {AuConfirm} */ (document.createElement('au-confirm'));\n        dialog.setAttribute('title', title);\n        dialog.setAttribute('message', message);\n        dialog.setAttribute('confirm-text', confirmText);\n        dialog.setAttribute('cancel-text', cancelText);\n        dialog.setAttribute('variant', variant);\n\n        dialog.addEventListener('au-confirm', () => {\n            dialog.remove();\n            activeConfirm = null;\n            resolve(true);\n        });\n\n        dialog.addEventListener('au-cancel', () => {\n            dialog.remove();\n            activeConfirm = null;\n            resolve(false);\n        });\n\n        activeConfirm = dialog;\n        document.body.appendChild(dialog);\n        dialog.open();\n    });\n}\n\n/**\n * Programmatic confirm dialog extending `AuModal` for native `<dialog>` benefits\n * (backdrop blur, ESC handling, focus trapping, top-layer stacking).\n *\n * @class\n * @extends AuModal\n * @element au-confirm\n * @fires au-confirm - Emitted when the user confirms.\n * @fires au-cancel  - Emitted when the user cancels or presses ESC.\n */\nexport class AuConfirm extends AuModal {\n    static baseClass = 'au-confirm';\n    static cssFile = 'overlays';\n    static observedAttributes = ['title', 'message', 'confirm-text', 'cancel-text', 'variant', 'open', 'size'];\n\n    /** @type {HTMLDialogElement|null} */\n    #dialog = null;\n\n    /** @override */\n    disconnectedCallback() {\n        // ML6: Restore body overflow if confirm was open when force-removed\n        if (this.#dialog?.open) {\n            document.body.style.overflow = '';\n        }\n        super.disconnectedCallback();\n    }\n\n    /** @override */\n    connectedCallback() {\n        // Skip AuModal's content preservation - we generate our own\n        // Go directly to AuElement's connectedCallback for listener setup\n        if (!this.hasAttribute('data-rendered')) {\n            this.setAttribute('data-rendered', 'true');\n        }\n\n        // Call grandparent (AuElement) connectedCallback\n        Object.getPrototypeOf(AuModal.prototype).connectedCallback.call(this);\n\n        // Note: listeners are set up in render() after dialog is created\n    }\n\n    /** @override */\n    render() {\n        // Don't call super.render() - we have our own layout\n        // Idempotent: if already rendered, just re-attach listeners (AbortController clears on disconnect)\n        if (this.querySelector('dialog')) {\n            this.#dialog = this.querySelector('dialog');\n            this.#setupConfirmListeners();\n            return;\n        }\n\n        const title = this.attr('title', 'Confirm');\n        const message = this.attr('message', 'Are you sure?');\n        const confirmText = this.attr('confirm-text', 'Confirm');\n        const cancelText = this.attr('cancel-text', 'Cancel');\n        const variant = this.attr('variant', 'primary');\n\n        // Map variant to button variant\n        const buttonVariant = variant === 'danger' ? 'danger' : 'filled';\n\n        this.innerHTML = html`\n            <dialog class=\"au-confirm__dialog\">\n                <h3 class=\"au-confirm__title\">${title}</h3>\n                <p class=\"au-confirm__message\">${message}</p>\n                <div class=\"au-confirm__actions\">\n                    <au-button variant=\"text\" data-action=\"cancel\">${cancelText}</au-button>\n                    <au-button variant=\"${buttonVariant}\" data-action=\"confirm\">${confirmText}</au-button>\n                </div>\n            </dialog>\n        `;\n\n        this.#dialog = this.querySelector('dialog');\n\n        // Set up listeners after dialog is created\n        this.#setupConfirmListeners();\n    }\n\n    /**\n     * Handle actions from AuElement's centralized event delegation\n     * This is called by #setupEventDelegation in AuElement when [data-action] elements are clicked\n     */\n    handleAction(action, target, event) {\n        if (action === 'cancel') {\n            this.cancel();\n        } else if (action === 'confirm') {\n            this.confirm();\n        }\n    }\n\n    /**\n     * Attach native dialog event listeners (close, cancel, backdrop click).\n     * @private\n     */\n    #setupConfirmListeners() {\n        this.#dialog = this.querySelector('dialog');\n        if (!this.#dialog) return;\n\n        // Native dialog 'close' event\n        this.listen(this.#dialog, 'close', () => {\n            this.removeAttribute('open');\n            this.classList.remove('is-open', 'is-visible');\n            document.body.style.overflow = '';\n        });\n\n        // ESC key triggers 'cancel' event on dialog - treat as cancel\n        this.listen(this.#dialog, 'cancel', (e) => {\n            e.preventDefault();\n            this.cancel();\n        });\n\n        // Click on backdrop (dialog element itself, not its children)\n        this.listen(this.#dialog, 'click', (e) => {\n            if (e.target === this.#dialog) {\n                this.cancel();\n            }\n        });\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        if (attr === 'open') {\n            if (newValue !== null) {\n                this.#showDialog();\n            }\n        }\n    }\n\n    /**\n     * Show the dialog with modal behaviour and focus management.\n     * @private\n     */\n    #showDialog() {\n        if (!this.#dialog || this.#dialog.open) return;\n\n        this.classList.add('is-open');\n        this.#dialog.showModal();\n        document.body.style.overflow = 'hidden';\n\n        // Focus confirm button for keyboard navigation (after DOM is ready)\n        const confirmBtn = this.querySelector('[data-action=\"confirm\"]');\n        if (confirmBtn) {\n            // Use double-rAF to ensure focus happens after showModal completes\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => confirmBtn.focus());\n            });\n        }\n\n        // Trigger animation\n        requestAnimationFrame(() => {\n            requestAnimationFrame(() => {\n                this.classList.add('is-visible');\n            });\n        });\n    }\n\n    /**\n     * Open the confirm dialog\n     */\n    open() {\n        this.setAttribute('open', '');\n    }\n\n    /**\n     * Close the confirm dialog with animation\n     */\n    close() {\n        if (!this.#dialog) return;\n\n        this.classList.remove('is-visible');\n\n        // 2026: Use transitionend with flag for test compatibility\n        let cleaned = false;\n        const cleanup = () => {\n            if (cleaned) return;\n            cleaned = true;\n            if (this.#dialog && this.#dialog.open) {\n                this.#dialog.close();\n            }\n            this.removeAttribute('open');\n            this.classList.remove('is-open');\n            document.body.style.overflow = '';\n        };\n\n        const dialog = this.#dialog;\n        const onTransitionEnd = (e) => {\n            if (e.target === dialog) {\n                dialog.removeEventListener('transitionend', onTransitionEnd);\n                cleanup();\n            }\n        };\n        // ML7: Use managed listener for auto-cleanup on disconnect\n        this.listen(dialog, 'transitionend', onTransitionEnd);\n\n        // Fallback: cleanup after expected transition time (200ms matches CSS)\n        this.setTimeout(() => {\n            dialog.removeEventListener('transitionend', onTransitionEnd);\n            cleanup();\n        }, 200);\n    }\n\n    /**\n     * Confirm action - closes and emits au-confirm event\n     */\n    confirm() {\n        this.close();\n        this.emit('au-confirm');\n    }\n\n    /**\n     * Cancel action - closes and emits au-cancel event\n     */\n    cancel() {\n        this.close();\n        this.emit('au-cancel');\n    }\n}\n\ndefine('au-confirm', AuConfirm);\n",
    "/**\n * au-router - Route management and lazy page loading\n * \n * Features:\n * - Hash-based routing (#page-name)\n * - Lazy loads pages from /app/pages/{route}.html\n * - Caches loaded pages\n * - Emits navigation events\n * \n * Usage:\n *   <au-router base=\"/app/pages\"></au-router>\n * \n * @agent-pattern\n * This component is core to the page-based app architecture.\n * Place one <au-router> in your app shell where pages should render.\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\nimport { bus } from '../core/bus.js';\n\n/**\n * Hash-based router that lazily loads pages from HTML files, caches them,\n * and emits navigation events on both the DOM and the global `bus`.\n *\n * @class\n * @extends AuElement\n * @element au-router\n * @fires au-route-change - Emitted on route change, detail: `{ route }`.\n * @fires au-page-loaded  - Emitted after page content is rendered, detail: `{ route }`.\n * @fires au-page-error   - Emitted on page load failure, detail: `{ route, error }`.\n */\nclass AuRouter extends AuElement {\n    static baseClass = 'au-router';\n    static observedAttributes = ['base', 'default'];\n\n    // Cache for loaded pages\n\n    /** @private @type {Map<string,string>} */\n    #pageCache = new Map();\n    /** @private @type {string|null} */\n    #currentRoute = null;\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        // Listen for hash changes - use this.listen() for automatic cleanup\n        this.listen(window, 'hashchange', () => this.#handleRoute());\n\n        // Handle initial route\n        this.#handleRoute();\n    }\n\n    // disconnectedCallback handled by AuElement (AbortController cleanup)\n\n    /** @override */\n    render() {\n        // Empty container - pages render inside\n        this.innerHTML = '<div class=\"au-router__content\"></div>';\n    }\n\n    /**\n     * Resolved base path for page HTML files.\n     * @private\n     * @type {string}\n     */\n    get #basePath() {\n        return this.attr('base', '/app/pages');\n    }\n\n    /**\n     * Default route when hash is empty.\n     * @private\n     * @type {string}\n     */\n    get #defaultRoute() {\n        return this.attr('default', 'home');\n    }\n\n    /**\n     * Router content container element.\n     * @private\n     * @type {HTMLElement|null}\n     */\n    get #contentContainer() {\n        return this.querySelector('.au-router__content');\n    }\n\n    /**\n     * Parse the current hash and load the corresponding page.\n     * @private\n     */\n    async #handleRoute() {\n        const hash = window.location.hash.slice(1) || this.#defaultRoute;\n\n        // Skip if same route\n        if (hash === this.#currentRoute) return;\n\n        const previous = this.#currentRoute;\n        this.#currentRoute = hash;\n\n        // Emit route-change DOM event (original — backward-compatible)\n        this.emit('au-route-change', { route: hash });\n\n        // Emit route-change on the global bus (decoupled from DOM tree)\n        bus.emit('au:route-change', { route: hash, previous });\n\n        // Load page\n        await this.#loadPage(hash);\n    }\n\n    /**\n     * Fetch, sanitize, cache, and render a page by route name.\n     * @private\n     * @param {string} route\n     */\n    async #loadPage(route) {\n        const container = this.#contentContainer;\n        if (!container) return;\n\n        // Show loading state\n        container.innerHTML = '<au-spinner></au-spinner>';\n\n        try {\n            // Check cache first\n            if (this.#pageCache.has(route)) {\n                container.innerHTML = this.#pageCache.get(route);\n                this.emit('au-page-loaded', { route });\n                return;\n            }\n\n            // Fetch page HTML\n            const url = `${this.#basePath}/${route}.html`;\n            const response = await fetch(url);\n\n            if (!response.ok) {\n                throw new Error(`Page not found: ${route}`);\n            }\n\n            const pageHtml = await response.text();\n\n            // Parse the au-page and extract template content\n            const parser = new DOMParser();\n            const doc = parser.parseFromString(pageHtml, 'text/html');\n            const muPage = doc.querySelector('au-page');\n\n            if (muPage) {\n                const template = muPage.querySelector('template');\n                const content = template ? template.innerHTML : muPage.innerHTML;\n\n                // Sanitize and cache\n                const sanitized = this._sanitizePageContent(content);\n                this.#pageCache.set(route, sanitized);\n                container.innerHTML = sanitized;\n\n                // Load dependencies\n                const deps = muPage.querySelector('script[type=\"x-dependencies\"]');\n                if (deps) {\n                    await this.#loadDependencies(deps.textContent);\n                }\n\n                // Update page title\n                const title = muPage.getAttribute('title');\n                if (title) {\n                    document.title = `${title} | AgentUI`;\n                }\n            } else {\n                // Sanitize: use textContent to prevent XSS from untrusted HTML\n                container.textContent = pageHtml;\n            }\n\n            this.emit('au-page-loaded', { route });\n\n        } catch (error) {\n            container.innerHTML = html`\n        <au-alert variant=\"error\">\n          <strong>Page not found</strong>\n          <p>Could not load page: ${route}</p>\n        </au-alert>\n      `;\n            this.emit('au-page-error', { route, error });\n        }\n    }\n\n    /**\n     * Sanitize page HTML content before innerHTML injection.\n     * Strips dangerous elements and attributes to prevent XSS.\n     * @param {string} html - Raw HTML content from fetched page\n     * @returns {string} Sanitized HTML\n     */\n    _sanitizePageContent(htmlContent) {\n        // Use DOMParser for safe parsing (does NOT execute scripts)\n        let doc;\n        if (typeof DOMParser !== 'undefined') {\n            const parser = new DOMParser();\n            doc = parser.parseFromString(htmlContent, 'text/html');\n        } else {\n            // linkedom fallback for test environments\n            const container = document.createElement('div');\n            container.innerHTML = htmlContent;\n            doc = { body: container };\n        }\n\n        // Remove dangerous elements\n        const dangerousSelectors = 'script, iframe, object, embed, base, meta[http-equiv]';\n        doc.body.querySelectorAll(dangerousSelectors).forEach(el => el.remove());\n\n        // Remove dangerous attributes from all elements\n        const allElements = doc.body.querySelectorAll('*');\n        for (const el of allElements) {\n            const attrs = [...el.attributes];\n            for (const attr of attrs) {\n                // Remove all event handler attributes\n                if (attr.name.startsWith('on')) {\n                    el.removeAttribute(attr.name);\n                }\n                // Remove srcdoc (iframe XSS vector)\n                if (attr.name === 'srcdoc') {\n                    el.removeAttribute(attr.name);\n                }\n                // Block javascript: URIs in href/src/action/formaction\n                if (['href', 'src', 'action', 'formaction'].includes(attr.name)) {\n                    if (attr.value.trim().toLowerCase().startsWith('javascript:')) {\n                        el.removeAttribute(attr.name);\n                    }\n                }\n            }\n        }\n\n        return doc.body.innerHTML;\n    }\n\n    /**\n     * Dynamically import component dependencies declared in a page.\n     * @private\n     * @param {string} depsText - Newline/comma-separated component tag names.\n     */\n    async #loadDependencies(depsText) {\n        const deps = depsText\n            .split(/[\\n,]/)\n            .map(d => d.trim())\n            .filter(d => d && /^au-[a-z0-9-]+$/.test(d));  // R3: strict validation\n\n        // Load each component\n        for (const dep of deps) {\n            // Skip if already defined\n            if (customElements.get(dep)) continue;\n\n            try {\n                await import(`/dist/components/${dep}.js`);\n            } catch (e) {\n                console.warn(`[au-router] Could not load: ${dep}`, e);\n            }\n        }\n    }\n\n    // Public API\n    navigate(route) {\n        window.location.hash = route;\n    }\n\n    get currentRoute() {\n        return this.#currentRoute;\n    }\n}\n\ndefine('au-router', AuRouter);\nexport { AuRouter };\n",
    "/**\n * au-page - Self-contained page component\n * \n * Features:\n * - Declares route and title\n * - Declares dependencies (for auto-bundling)\n * - Contains template HTML\n * \n * Usage in pages/*.html:\n * \n *   <au-page route=\"buttons\" title=\"Buttons\">\n *     <script type=\"x-dependencies\">\n *       au-button\n *       au-tabs\n *     </script>\n *     \n *     <template>\n *       <h1>Buttons</h1>\n *       ...\n *     </template>\n *   </au-page>\n * \n * @agent-pattern\n * When creating a new page, create a single file in app/pages/\n * with this structure. The build system will auto-generate route bundles.\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Self-contained page component declaring route, title, and dependencies.\n *\n * @class\n * @extends AuElement\n * @element au-page\n * @slot default - Page template with `<template>` and `<script type=\"x-dependencies\">`\n */\nclass AuPage extends AuElement {\n    static baseClass = 'au-page';\n    /** @type {string[]} */\n    static observedAttributes = ['route', 'title'];\n\n    /**\n     * Route path for this page.\n     * @type {string}\n     */\n    get route() {\n        return this.attr('route', '');\n    }\n    /**\n     * Page title.\n     * @type {string}\n     */\n    get pageTitle() {\n        return this.attr('title', '');\n    }\n    /**\n     * Parsed list of `au-*` component dependencies.\n     * @type {string[]}\n     */\n    get dependencies() {\n        const script = this.querySelector('script[type=\"x-dependencies\"]');\n        if (!script) return [];\n\n        return script.textContent\n            .split(/[\\n,]/)\n            .map(d => d.trim())\n            .filter(d => d && d.startsWith('au-'));\n    }\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        // If rendered directly (not via router), render template\n        if (this.querySelector('template')) {\n            this.render();\n        }\n    }\n\n    /** @override */\n    render() {\n        const template = this.querySelector('template');\n        if (template) {\n            // Clone template content\n            const content = template.content.cloneNode(true);\n\n            // Clear and append\n            const script = this.querySelector('script[type=\"x-dependencies\"]');\n            this.innerHTML = '';\n            if (script) this.appendChild(script); // Keep deps for debugging\n            this.appendChild(content);\n        }\n    }\n}\n\ndefine('au-page', AuPage);\nexport { AuPage };\n",
    "/**\n * @fileoverview au-theme-toggle - Theme Switch Component\n * \n * Usage: <au-theme-toggle></au-theme-toggle>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\nimport { Theme } from '../core/theme.js';\nimport { bus, UIEvents, registerComponent } from '../core/bus.js';\n\n/**\n * Toggle button that switches between light and dark themes\n * via the `Theme` service. Updates its icon on theme changes.\n *\n * @class\n * @extends AuElement\n * @element au-theme-toggle\n */\nexport class AuThemeToggle extends AuElement {\n    static baseClass = 'au-theme-toggle';\n\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        // Use framework's listen() - automatically prevents duplicates via AbortController reuse\n        this.listen(this, 'click', () => Theme.toggle());\n\n        // Update icon when theme changes\n        bus.on(UIEvents.THEME_CHANGE, () => this.#updateIcon());\n    }\n\n    /** @override */\n    render() {\n        this.innerHTML = html`\n            <button class=\"au-theme-toggle__button\" aria-label=\"Toggle theme\">\n                <span class=\"au-theme-toggle__icon\"></span>\n            </button>\n        `;\n        this.#updateIcon();\n    }\n\n    /**\n     * Sync the toggle icon with the current theme state.\n     * @private\n     */\n    #updateIcon() {\n        const isDark = Theme.get() === 'dark';\n        const icon = this.querySelector('.au-theme-toggle__icon');\n        if (icon) {\n            icon.textContent = isDark ? '☀️' : '🌙';\n        }\n    }\n}\n\ndefine('au-theme-toggle', AuThemeToggle);\n\n// Register component capabilities for AI agent discovery\nregisterComponent('au-theme-toggle', {\n    signals: [UIEvents.THEME_CHANGE],\n    options: {\n        themes: ['light', 'dark'],\n        emits: ['click']\n    },\n    description: 'Theme toggle button that switches between light/dark modes'\n});\n",
    "/**\n * au-splash.js - Instant Splash Screen Component\n * \n * 2026: Eliminates janky first-paint on slow hardware.\n * - Renders immediately with inline critical CSS (zero JS blocking)\n * - Auto-hides on au-ready event\n * - Smooth fade transition\n * - Respects prefers-reduced-motion\n * \n * @example\n * <au-splash logo=\"logo.svg\" duration=\"300\"></au-splash>\n * <div id=\"app\">...</div>\n */\n\nimport { AuElement } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\n\n/**\n * Instant splash screen with inline critical CSS for zero-JS first paint.\n * Auto-hides on the `au-ready` event with a configurable fade transition.\n * Respects `prefers-reduced-motion`.\n *\n * @class\n * @extends AuElement\n * @element au-splash\n */\nexport class AuSplash extends AuElement {\n    static get observedAttributes() {\n        return ['logo', 'duration', 'delay', 'spinner'];\n    }\n\n    static baseClass = 'au-splash';\n    static cssFile = 'splash';\n\n    // Skip containment - splash needs to be full screen\n    static useContainment = false;\n\n\n    constructor() {\n        super();\n        this._startTime = Date.now();\n        this._hidden = false;\n    }\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        // Inject critical CSS immediately for instant render\n        this._injectCriticalCSS();\n\n        // Render splash\n        this.render();\n\n        // Listen for au-ready event\n        this.listen(document, 'au-ready', () => this._hide(), { once: true });\n\n        // Fallback timeout (in case au-ready never fires)\n        const maxWait = parseInt(this.getAttribute('max-wait')) || 10000;\n        this.setTimeout(() => {\n            if (!this._hidden) {\n                console.warn('[au-splash] Timeout waiting for au-ready, hiding anyway');\n                this._hide();\n            }\n        }, maxWait);\n    }\n\n    /**\n     * Inject critical CSS inline for instant render (no FOUC)\n     */\n    _injectCriticalCSS() {\n        if (document.getElementById('au-splash-critical')) return;\n\n        const style = document.createElement('style');\n        style.id = 'au-splash-critical';\n        style.textContent = `\n            au-splash {\n                position: fixed;\n                inset: 0;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                gap: 24px;\n                background: var(--md-sys-color-surface, #FFFBFE);\n                z-index: 99999;\n                opacity: 1;\n                transition: opacity var(--au-splash-duration, 300ms) ease-out;\n            }\n            au-splash.au-splash--hidden {\n                opacity: 0;\n                pointer-events: none;\n            }\n            au-splash .au-splash__spinner {\n                width: 48px;\n                height: 48px;\n                border: 4px solid var(--md-sys-color-primary, #6750A4);\n                border-top-color: transparent;\n                border-radius: 50%;\n                animation: au-splash-spin 1s linear infinite;\n            }\n            au-splash .au-splash__logo {\n                max-width: 120px;\n                max-height: 120px;\n                object-fit: contain;\n            }\n            @keyframes au-splash-spin {\n                to { transform: rotate(360deg); }\n            }\n            @media (prefers-reduced-motion: reduce) {\n                au-splash { transition: none; }\n                au-splash .au-splash__spinner { animation: none; opacity: 0.6; }\n            }\n            [data-theme=\"dark\"] au-splash,\n            :root[data-theme=\"dark\"] au-splash {\n                background: var(--md-sys-color-surface, #141218);\n            }\n        `;\n        document.head.insertBefore(style, document.head.firstChild);\n    }\n\n    /** @override */\n    render() {\n        const logo = this.getAttribute('logo');\n        const showSpinner = this.getAttribute('spinner') !== 'false';\n        const duration = parseInt(this.getAttribute('duration')) || 300;\n\n        // Set CSS variable for duration\n        this.style.setProperty('--au-splash-duration', `${duration}ms`);\n\n        this.innerHTML = html`\n            ${logo ? html`<img class=\"au-splash__logo\" src=\"${logo}\" alt=\"Loading...\">` : ''}\n            ${showSpinner ? safe('<div class=\"au-splash__spinner\" role=\"progressbar\" aria-label=\"Loading\"></div>') : ''}\n        `;\n    }\n\n    /**\n     * Hide splash with fade animation\n     */\n    _hide() {\n        if (this._hidden) return;\n        this._hidden = true;\n\n        const delay = parseInt(this.getAttribute('delay')) || 0;\n        const elapsed = Date.now() - this._startTime;\n        const remainingDelay = Math.max(0, delay - elapsed);\n\n        this.setTimeout(() => {\n            const duration = parseInt(this.getAttribute('duration')) || 300;\n\n            // Add hidden class for fade\n            this.classList.add('au-splash--hidden');\n\n            // Remove from DOM after transition\n            this.setTimeout(() => {\n                this.remove();\n            }, duration);\n        }, remainingDelay);\n    }\n}\n\n// Register immediately (not deferred) for instant availability\nif (!customElements.get('au-splash')) {\n    customElements.define('au-splash', AuSplash);\n}\n",
    "/**\n * @fileoverview au-virtual-list - Virtual List Component for Large Datasets\n * \n * Renders only visible items for lists with thousands of elements.\n * \n * Usage:\n * <au-virtual-list \n *     item-height=\"50\"\n *     .items=\"${largeArray}\"\n *     .renderItem=\"${(item) => `<div>${item.name}</div>`}\">\n * </au-virtual-list>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { throttle } from '../core/render.js';\n\nimport { html } from '../core/utils.js';\n\n/**\n * Virtual-scrolling list that renders only the visible slice of a dataset.\n * Uses throttled scroll handling and optional `scheduler.yield()` batching\n * for large lists to prevent INP degradation.\n *\n * @class\n * @extends AuElement\n * @element au-virtual-list\n */\nexport class AuVirtualList extends AuElement {\n    static baseClass = 'au-virtual-list';\n    static cssFile = null; // CSS is inline/JS only\n    static observedAttributes = ['item-height', 'buffer'];\n\n    // Data\n\n    /** @private */\n    #items = [];\n    /** @private */\n    #renderItem = (item) => html`<div>${item}</div>`;\n\n    /** @private */\n    #scrollTop = 0;\n    /** @private */\n    #visibleStart = 0;\n    /** @private */\n    #visibleEnd = 0;\n\n    /** @private @type {HTMLElement|null} */\n    #container = null;\n    /** @private @type {HTMLElement|null} */\n    #content = null;\n\n    set items(arr) {\n        this.#items = arr || [];\n        this.#updateVisibleRange();\n    }\n\n    get items() {\n        return this.#items;\n    }\n\n    /**\n     * Set custom render function for items.\n     * @param {(item: *, index: number) => string} fn - Must return safe HTML.\n     * @warning XSS: Use the html tagged template to auto-escape user data.\n     *   import { html } from 'agentui/core/utils.js';\n     *   list.renderItem = (item) => html`<div>${item.name}</div>`;\n     */\n    set renderItem(fn) {\n        this.#renderItem = fn;\n        this.#updateVisibleRange();\n    }\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Note: scroll listener is attached in render() to the internal viewport container\n    }\n\n    /** @override */\n    render() {\n        const itemHeight = parseInt(this.attr('item-height', '50'));\n\n        this.innerHTML = `\n            <div class=\"au-virtual-list__viewport\" style=\"\n                height: 100%;\n                overflow-y: auto;\n                position: relative;\n            \">\n                <div class=\"au-virtual-list__content\" style=\"\n                    position: relative;\n                \">\n                    <div class=\"au-virtual-list__items\"></div>\n                </div>\n            </div>\n        `;\n\n        this.#container = this.querySelector('.au-virtual-list__viewport');\n        this.#content = this.querySelector('.au-virtual-list__content');\n\n        // Throttled scroll handler - attached to the viewport container where scroll occurs\n        const handleScroll = throttle(() => {\n            this.#scrollTop = this.#container.scrollTop;\n            this.#updateVisibleRange();\n        }, 16); // ~60fps\n\n        this.listen(this.#container, 'scroll', handleScroll);\n\n        this.style.display = 'block';\n        this.style.height = '400px';\n        this.style.overflow = 'hidden';\n\n        this.#updateVisibleRange();\n    }\n\n    /**\n     * Recalculate visible item range and trigger re-render if changed.\n     * @private\n     */\n    #updateVisibleRange() {\n        if (!this.#container || !this.#items.length) return;\n\n        const itemHeight = parseInt(this.attr('item-height', '50'));\n        const buffer = parseInt(this.attr('buffer', '5'));\n        const viewportHeight = this.#container.clientHeight;\n\n        // Calculate visible range\n        const totalHeight = this.#items.length * itemHeight;\n        this.#content.style.height = `${totalHeight}px`;\n\n        const start = Math.max(0, Math.floor(this.#scrollTop / itemHeight) - buffer);\n        const visibleCount = Math.ceil(viewportHeight / itemHeight) + buffer * 2;\n        const end = Math.min(this.#items.length, start + visibleCount);\n\n        // Only re-render if range changed\n        if (start !== this.#visibleStart || end !== this.#visibleEnd) {\n            this.#visibleStart = start;\n            this.#visibleEnd = end;\n            this.#renderVisibleItems();\n        }\n    }\n\n    /**\n     * Render only the items within the current visible range.\n     * Uses `scheduler.yield()` for large batches to keep the page responsive.\n     * @private\n     */\n    async #renderVisibleItems() {\n        const itemHeight = parseInt(this.attr('item-height', '50'));\n        const itemsContainer = this.querySelector('.au-virtual-list__items');\n\n        if (!itemsContainer) return;\n\n        // Render only visible items\n        const visibleItems = this.#items.slice(this.#visibleStart, this.#visibleEnd);\n\n        // For large batches, use scheduler.yield to prevent INP degradation\n        // (Per 2024 Chrome Core Web Vitals research)\n        const BATCH_SIZE = 50;\n        const useYield = visibleItems.length > BATCH_SIZE && 'scheduler' in window;\n\n        if (useYield) {\n            // Batch render with yields for responsiveness\n            const fragments = [];\n            for (let batch = 0; batch < visibleItems.length; batch += BATCH_SIZE) {\n                const batchItems = visibleItems.slice(batch, batch + BATCH_SIZE);\n\n                fragments.push(...batchItems.map((item, i) => {\n                    const index = this.#visibleStart + batch + i;\n                    const top = index * itemHeight;\n                    return `\n                        <div class=\"au-virtual-list__item\" style=\"\n                            position: absolute;\n                            top: ${top}px;\n                            left: 0;\n                            right: 0;\n                            height: ${itemHeight}px;\n                        \" data-index=\"${index}\" data-au-state=\"visible\">\n                            ${this.#renderItem(item, index)}\n                        </div>\n                    `;\n                }));\n\n                // Yield to browser between batches\n                if (batch + BATCH_SIZE < visibleItems.length) {\n                    await scheduler.yield();\n                }\n            }\n            itemsContainer.innerHTML = fragments.join('');\n        } else {\n            // Standard render for small lists\n            itemsContainer.innerHTML = visibleItems.map((item, i) => {\n                const index = this.#visibleStart + i;\n                const top = index * itemHeight;\n\n                return `\n                    <div class=\"au-virtual-list__item\" style=\"\n                        position: absolute;\n                        top: ${top}px;\n                        left: 0;\n                        right: 0;\n                        height: ${itemHeight}px;\n                    \" data-index=\"${index}\" data-au-state=\"visible\">\n                        ${this.#renderItem(item, index)}\n                    </div>\n                `;\n            }).join('');\n        }\n    }\n\n    /**\n     * Scroll to specific index\n     */\n    scrollToIndex(index) {\n        const itemHeight = parseInt(this.attr('item-height', '50'));\n        this.#container.scrollTop = index * itemHeight;\n    }\n}\n\ndefine('au-virtual-list', AuVirtualList);\n",
    "/**\n * @fileoverview au-lazy - Lazy Loading Component\n * \n * Defers rendering until element is visible in viewport.\n * Uses IntersectionObserver for efficient detection.\n * \n * Usage:\n * <au-lazy>\n *     <template>\n *         <heavy-component></heavy-component>\n *     </template>\n *     <div slot=\"placeholder\">Loading...</div>\n * </au-lazy>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * Defers rendering of child content until the element enters the viewport.\n * Uses `IntersectionObserver` for efficient, non-blocking detection.\n *\n * @class\n * @extends AuElement\n * @element au-lazy\n * @fires au-loaded - Emitted when content is loaded into the DOM.\n * @slot placeholder - Content shown before the element becomes visible.\n */\nexport class AuLazy extends AuElement {\n    static baseClass = 'au-lazy';\n    static observedAttributes = ['root-margin', 'threshold'];\n\n\n    /** @private @type {IntersectionObserver|null} */\n    #observer = null;\n    /** @private */\n    #loaded = false;\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        const rootMargin = this.attr('root-margin', '200px');\n        const threshold = parseFloat(this.attr('threshold', '0'));\n\n        this.#observer = new IntersectionObserver((entries) => {\n            if (entries[0].isIntersecting && !this.#loaded) {\n                this.#load();\n            }\n        }, {\n            rootMargin,\n            threshold\n        });\n\n        this.#observer.observe(this);\n    }\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        this.#observer?.disconnect();\n    }\n\n    /** @override */\n    render() {\n        // Show placeholder initially\n        const placeholder = this.querySelector('[slot=\"placeholder\"]');\n        if (placeholder) {\n            placeholder.style.display = 'block';\n        }\n\n        // Hide template\n        const template = this.querySelector('template');\n        if (template) {\n            template.style.display = 'none';\n        }\n    }\n\n    /**\n     * Clone template content into the DOM, remove placeholder, and emit `au-loaded`.\n     * @private\n     */\n    #load() {\n        this.#loaded = true;\n        this.#observer?.disconnect();\n\n        const template = this.querySelector('template');\n        const placeholder = this.querySelector('[slot=\"placeholder\"]');\n\n        if (template) {\n            // Clone and append template content\n            const content = template.content.cloneNode(true);\n            this.appendChild(content);\n            template.remove();\n        }\n\n        if (placeholder) {\n            placeholder.remove();\n        }\n\n        this.emit('au-loaded');\n        this.classList.add('is-loaded');\n    }\n\n    /**\n     * Force load immediately\n     */\n    load() {\n        if (!this.#loaded) {\n            this.#load();\n        }\n    }\n}\n\ndefine('au-lazy', AuLazy);\n",
    "/**\n * @fileoverview au-repeat - Efficient List Rendering with Keyed Diffing\n * \n * Renders arrays efficiently by only updating changed items.\n * Uses key-based reconciliation like React/Vue.\n * \n * Usage:\n * <au-repeat id=\"list\"></au-repeat>\n * \n * const list = document.getElementById('list');\n * list.items = users;\n * list.keyFn = (user) => user.id;\n * list.renderItem = (user) => `<div>${user.name}</div>`;\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { scheduler } from '../core/render.js';\nimport { html } from '../core/utils.js';\n\n/**\n * Efficient list renderer with key-based reconciliation.\n * Only updates DOM nodes whose data has changed, similar to React/Vue keyed lists.\n *\n * @class\n * @extends AuElement\n * @element au-repeat\n */\nexport class AuRepeat extends AuElement {\n    static baseClass = 'au-repeat';\n    static observedAttributes = [];\n\n\n    /** @private */\n    #items = [];\n    /** @private */\n    #keyFn = (item, index) => index;\n    /** @private */\n    #renderItem = (item) => html`<div>${JSON.stringify(item)}</div>`;\n    /** @private key → DOM element cache */\n    #itemNodes = new Map(); // key -> DOM element\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        // ML1: Clear DOM references to prevent memory leak\n        this.#itemNodes.clear();\n    }\n\n    set items(arr) {\n        const oldItems = this.#items;\n        this.#items = arr || [];\n\n        // Schedule batched update\n        scheduler.schedule(() => this.#reconcile(oldItems));\n    }\n\n    get items() {\n        return this.#items;\n    }\n\n    set keyFn(fn) {\n        this.#keyFn = fn;\n    }\n\n    /**\n     * Set custom render function for items.\n     * @param {(item: *, index: number) => string} fn - Must return safe HTML.\n     * @warning XSS: Use the html tagged template to auto-escape user data.\n     *   import { html } from 'agentui/core/utils.js';\n     *   list.renderItem = (item) => html`<div>${item.name}</div>`;\n     */\n    set renderItem(fn) {\n        this.#renderItem = fn;\n    }\n\n    /** @override */\n    render() {\n        this.style.display = 'contents';\n    }\n\n    /**\n     * Efficient reconciliation — only updates changed items.\n     * @private\n     * @param {Array} oldItems - Previous items array for diff.\n     */\n    #reconcile(oldItems) {\n        const newKeys = new Set();\n        const fragment = document.createDocumentFragment();\n\n        // Build set of new keys\n        for (let i = 0; i < this.#items.length; i++) {\n            const key = this.#keyFn(this.#items[i], i);\n            newKeys.add(key);\n        }\n\n        // Remove items that no longer exist\n        for (const [key, node] of this.#itemNodes) {\n            if (!newKeys.has(key)) {\n                node.remove();\n                this.#itemNodes.delete(key);\n            }\n        }\n\n        // Add/update items\n        let prevNode = null;\n\n        for (let i = 0; i < this.#items.length; i++) {\n            const item = this.#items[i];\n            const key = this.#keyFn(item, i);\n\n            let node = this.#itemNodes.get(key);\n\n            if (!node) {\n                // Create new node\n                const wrapper = document.createElement('div');\n                wrapper.innerHTML = this.#renderItem(item, i);\n                node = wrapper.firstElementChild || wrapper;\n                node.dataset.muKey = key;\n                this.#itemNodes.set(key, node);\n            } else {\n                // Update existing node content\n                const newContent = this.#renderItem(item, i);\n                if (node.outerHTML !== newContent) {\n                    const wrapper = document.createElement('div');\n                    wrapper.innerHTML = newContent;\n                    const newNode = wrapper.firstElementChild || wrapper;\n                    newNode.dataset.muKey = key;\n                    node.replaceWith(newNode);\n                    this.#itemNodes.set(key, newNode);\n                    node = newNode;\n                }\n            }\n\n            // Position correctly\n            if (prevNode) {\n                if (node.previousElementSibling !== prevNode) {\n                    prevNode.after(node);\n                }\n            } else {\n                if (this.firstElementChild !== node) {\n                    this.prepend(node);\n                }\n            }\n\n            prevNode = node;\n        }\n    }\n\n    /**\n     * Get DOM element for a key\n     */\n    getElement(key) {\n        return this.#itemNodes.get(key);\n    }\n\n    /**\n     * Force full re-render\n     */\n    refresh() {\n        this.#itemNodes.clear();\n        this.innerHTML = '';\n        scheduler.schedule(() => this.#reconcile([]));\n    }\n}\n\ndefine('au-repeat', AuRepeat);\n",
    "/**\n * @fileoverview au-fetch - Declarative Data Fetcher Component\n * Agent-friendly component for fetching data with automatic loading/error states\n * \n * @example\n * <au-fetch url=\"/api/users\" id=\"users\">\n *     <template slot=\"loading\"><au-skeleton></au-skeleton></template>\n *     <template slot=\"error\"><au-alert variant=\"error\">${error}</au-alert></template>\n * </au-fetch>\n * \n * // Access data\n * const fetcher = document.getElementById('users');\n * fetcher.data; // The fetched data\n * fetcher.refetch(); // Re-fetch data\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\n\n/**\n * @typedef {'idle'|'loading'|'success'|'error'} FetchState\n */\n\n/**\n * @typedef {Object} FetchResult\n * @property {FetchState} state\n * @property {any} data\n * @property {Error|null} error\n */\n\n/**\n * Declarative data fetcher that manages loading, success, error, and empty states.\n * Supports auto-fetch on connect, interval polling, and custom render functions.\n *\n * @class\n * @extends AuElement\n * @element au-fetch\n * @fires au-loading - Emitted when a fetch request begins.\n * @fires au-success - Emitted on successful fetch, detail: `{ data }`.\n * @fires au-error   - Emitted on fetch failure, detail: `{ error }`.\n * @fires au-data    - Emitted when data is available for slotted rendering, detail: `{ data }`.\n * @slot loading - Template shown during fetch (default: `<au-spinner>`).\n * @slot error   - Template shown on error (default: `<au-alert variant=\"error\">`).\n * @slot empty   - Template shown when data is empty (default: `<p>No data</p>`).\n */\nexport class AuFetch extends AuElement {\n    static baseClass = 'au-fetch';\n    static observedAttributes = ['url', 'method', 'auto', 'interval'];\n\n    /** @type {FetchState} */\n\n    state = 'idle';\n\n    /** @type {any} */\n    data = null;\n\n    /** @type {Error|null} */\n    error = null;\n\n    /** @type {AbortController|null} */\n    _controller = null;\n\n    /** @type {number|null} */\n    _intervalId = null;\n\n    /** @override */\n    connectedCallback() {\n        // Store templates before render — sanitize to prevent slot template injection (R7)\n        this._loadingTemplate = this.#sanitizeSlotTemplate(\n            this.querySelector('template[slot=\"loading\"]')?.innerHTML ||\n            '<au-spinner></au-spinner>'\n        );\n        this._errorTemplate = this.#sanitizeSlotTemplate(\n            this.querySelector('template[slot=\"error\"]')?.innerHTML ||\n            '<au-alert variant=\"error\">Error loading data</au-alert>'\n        );\n        this._emptyTemplate = this.#sanitizeSlotTemplate(\n            this.querySelector('template[slot=\"empty\"]')?.innerHTML ||\n            '<p>No data</p>'\n        );\n\n        super.connectedCallback();\n\n        // Auto-fetch on connect\n        if (this.has('auto') || this.hasAttribute('url')) {\n            this.fetch();\n        }\n\n        // Setup interval refresh\n        const interval = parseInt(this.attr('interval', '0'));\n        if (interval > 0) {\n            this.setInterval(() => this.fetch(), interval);\n        }\n    }\n\n    /** @override */\n    render() {\n        // Render based on current state\n        this.innerHTML = ''; // Clear content\n\n        switch (this.state) {\n            case 'loading':\n                // Safe: _loadingTemplate is trusted or empty, but let's wrap it container\n                const loadingContainer = document.createElement('div');\n                loadingContainer.className = 'au-fetch__loading';\n                loadingContainer.innerHTML = this._loadingTemplate; // Safe: pre-sanitized by #sanitizeSlotTemplate() in connectedCallback\n                this.appendChild(loadingContainer);\n                break;\n            case 'error':\n                const errorContainer = document.createElement('div');\n                errorContainer.className = 'au-fetch__error';\n\n                // Safe: Create error message safely using textContent\n                // We don't use the template string replacement anymore to avoid XSS\n                // If user provided a custom error template, we parse it safely or just use default\n\n                const errorMessage = this.error?.message || 'Unknown error';\n\n                if (this._errorTemplate && this._errorTemplate.includes('${error}')) {\n                    // If template is complex, we might need a safer way, but for now \n                    // let's stick to safe text replacement if possible or just use textContent\n                    // Actually, simply setting textContent into the container is safest for the message\n                    errorContainer.textContent = `Error: ${errorMessage}`;\n                    // If we want to respect the slot, we'd need a safe interpolate, \n                    // but for high, security we break the unsafe template behavior for errors.\n                } else {\n                    const alert = document.createElement('au-alert');\n                    alert.setAttribute('variant', 'error');\n                    alert.textContent = errorMessage; // Safe\n                    errorContainer.appendChild(alert);\n                }\n\n                this.appendChild(errorContainer);\n                break;\n            case 'success':\n                if (!this.data || (Array.isArray(this.data) && this.data.length === 0)) {\n                    const emptyContainer = document.createElement('div');\n                    emptyContainer.className = 'au-fetch__empty';\n                    emptyContainer.innerHTML = this._emptyTemplate; // Safe: pre-sanitized by #sanitizeSlotTemplate() in connectedCallback\n                    this.appendChild(emptyContainer);\n                } else {\n                    const dataContainer = document.createElement('div');\n                    dataContainer.className = 'au-fetch__data';\n\n                    // Dataslot or renderItem function\n                    if (this.renderItem && Array.isArray(this.data)) {\n                        // WARNING: renderItem expects to return a string currently. \n                        // To be safe, we should check if it returns a Node or string.\n                        // For now we will assume string but we can sanitize it? \n                        // Actually, following the plan, we change default behavior but if user provides function\n                        // they might output HTML. \n                        // Let's implement safe node appending if possible.\n                        this.data.forEach(item => {\n                            const result = this.renderItem(item);\n                            if (result instanceof Node) {\n                                dataContainer.appendChild(result);\n                            } else {\n                                // SAFETY NOTE: renderItem is a developer-provided callback.\n                                // Like React's dangerouslySetInnerHTML, the caller is responsible\n                                // for sanitizing output. Use html`` tagged template from agentui-wc\n                                // for automatic XSS-safe rendering.\n                                dataContainer.insertAdjacentHTML('beforeend', result);\n                            }\n                        });\n                    } else {\n                        const slot = document.createElement('slot');\n                        slot.name = 'data';\n                        dataContainer.appendChild(slot);\n                        this.emit('au-data', { data: this.data });\n                    }\n                    this.appendChild(dataContainer);\n                }\n                break;\n        }\n    }\n\n    /**\n     * Fetch data from the URL\n     * @param {RequestInit} [options] - Fetch options override\n     * @returns {Promise<any>}\n     */\n    async fetch(options = {}) {\n        const url = this.attr('url', '');\n        if (!url) {\n            console.warn('au-fetch: No URL provided');\n            return null;\n        }\n\n        // Abort any in-flight request\n        if (this._controller) {\n            this._controller.abort();\n        }\n        this._controller = new AbortController();\n\n        this.state = 'loading';\n        this.error = null;\n        this.render();\n        this.emit('au-loading');\n\n        try {\n            const method = this.attr('method', 'GET');\n            const response = await fetch(url, {\n                method,\n                signal: this._controller.signal,\n                headers: {\n                    'Content-Type': 'application/json',\n                    ...options.headers\n                },\n                ...options\n            });\n\n            if (!response.ok) {\n                // If the server returns JSON error, try to parse it\n                let errorMsg = `HTTP ${response.status}: ${response.statusText}`;\n                try {\n                    const errorJson = await response.json();\n                    if (errorJson.message) errorMsg = errorJson.message;\n                } catch (e) {\n                    // Ignore json parse error\n                }\n                throw new Error(errorMsg);\n            }\n\n            this.data = await response.json();\n            this.state = 'success';\n            this.render();\n            this.emit('au-success', { data: this.data });\n            return this.data;\n        } catch (err) {\n            if (err.name === 'AbortError') {\n                return null; // Aborted, ignore\n            }\n            this.error = /** @type {Error} */ (err);\n            this.state = 'error';\n            this.render();\n            this.emit('au-error', { error: this.error });\n            return null;\n        }\n    }\n\n    /**\n     * Refetch the current URL\n     * @returns {Promise<any>}\n     */\n    refetch() {\n        return this.fetch();\n    }\n\n    /**\n     * Set custom render function for array data\n     * @param {(item: any, index: number) => string} fn\n     */\n    set renderItem(fn) {\n        this._renderItem = fn;\n    }\n\n    get renderItem() {\n        return this._renderItem;\n    }\n\n    /** @override */\n    update(attr, newValue, oldValue) {\n        if (attr === 'url' && newValue !== oldValue) {\n            this.fetch();\n        }\n    }\n\n    /** @override */\n    disconnectedCallback() {\n        super.disconnectedCallback();\n        if (this._controller) {\n            this._controller.abort();\n        }\n        // Note: setInterval cleanup now handled by AuElement via super.disconnectedCallback()\n    }\n\n    /**\n     * Sanitize slot template HTML to strip dangerous elements and attributes.\n     * Prevents template injection when attacker controls initial DOM.\n     * @private\n     * @param {string} html - Raw HTML from a slot template.\n     * @returns {string} Sanitized HTML safe for innerHTML assignment.\n     */\n    #sanitizeSlotTemplate(html) {\n        const container = document.createElement('div');\n        container.innerHTML = html;\n\n        // Remove dangerous elements\n        container.querySelectorAll('script, iframe, object, embed, base, meta[http-equiv]')\n            .forEach(el => el.remove());\n\n        // Remove dangerous attributes from all elements\n        for (const el of container.querySelectorAll('*')) {\n            for (const attr of [...el.attributes]) {\n                if (attr.name.startsWith('on')) {\n                    el.removeAttribute(attr.name);\n                }\n                if (attr.name === 'srcdoc') {\n                    el.removeAttribute(attr.name);\n                }\n                if (['href', 'src', 'action', 'formaction'].includes(attr.name) &&\n                    attr.value.trim().toLowerCase().startsWith('javascript:')) {\n                    el.removeAttribute(attr.name);\n                }\n            }\n        }\n\n        return container.innerHTML;\n    }\n}\n\ndefine('au-fetch', AuFetch);\n",
    "/**\n * au-datatable.js - Smart Data Table Component\n * \n * AI-First data table with built-in sorting, pagination, and filtering.\n * Designed to minimize boilerplate code when displaying tabular data.\n * \n * @example\n * <au-datatable\n *     columns='[\n *         {\"field\": \"name\", \"label\": \"Name\", \"sortable\": true},\n *         {\"field\": \"email\", \"label\": \"Email\"},\n *         {\"field\": \"role\", \"label\": \"Role\", \"filterable\": true}\n *     ]'\n *     page-size=\"10\"\n *     sortable>\n * </au-datatable>\n * \n * <script>\n *     document.querySelector('au-datatable').setData(usersArray);\n * </script>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\nimport { debounce } from '../core/render.js';\n\n/**\n * AI-first smart data table with sorting, pagination, filtering, and row selection.\n *\n * @class\n * @extends AuElement\n * @element au-datatable\n * @fires au-data-change      - After `setData()`, detail: `{ data, count }`\n * @fires au-sort-change       - After sorting, detail: `{ field, direction }`\n * @fires au-page-change       - After pagination, detail: page info object\n * @fires au-selection-change  - After selection, detail: `{ selected }`\n */\nexport class AuDataTable extends AuElement {\n    /** @type {string[]} */\n    static get observedAttributes() {\n        return ['columns', 'page-size', 'sortable', 'selectable', 'filterable', 'empty-message'];\n    }\n\n    static baseClass = 'au-datatable';\n    static cssFile = 'datatable';\n\n\n    constructor() {\n        super();\n\n        // Internal state\n        this._data = [];\n        this._filteredData = [];\n        this._columns = [];\n        this._currentPage = 1;\n        this._sortField = null;\n        this._sortDirection = 'asc';\n        this._selectedRows = new Set();\n        this._filterValue = '';\n    }\n\n    // === PROPERTIES ===\n\n    get columns() {\n        const attr = this.getAttribute('columns');\n        if (attr) {\n            try {\n                return JSON.parse(attr);\n            } catch (e) {\n                console.warn('[au-datatable] Invalid columns JSON:', e);\n                return [];\n            }\n        }\n        return this._columns;\n    }\n\n    set columns(value) {\n        this._columns = Array.isArray(value) ? value : [];\n        if (this.isConnected) this.render();\n    }\n\n    get pageSize() {\n        return parseInt(this.getAttribute('page-size')) || 10;\n    }\n\n    set pageSize(value) {\n        this.setAttribute('page-size', value);\n    }\n\n    get sortable() {\n        return this.hasAttribute('sortable');\n    }\n\n    get selectable() {\n        return this.hasAttribute('selectable');\n    }\n\n    get filterable() {\n        return this.hasAttribute('filterable');\n    }\n\n    get emptyMessage() {\n        return this.getAttribute('empty-message') || 'No data available';\n    }\n\n    // === LIFECYCLE ===\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n    }\n\n    /** @override */\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (this.isConnected && oldVal !== newVal) {\n            this.render();\n        }\n    }\n\n    // === PUBLIC API ===\n\n    /**\n     * Set table data programmatically\n     * @param {Array<Object>} data - Array of row objects\n     */\n    setData(data) {\n        this._data = Array.isArray(data) ? data : [];\n        this._filteredData = [...this._data];\n        this._currentPage = 1;\n        this._selectedRows.clear();\n        this._applySort();\n        this.render();\n\n        this.emit('au-data-change', { data: this._data, count: this._data.length }, { bubbles: true });\n    }\n\n    /**\n     * Get current data\n     * @returns {Array<Object>}\n     */\n    getData() {\n        return [...this._data];\n    }\n\n    /**\n     * Get current sort state\n     * @returns {{ field: string|null, direction: 'asc'|'desc' }}\n     */\n    getSortState() {\n        return { field: this._sortField, direction: this._sortDirection };\n    }\n\n    /**\n     * Get selected rows\n     * @returns {Array<Object>}\n     */\n    getSelectedRows() {\n        return this._data.filter((_, idx) => this._selectedRows.has(idx));\n    }\n\n    /**\n     * Get current page info\n     * @returns {{ page: number, pageSize: number, totalPages: number, totalRows: number }}\n     */\n    getPageInfo() {\n        const totalPages = Math.ceil(this._filteredData.length / this.pageSize);\n        return {\n            page: this._currentPage,\n            pageSize: this.pageSize,\n            totalPages,\n            totalRows: this._filteredData.length\n        };\n    }\n\n    /**\n     * Go to specific page\n     * @param {number} page\n     */\n    goToPage(page) {\n        const maxPage = Math.ceil(this._filteredData.length / this.pageSize) || 1;\n        this._currentPage = Math.max(1, Math.min(page, maxPage));\n        this.render();\n\n        this.emit('au-page-change', this.getPageInfo(), { bubbles: true });\n    }\n\n    /**\n     * Sort by field\n     * @param {string} field\n     * @param {'asc'|'desc'} [direction]\n     */\n    sortBy(field, direction) {\n        if (this._sortField === field && !direction) {\n            this._sortDirection = this._sortDirection === 'asc' ? 'desc' : 'asc';\n        } else {\n            this._sortField = field;\n            this._sortDirection = direction || 'asc';\n        }\n        this._applySort();\n        this.render();\n\n        this.emit('au-sort-change', this.getSortState(), { bubbles: true });\n    }\n\n    /**\n     * Filter data\n     * @param {string} query\n     */\n    filter(query) {\n        this._filterValue = query.toLowerCase();\n        this._applyFilter();\n        this._currentPage = 1;\n        this.render(false); // Partial render - preserve search input focus\n    }\n\n    // === INTERNAL METHODS ===\n\n    /** @private */\n    _applySort() {\n        if (!this._sortField) return;\n\n        this._filteredData.sort((a, b) => {\n            const valA = a[this._sortField] ?? '';\n            const valB = b[this._sortField] ?? '';\n\n            // Handle different types\n            if (typeof valA === 'number' && typeof valB === 'number') {\n                return this._sortDirection === 'asc' ? valA - valB : valB - valA;\n            }\n\n            const strA = String(valA).toLowerCase();\n            const strB = String(valB).toLowerCase();\n            const result = strA.localeCompare(strB);\n            return this._sortDirection === 'asc' ? result : -result;\n        });\n    }\n\n    /** @private */\n    _applyFilter() {\n        if (!this._filterValue) {\n            this._filteredData = [...this._data];\n            return;\n        }\n\n        const filterableColumns = this.columns.filter(c => c.filterable !== false);\n        const fields = filterableColumns.length > 0\n            ? filterableColumns.map(c => c.field)\n            : this.columns.map(c => c.field);\n\n        this._filteredData = this._data.filter(row => {\n            return fields.some(field => {\n                const value = String(row[field] ?? '').toLowerCase();\n                return value.includes(this._filterValue);\n            });\n        });\n    }\n\n    /** @private */\n    _getPageData() {\n        const start = (this._currentPage - 1) * this.pageSize;\n        const end = start + this.pageSize;\n        return this._filteredData.slice(start, end);\n    }\n\n    /** @private */\n    _handleHeaderClick(field) {\n        const column = this.columns.find(c => c.field === field);\n        if (column?.sortable !== false && this.sortable) {\n            this.sortBy(field);\n        }\n    }\n\n    /** @private */\n    _handleRowSelect(index, checked) {\n        const actualIndex = (this._currentPage - 1) * this.pageSize + index;\n        if (checked) {\n            this._selectedRows.add(actualIndex);\n        } else {\n            this._selectedRows.delete(actualIndex);\n        }\n        this.render();\n\n        this.emit('au-selection-change', { selected: this.getSelectedRows() }, { bubbles: true });\n    }\n\n    /** @private */\n    _handleSelectAll(checked) {\n        const pageData = this._getPageData();\n        const startIdx = (this._currentPage - 1) * this.pageSize;\n\n        pageData.forEach((_, idx) => {\n            if (checked) {\n                this._selectedRows.add(startIdx + idx);\n            } else {\n                this._selectedRows.delete(startIdx + idx);\n            }\n        });\n\n        this.render();\n\n        this.emit('au-selection-change', { selected: this.getSelectedRows() }, { bubbles: true });\n    }\n\n    /** @override */\n    render(fullRender = true) {\n        const columns = this.columns;\n        const pageData = this._getPageData();\n        const { page, totalPages, totalRows } = this.getPageInfo();\n        const startIdx = (this._currentPage - 1) * this.pageSize;\n\n        // Check if all current page items are selected\n        const allSelected = pageData.length > 0 &&\n            pageData.every((_, idx) => this._selectedRows.has(startIdx + idx));\n\n        // Surgical update: only update tbody and info if already rendered\n        const existingTbody = this.querySelector('.au-datatable-table tbody');\n        const existingFooter = this.querySelector('.au-datatable-footer');\n\n        if (!fullRender && existingTbody) {\n            // Update only the parts that changed\n            existingTbody.innerHTML = this._renderTbody(pageData, columns, startIdx, allSelected);\n\n            if (existingFooter) {\n                existingFooter.innerHTML = this._renderFooterContent(page, totalPages, totalRows);\n            }\n\n            this._attachEventListeners();\n            return;\n        }\n\n        // Full render\n        this.innerHTML = html`\n            <div class=\"au-datatable-wrapper\">\n                ${this.filterable ? html`\n                    <div class=\"au-datatable-toolbar\">\n                        <div class=\"au-datatable-search\">\n                            <input \n                                type=\"search\" \n                                placeholder=\"Search...\" \n                                value=\"${this._filterValue}\"\n                            >\n                        </div>\n                    </div>\n                ` : ''}\n\n                <table class=\"au-datatable-table\">\n                    <thead>\n                        <tr>\n                            ${this.selectable ? html`\n                                <th class=\"au-datatable-checkbox-cell\">\n                                    <input \n                                        type=\"checkbox\" \n                                        ${allSelected ? 'checked' : ''}\n                                        data-select-all\n                                    >\n                                </th>\n                            ` : ''}\n                            ${safe(columns.map(col => {\n            const isSortable = col.sortable !== false && this.sortable;\n            const isSorted = this._sortField === col.field;\n            const sortIcon = isSorted\n                ? (this._sortDirection === 'asc' ? '↑' : '↓')\n                : '↕';\n            return html`\n                                    <th \n                                        class=\"${isSortable ? 'au-datatable-sortable' : ''} ${isSorted ? 'au-datatable-sorted' : ''}\"\n                                        data-field=\"${col.field}\"\n                                    >\n                                        ${col.label || col.field}\n                                        ${isSortable ? safe(`<span class=\"au-datatable-sort-icon\">${sortIcon}</span>`) : ''}\n                                    </th>\n                                `;\n        }).join(''))}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${safe(this._renderTbody(pageData, columns, startIdx, allSelected))}\n                    </tbody>\n                </table>\n\n                ${safe(this._renderFooter(page, totalPages, totalRows))}\n            </div>\n        `;\n\n        this._attachEventListeners();\n    }\n\n    /** @private */\n    _renderTbody(pageData, columns, startIdx, allSelected) {\n        if (pageData.length === 0) {\n            return html`\n                <tr>\n                    <td colspan=\"${columns.length + (this.selectable ? 1 : 0)}\" class=\"au-datatable-empty-state\">\n                        ${this.emptyMessage}\n                    </td>\n                </tr>\n            `;\n        }\n\n        return pageData.map((row, idx) => {\n            const actualIdx = startIdx + idx;\n            const isSelected = this._selectedRows.has(actualIdx);\n\n            return html`\n                <tr class=\"${isSelected ? 'au-datatable-selected' : ''}\" data-row-index=\"${idx}\">\n                    ${this.selectable ? html`\n                        <td class=\"au-datatable-checkbox-cell\">\n                            <input \n                                type=\"checkbox\" \n                                ${isSelected ? 'checked' : ''}\n                                data-row-select=\"${idx}\"\n                            >\n                        </td>\n                    ` : ''}\n                    ${safe(columns.map(col => html`\n                        <td data-field=\"${col.field}\">\n                            ${col.render ? safe(col.render(row[col.field], row)) : (row[col.field] ?? '')}\n                        </td>\n                    `).join(''))}\n                </tr>\n            `;\n        }).join('');\n    }\n\n    /** @private */\n    _renderFooter(page, totalPages, totalRows) {\n        return `\n            <div class=\"au-datatable-footer\">\n                ${this._renderFooterContent(page, totalPages, totalRows)}\n            </div>\n        `;\n    }\n\n    /** @private */\n    _renderFooterContent(page, totalPages, totalRows) {\n        const selectedCount = this._selectedRows.size;\n        const selectionBadge = selectedCount > 0 ? `<span class=\"au-datatable-selected-count\">${selectedCount} selected</span>` : '';\n\n        if (totalPages <= 1) {\n            return `\n                <span class=\"au-datatable-footer-info\">${totalRows} row${totalRows !== 1 ? 's' : ''}</span>\n                ${selectionBadge}\n            `;\n        }\n\n        return `\n            ${selectionBadge}\n            <span class=\"au-datatable-footer-info\">${(page - 1) * this.pageSize + 1}–${Math.min(page * this.pageSize, totalRows)} of ${totalRows}</span>\n            <button class=\"au-datatable-nav-btn\" data-page=\"prev\" ${page <= 1 ? 'disabled' : ''} aria-label=\"Previous page\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\"/></svg>\n            </button>\n            <button class=\"au-datatable-nav-btn\" data-page=\"next\" ${page >= totalPages ? 'disabled' : ''} aria-label=\"Next page\">\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\"/></svg>\n            </button>\n        `;\n    }\n\n    /** @private */\n    _attachEventListeners() {\n        // Header click for sorting\n        this.querySelectorAll('th.au-datatable-sortable').forEach(th => {\n            this.listen(th, 'click', () => {\n                this._handleHeaderClick(th.dataset.field);\n            });\n        });\n\n        // Pagination (MD3: prev/next only)\n        this.querySelectorAll('[data-page]').forEach(btn => {\n            this.listen(btn, 'click', () => {\n                const page = btn.dataset.page;\n                if (page === 'prev') {\n                    this.goToPage(this._currentPage - 1);\n                } else if (page === 'next') {\n                    this.goToPage(this._currentPage + 1);\n                }\n            });\n        });\n\n        // Row selection\n        this.querySelectorAll('[data-row-select]').forEach(cb => {\n            this.listen(cb, 'change', (e) => {\n                this._handleRowSelect(parseInt(cb.dataset.rowSelect), e.target.checked);\n            });\n        });\n\n        // Select all\n        const selectAll = this.querySelector('[data-select-all]');\n        if (selectAll) {\n            this.listen(selectAll, 'change', (e) => {\n                this._handleSelectAll(e.target.checked);\n            });\n        }\n\n        // Search/filter\n        const searchInput = this.querySelector('.au-datatable-search input');\n        if (searchInput) {\n            const debouncedFilter = debounce((value) => this.filter(value), 300);\n            this.listen(searchInput, 'input', (e) => debouncedFilter(e.target.value));\n        }\n    }\n}\n\ndefine('au-datatable', AuDataTable);\n",
    "/**\n * au-schema-form.js - Auto-Generated Forms from JSON Schema\n * \n * AI-First form component that generates AgentUI form fields automatically\n * from a JSON Schema definition. Dramatically reduces boilerplate for form creation.\n * \n * @example\n * <au-schema-form id=\"user-form\"></au-schema-form>\n * \n * <script>\n *     const form = document.getElementById('user-form');\n *     form.schema = {\n *         type: 'object',\n *         properties: {\n *             name: { type: 'string', title: 'Full Name', minLength: 2 },\n *             email: { type: 'string', format: 'email', title: 'Email' },\n *             role: { type: 'string', enum: ['user', 'admin'], title: 'Role' },\n *             active: { type: 'boolean', title: 'Active', default: true }\n *         },\n *         required: ['name', 'email']\n *     };\n *     \n *     form.addEventListener('au-submit', (e) => {\n *         console.log('Form data:', e.detail); // debug\n *     });\n * </script>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\n\n/**\n * Auto-generates AgentUI form fields from a JSON Schema definition.\n * Supports string, number, boolean, and enum types with built-in validation.\n *\n * @class\n * @extends AuElement\n * @element au-schema-form\n * @fires au-submit  - Emitted on valid form submit, detail is the values object.\n * @fires au-reset   - Emitted on form reset, detail: `{ values }`.\n * @fires au-change  - Emitted on field change, detail: `{ field, value, values }`.\n */\nexport class AuSchemaForm extends AuElement {\n    static get observedAttributes() {\n        return ['submit-label', 'reset-label', 'inline', 'readonly', 'disabled'];\n    }\n\n    static baseClass = 'au-schema-form';\n    static cssFile = 'schema-form';\n\n\n    constructor() {\n        super();\n\n        this._schema = null;\n        this._values = {};\n        this._errors = {};\n        this._touched = {};\n    }\n\n    // === PROPERTIES ===\n\n    get schema() {\n        return this._schema;\n    }\n\n    set schema(value) {\n        this._schema = value;\n        this._initializeValues();\n        if (this.isConnected) this.render();\n    }\n\n    get submitLabel() {\n        return this.getAttribute('submit-label') || 'Submit';\n    }\n\n    get resetLabel() {\n        return this.getAttribute('reset-label') || 'Reset';\n    }\n\n    get inline() {\n        return this.hasAttribute('inline');\n    }\n\n    get readonly() {\n        return this.hasAttribute('readonly');\n    }\n\n    get disabled() {\n        return this.hasAttribute('disabled');\n    }\n\n    // === LIFECYCLE ===\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n    }\n\n    /** @override */\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (this.isConnected && oldVal !== newVal) {\n            this.render();\n        }\n    }\n\n    // === PUBLIC API ===\n\n    /**\n     * Get current form values\n     * @returns {Object}\n     */\n    getValues() {\n        return { ...this._values };\n    }\n\n    /**\n     * Set form values\n     * @param {Object} values\n     */\n    setValues(values) {\n        this._values = { ...this._values, ...values };\n        this.render();\n    }\n\n    /**\n     * Validate all fields\n     * @returns {boolean} True if valid\n     */\n    validate() {\n        if (!this._schema || !this._schema.properties) return true;\n\n        this._errors = {};\n        const required = this._schema.required || [];\n\n        for (const [field, def] of Object.entries(this._schema.properties)) {\n            const value = this._values[field];\n            const errors = this._validateField(field, value, def, required.includes(field));\n            if (errors.length > 0) {\n                this._errors[field] = errors;\n            }\n        }\n\n        this.render();\n        return Object.keys(this._errors).length === 0;\n    }\n\n    /**\n     * Get validation errors\n     * @returns {Object}\n     */\n    getErrors() {\n        return { ...this._errors };\n    }\n\n    /**\n     * Reset form to default values\n     */\n    reset() {\n        this._initializeValues();\n        this._errors = {};\n        this._touched = {};\n        this.render();\n\n        this.emit('au-reset', { values: this.getValues() }, { bubbles: true });\n    }\n\n    /**\n     * Submit the form programmatically\n     */\n    submit() {\n        if (this.validate()) {\n            this.emit('au-submit', this.getValues(), { bubbles: true });\n        }\n    }\n\n    // === INTERNAL METHODS ===\n\n    /**\n     * Initialize form values from schema defaults.\n     * @private\n     */\n    _initializeValues() {\n        this._values = {};\n        if (!this._schema || !this._schema.properties) return;\n\n        for (const [field, def] of Object.entries(this._schema.properties)) {\n            if (def.default !== undefined) {\n                this._values[field] = def.default;\n            } else if (def.type === 'boolean') {\n                this._values[field] = false;\n            } else if (def.type === 'number' || def.type === 'integer') {\n                this._values[field] = null;\n            } else {\n                this._values[field] = '';\n            }\n        }\n    }\n\n    /**\n     * Validate a single field against its schema definition.\n     * @private\n     * @param {string} field - Field name.\n     * @param {*} value - Current field value.\n     * @param {Object} def - JSON Schema field definition.\n     * @param {boolean} isRequired - Whether the field is required.\n     * @returns {string[]} Array of error messages.\n     */\n    _validateField(field, value, def, isRequired) {\n        const errors = [];\n\n        // Required check\n        if (isRequired && (value === '' || value === null || value === undefined)) {\n            errors.push(`${def.title || field} is required`);\n            return errors;\n        }\n\n        if (value === '' || value === null || value === undefined) return errors;\n\n        // Type-specific validation\n        if (def.type === 'string') {\n            if (def.minLength && value.length < def.minLength) {\n                errors.push(`Minimum ${def.minLength} characters`);\n            }\n            if (def.maxLength && value.length > def.maxLength) {\n                errors.push(`Maximum ${def.maxLength} characters`);\n            }\n            if (def.pattern) {\n                try {\n                    if (!new RegExp(def.pattern).test(value)) {\n                        errors.push(def.patternError || 'Invalid format');\n                    }\n                } catch (e) {\n                    errors.push('Invalid validation pattern');\n                }\n            }\n            if (def.format === 'email' && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\n                errors.push('Invalid email address');\n            }\n            if (def.format === 'url' && !/^https?:\\/\\/.+/.test(value)) {\n                errors.push('Invalid URL');\n            }\n        }\n\n        if (def.type === 'number' || def.type === 'integer') {\n            const num = Number(value);\n            if (isNaN(num)) {\n                errors.push('Must be a number');\n            } else {\n                if (def.minimum !== undefined && num < def.minimum) {\n                    errors.push(`Minimum value is ${def.minimum}`);\n                }\n                if (def.maximum !== undefined && num > def.maximum) {\n                    errors.push(`Maximum value is ${def.maximum}`);\n                }\n            }\n        }\n\n        return errors;\n    }\n\n    /**\n     * Map JSON Schema format/type to an HTML input type.\n     * @private\n     * @param {Object} def - JSON Schema field definition.\n     * @returns {string}\n     */\n    _getInputType(def) {\n        if (def.format === 'email') return 'email';\n        if (def.format === 'password') return 'password';\n        if (def.format === 'date') return 'date';\n        if (def.format === 'time') return 'time';\n        if (def.format === 'datetime-local') return 'datetime-local';\n        if (def.format === 'url') return 'url';\n        if (def.format === 'tel') return 'tel';\n        if (def.type === 'number' || def.type === 'integer') return 'number';\n        return 'text';\n    }\n\n    /**\n     * Render a single form field based on its schema type.\n     * @private\n     * @param {string} field - Field name.\n     * @param {Object} def - JSON Schema field definition.\n     * @param {boolean} isRequired\n     * @returns {string} HTML string for the field.\n     */\n    _renderField(field, def, isRequired) {\n        const rawValue = this._values[field] ?? '';\n        const errors = this._errors[field] || [];\n        const hasError = errors.length > 0;\n\n        const label = def.title || field;\n        const placeholder = def.placeholder || '';\n        const description = def.description || '';\n        const errorMsg = hasError ? errors[0] : '';\n        const disabled = this.disabled || def.readOnly;\n        const readonly = this.readonly;\n\n        // Boolean → Switch\n        if (def.type === 'boolean') {\n            return html`\n                <div class=\"au-schema-form-field\" data-field=\"${field}\">\n                    <div class=\"au-schema-form-switch-row\">\n                        <au-switch \n                            ${rawValue ? 'checked' : ''}\n                            ${disabled ? 'disabled' : ''}\n                            data-field=\"${field}\"\n                        ></au-switch>\n                        <label class=\"au-schema-form-switch-label\">${label}</label>\n                    </div>\n                    ${description ? html`<div class=\"au-schema-form-description\">${description}</div>` : ''}\n                </div>\n            `;\n        }\n\n        // Enum → Dropdown\n        if (def.enum) {\n            const options = def.enum.map((val, i) => {\n                return html`<au-option value=\"${String(val)}\" ${rawValue === val ? 'selected' : ''}>${def.enumLabels?.[i] || String(val)}</au-option>`;\n            }).join('');\n\n            return html`\n                <div class=\"au-schema-form-field ${hasError ? 'au-schema-form-field-error' : ''}\" data-field=\"${field}\">\n                    <au-dropdown \n                        label=\"${label}${isRequired ? ' *' : ''}\"\n                        value=\"${String(rawValue)}\"\n                        ${disabled ? 'disabled' : ''}\n                        ${isRequired ? 'required' : ''}\n                        data-field=\"${field}\"\n                    >\n                        ${safe(options)}\n                    </au-dropdown>\n                    ${description ? html`<div class=\"au-schema-form-description\">${description}</div>` : ''}\n                    ${hasError ? html`<div class=\"au-schema-form-error\">${errorMsg}</div>` : ''}\n                </div>\n            `;\n        }\n\n        // Multiline string → Textarea\n        if (def.type === 'string' && def.multiline) {\n            return html`\n                <div class=\"au-schema-form-field ${hasError ? 'au-schema-form-field-error' : ''}\" data-field=\"${field}\">\n                    <au-textarea\n                        label=\"${label}${isRequired ? ' *' : ''}\"\n                        placeholder=\"${placeholder}\"\n                        ${disabled ? 'disabled' : ''}\n                        ${readonly ? 'readonly' : ''}\n                        ${isRequired ? 'required' : ''}\n                        data-field=\"${field}\"\n                    >${String(rawValue)}</au-textarea>\n                    ${description ? html`<div class=\"au-schema-form-description\">${description}</div>` : ''}\n                    ${hasError ? html`<div class=\"au-schema-form-error\">${errorMsg}</div>` : ''}\n                </div>\n            `;\n        }\n\n        // Default → Input\n        const inputType = this._getInputType(def);\n        return html`\n            <div class=\"au-schema-form-field ${hasError ? 'au-schema-form-field-error' : ''}\" data-field=\"${field}\">\n                <au-input\n                    type=\"${inputType}\"\n                    label=\"${label}${isRequired ? ' *' : ''}\"\n                    placeholder=\"${placeholder}\"\n                    value=\"${String(rawValue)}\"\n                    ${disabled ? 'disabled' : ''}\n                    ${readonly ? 'readonly' : ''}\n                    ${isRequired ? 'required' : ''}\n                    ${def.minimum !== undefined ? `min=\"${def.minimum}\"` : ''}\n                    ${def.maximum !== undefined ? `max=\"${def.maximum}\"` : ''}\n                    ${def.minLength ? `minlength=\"${def.minLength}\"` : ''}\n                    ${def.maxLength ? `maxlength=\"${def.maxLength}\"` : ''}\n                    data-field=\"${field}\"\n                ></au-input>\n                ${description ? html`<div class=\"au-schema-form-description\">${description}</div>` : ''}\n                ${hasError ? html`<div class=\"au-schema-form-error\">${errorMsg}</div>` : ''}\n            </div>\n        `;\n    }\n\n    /** @override */\n    render() {\n        if (!this._schema || !this._schema.properties) {\n            this.innerHTML = html`\n                <div class=\"au-schema-form-empty-state\">\n                    ${safe('Set the <code>schema</code> property to generate a form')}\n                </div>\n            `;\n            return;\n        }\n\n        const required = this._schema.required || [];\n        const fields = Object.entries(this._schema.properties)\n            .map(([field, def]) => this._renderField(field, def, required.includes(field)))\n            .join('');\n\n        this.innerHTML = html`\n            <div class=\"au-schema-form ${this.inline ? 'au-schema-form-inline' : ''}\">\n                ${safe(fields)}\n                \n                <div class=\"au-schema-form-actions\">\n                    <au-button variant=\"filled\" data-action=\"submit\" ${this.disabled ? 'disabled' : ''}>\n                        ${this.submitLabel}\n                    </au-button>\n                    <au-button variant=\"text\" data-action=\"reset\" ${this.disabled ? 'disabled' : ''}>\n                        ${this.resetLabel}\n                    </au-button>\n                </div>\n            </div>\n        `;\n\n        this._attachEventListeners();\n    }\n\n    /**\n     * Attach change/input listeners to all generated form controls.\n     * @private\n     */\n    _attachEventListeners() {\n        // Input changes\n        this.querySelectorAll('au-input').forEach(input => {\n            this.listen(input, 'au-input', (e) => {\n                const field = input.dataset.field;\n                this._values[field] = e.detail.value;\n                this._touched[field] = true;\n\n                // Clear error on edit\n                if (this._errors[field]) {\n                    delete this._errors[field];\n                    input.closest('.au-schema-form-field').classList.remove('au-schema-form-field-error');\n                    input.closest('.au-schema-form-field').querySelector('.au-schema-form-error')?.remove();\n                }\n\n                this.emit('au-change', { field, value: e.detail.value, values: this.getValues() }, { bubbles: true });\n            });\n        });\n\n        // Textarea changes\n        this.querySelectorAll('au-textarea').forEach(textarea => {\n            this.listen(textarea, 'au-input', (e) => {\n                const field = textarea.dataset.field;\n                this._values[field] = e.detail.value;\n                this._touched[field] = true;\n\n                this.emit('au-change', { field, value: e.detail.value, values: this.getValues() }, { bubbles: true });\n            });\n        });\n\n        // Dropdown changes\n        this.querySelectorAll('au-dropdown').forEach(dropdown => {\n            this.listen(dropdown, 'au-change', (e) => {\n                const field = dropdown.dataset.field;\n                this._values[field] = e.detail.value;\n                this._touched[field] = true;\n\n                this.emit('au-change', { field, value: e.detail.value, values: this.getValues() }, { bubbles: true });\n            });\n        });\n\n        // Switch changes\n        this.querySelectorAll('au-switch').forEach(sw => {\n            this.listen(sw, 'au-change', (e) => {\n                const field = sw.dataset.field;\n                this._values[field] = e.detail.checked;\n                this._touched[field] = true;\n\n                this.emit('au-change', { field, value: e.detail.checked, values: this.getValues() }, { bubbles: true });\n            });\n        });\n    }\n\n    /**\n     * Handle actions from AuElement's centralized event delegation\n     */\n    handleAction(action, target, event) {\n        if (action === 'submit') {\n            this.submit();\n        } else if (action === 'reset') {\n            this.reset();\n        }\n    }\n}\n\ndefine('au-schema-form', AuSchemaForm);\n",
    "/**\n * au-prompt-ui.js - AI Agent Prompt UI Components\n * \n * Specialized components for AI agent interfaces:\n * - au-prompt-input: Enhanced text input with submit button and loading states\n * - au-code-block: Syntax-highlighted code display with copy button\n * - au-agent-toolbar: Action buttons for AI responses (copy, regenerate, etc.)\n * - au-message-bubble: Chat message bubbles with role-based styling\n * \n * @example\n * <au-prompt-input placeholder=\"Ask anything...\" loading></au-prompt-input>\n * \n * <au-message-bubble role=\"user\">\n *   How do I sort an array?\n * </au-message-bubble>\n * \n * <au-message-bubble role=\"assistant\">\n *   Here's how to sort an array:\n *   <au-code-block language=\"javascript\">\n *     const sorted = array.sort((a, b) => a - b);\n *   </au-code-block>\n *   <au-agent-toolbar></au-agent-toolbar>\n * </au-message-bubble>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\n\n// ============================================\n// AU-PROMPT-INPUT\n// ============================================\n/**\n * Enhanced text input with submit button, loading spinner, and multiline support.\n * Designed for AI agent prompt interfaces.\n *\n * @class\n * @extends AuElement\n * @element au-prompt-input\n * @fires au-submit - Emitted on submit, detail: `{ value }`.\n * @fires au-input  - Emitted on input change, detail: `{ value }`.\n */\nexport class AuPromptInput extends AuElement {\n    static get observedAttributes() {\n        return ['placeholder', 'loading', 'disabled', 'multiline'];\n    }\n\n    static baseClass = 'au-prompt-input';\n    static cssFile = 'prompt-ui';\n\n\n    constructor() {\n        super();\n        this._value = '';\n    }\n\n    get placeholder() {\n        return this.getAttribute('placeholder') || 'Type a message...';\n    }\n\n    get loading() {\n        return this.hasAttribute('loading');\n    }\n\n    set loading(val) {\n        if (val) this.setAttribute('loading', '');\n        else this.removeAttribute('loading');\n    }\n\n    get disabled() {\n        return this.hasAttribute('disabled');\n    }\n\n    get multiline() {\n        return this.hasAttribute('multiline');\n    }\n\n    get value() {\n        return this._value;\n    }\n\n    set value(val) {\n        this._value = val;\n        const input = this.querySelector('.au-prompt-input-field');\n        if (input) input.value = val;\n    }\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n    }\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (!this.isConnected || oldVal === newVal) return;\n        // Surgical update: don't destroy DOM (preserves user's input value)\n        const container = this.querySelector('.au-prompt-input-container');\n        if (!container) {\n            this.render();\n            return;\n        }\n        switch (name) {\n            case 'loading': {\n                container.classList.toggle('au-prompt-input-loading', this.loading);\n                const submitBtn = this.querySelector('.au-prompt-input-submit');\n                if (submitBtn) {\n                    submitBtn.disabled = this.disabled || this.loading;\n                    submitBtn.innerHTML = this.loading\n                        ? '<div class=\"au-prompt-input-spinner\"></div>'\n                        : '<svg viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/></svg>';\n                }\n                break;\n            }\n            case 'disabled': {\n                const input = this.querySelector('.au-prompt-input-field');\n                const submitBtn = this.querySelector('.au-prompt-input-submit');\n                if (input) input.disabled = this.disabled;\n                if (submitBtn) submitBtn.disabled = this.disabled || this.loading;\n                break;\n            }\n            case 'placeholder': {\n                const input = this.querySelector('.au-prompt-input-field');\n                if (input) input.placeholder = this.placeholder;\n                break;\n            }\n            default:\n                this.render();\n        }\n    }\n\n    /**\n     * Submit current value if valid.\n     * @private\n     */\n    _submit() {\n        if (this.loading || this.disabled || !this._value.trim()) return;\n\n        this.dispatchEvent(new CustomEvent('au-submit', {\n            bubbles: true,\n            detail: { value: this._value.trim() }\n        }));\n    }\n\n    /**\n     * Handle keyboard shortcuts (Enter to submit).\n     * @private\n     * @param {KeyboardEvent} e\n     */\n    _handleKeydown(e) {\n        if (e.key === 'Enter' && !e.shiftKey && !this.multiline) {\n            e.preventDefault();\n            this._submit();\n        } else if (e.key === 'Enter' && e.metaKey) {\n            e.preventDefault();\n            this._submit();\n        }\n    }\n\n    /** @override */\n    render() {\n        const isTextarea = this.multiline;\n        const placeholder = this.placeholder;\n\n        this.innerHTML = html`\n            <div class=\"au-prompt-input-container ${this.loading ? 'au-prompt-input-loading' : ''}\">\n                ${isTextarea\n                ? html`<textarea class=\"au-prompt-input-field\" placeholder=\"${placeholder}\" ${this.disabled ? 'disabled' : ''}></textarea>`\n                : html`<input class=\"au-prompt-input-field\" type=\"text\" placeholder=\"${placeholder}\" ${this.disabled ? 'disabled' : ''} />`\n            }\n                <button class=\"au-prompt-input-submit\" ${this.disabled || this.loading ? 'disabled' : ''}>\n                    ${this.loading\n                ? '<div class=\"au-prompt-input-spinner\"></div>'\n                : '<svg viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/></svg>'\n            }\n                </button>\n            </div>\n        `;\n\n        const input = this.querySelector('.au-prompt-input-field');\n        const submitBtn = this.querySelector('.au-prompt-input-submit');\n\n        input.value = this._value;\n        this.listen(input, 'input', (e) => {\n            this._value = e.target.value;\n            this.dispatchEvent(new CustomEvent('au-input', {\n                bubbles: true,\n                detail: { value: this._value }\n            }));\n        });\n        this.listen(input, 'keydown', (e) => this._handleKeydown(e));\n        this.listen(submitBtn, 'click', () => this._submit());\n    }\n}\n\n// ============================================\n// AU-CODE-BLOCK\n// ============================================\n/**\n * Syntax-highlighted code display with copy-to-clipboard button.\n *\n * @class\n * @extends AuElement\n * @element au-code-block\n */\nexport class AuCodeBlock extends AuElement {\n    static get observedAttributes() {\n        return ['language', 'filename'];\n    }\n\n    static baseClass = 'au-code-block';\n\n    constructor() {\n        super();\n    }\n\n    get language() {\n        return this.getAttribute('language') || 'text';\n    }\n\n    get filename() {\n        return this.getAttribute('filename');\n    }\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n    }\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (this.isConnected && oldVal !== newVal) {\n            this.render();\n        }\n    }\n\n    /**\n     * Copy code content to clipboard.\n     * @private\n     */\n    async _copy() {\n        // Read ONLY from the <code> element, not the entire component textContent\n        const codeEl = this.querySelector('code');\n        const code = codeEl ? codeEl.textContent.trim() : '';\n        try {\n            await navigator.clipboard.writeText(code);\n            const btn = this.querySelector('.au-code-block-copy-btn');\n            btn.textContent = '✓ Copied';\n            this.setTimeout(() => {\n                btn.textContent = 'Copy';\n            }, 2000);\n        } catch (e) {\n            console.error('Failed to copy:', e);\n        }\n    }\n\n    /** @override */\n    render() {\n        const code = this.textContent.trim();\n\n        this.innerHTML = html`\n            <div class=\"au-code-block-container\">\n                <div class=\"au-code-block-header\">\n                    ${this.filename\n                ? html`<span class=\"au-code-block-filename\">${this.filename}</span>`\n                : html`<span class=\"au-code-block-language\">${this.language}</span>`\n            }\n                    <button class=\"au-code-block-copy-btn\">Copy</button>\n                </div>\n                <pre class=\"au-code-block-pre\"><code>${code}</code></pre>\n            </div>\n        `;\n\n        this.listen(this.querySelector('.au-code-block-copy-btn'), 'click', () => this._copy());\n    }\n\n    // Using html tagged template from core/utils.js for XSS safety\n}\n\n// ============================================\n// AU-AGENT-TOOLBAR\n// ============================================\n/**\n * Toolbar with action buttons (copy, regenerate, thumbs up/down) for AI responses.\n *\n * @class\n * @extends AuElement\n * @element au-agent-toolbar\n * @fires au-action - Emitted on button click, detail: `{ action }`.\n */\nexport class AuAgentToolbar extends AuElement {\n    static get observedAttributes() {\n        return ['actions'];\n    }\n\n    static baseClass = 'au-agent-toolbar';\n\n    constructor() {\n        super();\n    }\n\n    get actions() {\n        const attr = this.getAttribute('actions');\n        return attr ? attr.split(',').map(a => a.trim()) : ['copy', 'regenerate', 'thumbsUp', 'thumbsDown'];\n    }\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        this.render();\n    }\n\n\n\n    /** @override */\n    render() {\n        const actionButtons = {\n            copy: { icon: '📋', label: 'Copy' },\n            regenerate: { icon: '🔄', label: 'Regenerate' },\n            thumbsUp: { icon: '👍', label: 'Good response' },\n            thumbsDown: { icon: '👎', label: 'Poor response' },\n            edit: { icon: '✏️', label: 'Edit' },\n            share: { icon: '↗️', label: 'Share' }\n        };\n\n        const buttons = this.actions\n            .filter(a => actionButtons[a])\n            .map(a => html`\n                <button class=\"au-agent-toolbar-btn\" data-action=\"${a}\" title=\"${actionButtons[a].label}\">\n                    ${safe(actionButtons[a].icon)}\n                </button>\n            `);\n\n        this.innerHTML = html`${buttons}`;\n    }\n\n    /**\n     * Handle actions from AuElement's centralized event delegation\n     */\n    handleAction(action, target, event) {\n        this.dispatchEvent(new CustomEvent('au-action', {\n            bubbles: true,\n            detail: { action }\n        }));\n    }\n}\n\n// ============================================\n// AU-MESSAGE-BUBBLE\n// ============================================\n/**\n * Chat message bubble with role-based styling, avatar, and timestamp.\n *\n * @class\n * @extends AuElement\n * @element au-message-bubble\n */\nexport class AuMessageBubble extends AuElement {\n    static get observedAttributes() {\n        return ['role', 'avatar', 'name', 'timestamp'];\n    }\n\n    static baseClass = 'au-message-bubble';\n\n    constructor() {\n        super();\n        this._originalContent = null;\n    }\n\n    get role() {\n        return this.getAttribute('role') || 'user';\n    }\n\n    get avatar() {\n        return this.getAttribute('avatar');\n    }\n\n    get name() {\n        return this.getAttribute('name') || (this.role === 'user' ? 'You' : 'Assistant');\n    }\n\n    get timestamp() {\n        return this.getAttribute('timestamp');\n    }\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Capture original children before render\n        if (!this._originalContent) {\n            this._originalContent = Array.from(this.childNodes);\n        }\n        this.render();\n    }\n\n    attributeChangedCallback(name, oldVal, newVal) {\n        if (this.isConnected && oldVal !== newVal) {\n            this.render();\n        }\n    }\n\n    /** @override */\n    render() {\n        const isUser = this.role === 'user';\n        const defaultAvatar = isUser ? '👤' : '🤖';\n        const roleClass = isUser ? 'au-message-bubble-user' : 'au-message-bubble-assistant';\n\n        // Create structure\n        const message = document.createElement('div');\n        message.className = `au-message-bubble-message ${roleClass}`;\n\n        // Avatar\n        const avatar = document.createElement('div');\n        avatar.className = `au-message-bubble-avatar ${roleClass}`;\n        if (this.avatar) {\n            const img = document.createElement('img');\n            img.src = this.avatar;\n            img.alt = this.name;\n            avatar.appendChild(img);\n        } else {\n            avatar.textContent = defaultAvatar;\n        }\n        message.appendChild(avatar);\n\n        // Content wrapper\n        const content = document.createElement('div');\n        content.className = 'au-message-bubble-content';\n\n        // Header\n        const header = document.createElement('div');\n        header.className = `au-message-bubble-header ${roleClass}`;\n        const nameSpan = document.createElement('span');\n        nameSpan.className = 'au-message-bubble-name';\n        nameSpan.textContent = this.name;\n        header.appendChild(nameSpan);\n        if (this.timestamp) {\n            const timestampSpan = document.createElement('span');\n            timestampSpan.className = 'au-message-bubble-timestamp';\n            timestampSpan.textContent = this.timestamp;\n            header.appendChild(timestampSpan);\n        }\n        content.appendChild(header);\n\n        // Bubble with original content\n        const bubble = document.createElement('div');\n        bubble.className = `au-message-bubble-bubble ${roleClass}`;\n        if (this._originalContent) {\n            this._originalContent.forEach(child => bubble.appendChild(child.cloneNode(true)));\n        }\n        content.appendChild(bubble);\n\n        message.appendChild(content);\n\n        // Set HTML\n        this.innerHTML = '';\n        this.appendChild(message);\n    }\n}\n\n// Register all components\ndefine('au-prompt-input', AuPromptInput);\ndefine('au-code-block', AuCodeBlock);\ndefine('au-agent-toolbar', AuAgentToolbar);\ndefine('au-message-bubble', AuMessageBubble);\n",
    "/**\n * @fileoverview au-error-boundary - Error Boundary Component\n * \n * Catches rendering errors in child components and displays fallback UI.\n * Critical for large-scale applications where one component error\n * should not crash the entire application.\n * \n * Based on 2024 enterprise error recovery patterns.\n * \n * Usage:\n * <au-error-boundary fallback=\"<p>Something went wrong</p>\">\n *     <au-complex-widget></au-complex-widget>\n * </au-error-boundary>\n * \n * With error handler:\n * <au-error-boundary onerror=\"customHandler(event.detail)\">\n *     <au-data-table :items=\"${data}\"></au-data-table>\n * </au-error-boundary>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html } from '../core/utils.js';\n\n/**\n * Global error registry for agent observability\n * @type {Array<{timestamp: number, component: string, error: Error, context: Object}>}\n */\nconst errorRegistry = [];\n\n/**\n * Get all caught errors for agent debugging\n * @returns {Array<Object>}\n */\nexport function getErrors() {\n    return [...errorRegistry];\n}\n\n/**\n * Clear error registry\n */\nexport function clearErrors() {\n    errorRegistry.length = 0;\n}\n\n/**\n * Error boundary that catches rendering failures in child components\n * and displays a recoverable fallback UI. Maintains a global error\n * registry for agent observability.\n *\n * @class\n * @extends AuElement\n * @element au-error-boundary\n * @fires au-error   - Emitted when an error is caught, detail: `{ error, boundary, recover }`.\n * @fires au-recover - Emitted after successful recovery.\n */\nexport class AuErrorBoundary extends AuElement {\n    static baseClass = 'au-error-boundary';\n    static observedAttributes = ['fallback'];\n\n\n    /** @private */\n    #hasError = false;\n    /** @private @type {Error|null} */\n    #error = null;\n    /** @private */\n    #originalContent = '';\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n\n        // Store original content for potential recovery\n        this.#originalContent = this.innerHTML;\n\n        // Listen for errors from child components\n        this.listen(this, 'error', this.#handleError.bind(this));\n\n        // Also catch unhandled errors from child scripts\n        // Uses this.listen() for automatic cleanup via AbortController on disconnect\n        // Multiple boundaries can coexist — each has its own listener\n        this.listen(window, 'error', (e) => {\n            if (this.#isErrorFromChild(e.error)) {\n                this.#handleError({ detail: { error: e.error, message: e.message } });\n                e.preventDefault();\n            }\n        });\n    }\n\n    /**\n     * Best-effort heuristic to determine if an error originated from a child component.\n     * @private\n     * @param {Error} error\n     * @returns {boolean}\n     */\n    #isErrorFromChild(error) {\n        // Best-effort check if error is from child component\n        if (!error?.stack) return false;\n\n        const childTags = Array.from(this.querySelectorAll('*'))\n            .filter(el => el.tagName.startsWith('AU-'))\n            .map(el => el.tagName.toLowerCase());\n\n        return childTags.some(tag => error.stack.includes(tag));\n    }\n\n    /**\n     * Process a caught error: register it, render fallback, and emit `au-error`.\n     * @private\n     * @param {Event|CustomEvent} event\n     */\n    #handleError(event) {\n        const error = event?.detail?.error || event?.error || event;\n\n        if (this.#hasError) return; // Already showing fallback\n\n        this.#hasError = true;\n        this.#error = error;\n\n        // Register error for agent observability\n        errorRegistry.push({\n            timestamp: Date.now(),\n            component: this.id || 'au-error-boundary',\n            error: {\n                message: error?.message || String(error),\n                stack: error?.stack,\n                name: error?.name\n            },\n            context: {\n                originalContent: this.#originalContent.slice(0, 200),\n                parentUrl: window.location.href\n            }\n        });\n\n        // Keep only last 50 errors\n        if (errorRegistry.length > 50) {\n            errorRegistry.shift();\n        }\n\n        // Show fallback UI\n        this.#renderFallback();\n\n        // Emit event for custom handling\n        this.emit('au-error', {\n            error,\n            boundary: this,\n            recover: () => this.recover()\n        });\n\n        // Prevent event propagation\n        event?.stopPropagation?.();\n    }\n\n    /**\n     * Replace children with fallback UI (custom or default).\n     * @private\n     */\n    #renderFallback() {\n        const fallback = this.getAttribute('fallback');\n\n        if (fallback) {\n            // Security: treat fallback attribute as text, not raw HTML\n            // For HTML fallback, use the au-error event handler instead\n            const fallbackEl = document.createElement('div');\n            fallbackEl.className = 'au-error-boundary__fallback';\n            fallbackEl.setAttribute('role', 'alert');\n            fallbackEl.textContent = fallback;\n            this.innerHTML = '';\n            this.appendChild(fallbackEl);\n        } else {\n            // Default fallback UI\n            this.innerHTML = html`\n                <div class=\"au-error-boundary__fallback\" role=\"alert\" aria-live=\"polite\">\n                    <au-icon name=\"error\" style=\"--au-icon-size: 48px; color: var(--md-sys-color-error);\"></au-icon>\n                    <p class=\"au-error-boundary__title\">Something went wrong</p>\n                    <p class=\"au-error-boundary__message\">${this.#error?.message || 'An unexpected error occurred'}</p>\n                    <au-button variant=\"outlined\" onclick=\"this.closest('au-error-boundary').recover()\">\n                        Try Again\n                    </au-button>\n                </div>\n            `;\n        }\n\n        this.classList.add('has-error');\n    }\n\n    /** @override */\n    render() {\n        // Apply base styles\n        this.style.display = 'block';\n    }\n\n    /**\n     * Attempt to recover by restoring original content\n     */\n    recover() {\n        this.#hasError = false;\n        this.#error = null;\n        this.classList.remove('has-error');\n        this.innerHTML = this.#originalContent;\n\n        this.emit('au-recover');\n    }\n\n    /**\n     * Check if boundary is currently showing error\n     */\n    get hasError() {\n        return this.#hasError;\n    }\n\n    /**\n     * Get the current error\n     */\n    get error() {\n        return this.#error;\n    }\n}\n\ndefine('au-error-boundary', AuErrorBoundary);\n",
    "/**\n * @fileoverview au-code - Code Block Component with Syntax Highlighting\n * \n * Usage: <au-code language=\"html\">...</au-code>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\n\n/**\n * Code block with built-in syntax highlighting and copy-to-clipboard.\n *\n * @class\n * @extends AuElement\n * @element au-code\n */\nexport class AuCode extends AuElement {\n    static baseClass = 'au-code';\n    /** @type {string[]} */\n    static observedAttributes = ['language'];\n\n    /**\n     * ML2: Reusable element for HTML entity decoding.\n     * Replaces DOMParser which creates a full HTMLDocument per render.\n     * Using a div is safe: setting innerHTML on a detached element\n     * does not execute scripts. Reading textContent is pure text extraction.\n     */\n    static #decoder = null;\n\n    /** @private */\n    static #decodeEntities(html) {\n        if (typeof document === 'undefined') return html;\n        if (!AuCode.#decoder) {\n            AuCode.#decoder = document.createElement('div');\n        }\n        AuCode.#decoder.innerHTML = html;\n        const decoded = AuCode.#decoder.textContent;\n        AuCode.#decoder.innerHTML = ''; // Clear for GC\n        return decoded;\n    }\n\n\n    #originalCode = null;\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Store original code before render\n        if (!this.#originalCode && !this.querySelector('.au-code__content')) {\n            this.#originalCode = this.textContent;\n        }\n    }\n\n    /** @override */\n    render() {\n        // Idempotent: skip if already rendered\n        if (this.querySelector('.au-code__content')) {\n            return;\n        }\n\n        const language = this.attr('language', 'html');\n\n        // Get raw code - use innerHTML to preserve any pre-escaped entities\n        // textContent would decode &lt; to < which we don't want\n        const rawCode = this.#originalCode || this.innerHTML;\n\n        // First decode any HTML entities that might already be in the content\n        // This handles cases where the HTML source uses &lt; &gt; etc.\n        // ML2: Use reusable textarea instead of DOMParser (avoids full HTMLDocument allocation per render)\n        const decodedCode = AuCode.#decodeEntities(rawCode);\n\n        // Dedent: remove common leading whitespace from all lines\n        const dedentedCode = this.#dedent(decodedCode);\n\n        // Auto-indent: apply proper code formatting based on language\n        const formattedCode = this.#autoIndent(dedentedCode, language);\n\n        // Store formatted version for copy button\n        const copyableCode = formattedCode;\n\n        // Now escape for display - only &, <, > need escaping for code\n        // Do NOT escape quotes as they are safe inside <code> elements\n        const escaped = formattedCode\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;');\n\n        // Basic syntax highlighting\n        const highlighted = this.#highlight(escaped, language);\n\n        // R1 Security: sanitize highlighted output — only allow au-code__* span tags.\n        // If highlight regex somehow produces unexpected HTML, this catches it.\n        const sanitizedHighlighted = this.#sanitizeHighlighted(highlighted);\n\n        this.innerHTML = html`\n            <div class=\"au-code__header\">\n                <span class=\"au-code__language\">${language.toUpperCase()}</span>\n                <button class=\"au-code__copy\" title=\"Copy code\">\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                        <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"/>\n                        <path d=\"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1\"/>\n                    </svg>\n                </button>\n            </div>\n            <pre class=\"au-code__pre\"><code class=\"au-code__content\">${safe(sanitizedHighlighted)}</code></pre>\n        `;\n\n        this.#applyStyles();\n        this.#setupCopyButton(copyableCode);\n    }\n\n    /**\n     * R1 Security: Validate highlighted HTML output.\n     * Only allow <span class=\"au-code__*\"> opening/closing tags.\n     * Any other HTML tag is escaped to prevent mXSS.\n     * @param {string} highlightedHtml - Output from #highlight()\n     * @returns {string} Sanitized highlighted HTML\n     */\n    /** @private */\n    #sanitizeHighlighted(highlightedHtml) {\n        // Allow only: <span class=\"au-code__...\"> and </span>\n        // Escape any other tags that could have been introduced by regex mutation\n        return highlightedHtml.replace(/<(\\/?)([^>]*)>/g, (match, slash, content) => {\n            // Allow closing </span>\n            if (slash === '/' && content.trim() === 'span') return match;\n            // Allow opening <span class=\"au-code__...\">\n            if (!slash && /^span\\s+class=\"au-code__[a-z]+\"$/.test(content.trim())) return match;\n            // Escape everything else\n            return match.replace(/</g, '&lt;').replace(/>/g, '&gt;');\n        });\n    }\n\n    /** @private */\n    #highlight(code, language) {\n        // Shared marker helper to avoid regex self-matching\n        // IMPORTANT: Uses Unicode Private Use Area characters + letters to avoid\n        // collision with number regex which matches \\b\\d+\\b\n        const createHighlighter = () => {\n            const markers = [];\n            let markerIndex = 0;\n\n            const addMarker = (content, className) => {\n                // Create a truly unique marker that no highlighting regex can match:\n                // Encode the index as a single Unicode PUA character (offset by 0xE100)\n                // This way there are NO digits or word characters in the marker at all\n                const idx = markerIndex++;\n                const markerChar = String.fromCharCode(0xE100 + idx);\n                const start = String.fromCharCode(0xE000);\n                const end = String.fromCharCode(0xE001);\n                const marker = start + markerChar + end;\n                markers.push({ marker, content, className });\n                return marker;\n            };\n\n            const resolveMarkers = (result) => {\n                for (const { marker, content, className } of markers) {\n                    result = result.replace(marker, `<span class=\"${className}\">${content}</span>`);\n                }\n                return result;\n            };\n\n            return { addMarker, resolveMarkers };\n        };\n\n        // HTML highlighting\n        if (language === 'html' || language === 'xml') {\n            const { addMarker, resolveMarkers } = createHighlighter();\n            let result = code;\n\n            // HTML comments: <!-- ... -->\n            result = result.replace(/(&lt;!--[\\s\\S]*?--&gt;)/g, (match) =>\n                addMarker(match, 'au-code__comment'));\n\n            // DOCTYPE\n            result = result.replace(/(&lt;!DOCTYPE[^&]*&gt;)/gi, (match) =>\n                addMarker(match, 'au-code__keyword'));\n\n            // Strings (attribute values)\n            result = result.replace(/(\"[^\"]*\")/g, (match) =>\n                addMarker(match, 'au-code__string'));\n\n            // Attributes (name= pattern)\n            result = result.replace(/(\\s)([\\w-]+)(=)/g, (match, space, attr, eq) =>\n                `${space}${addMarker(attr, 'au-code__attr')}${eq}`);\n\n            // Tags\n            result = result.replace(/(&lt;\\/?)([\\w-]+)/g, (match, bracket, tag) =>\n                `${bracket}${addMarker(tag, 'au-code__tag')}`);\n\n            return resolveMarkers(result);\n        }\n\n        // JavaScript highlighting\n        if (language === 'javascript' || language === 'js' || language === 'typescript' || language === 'ts') {\n            const { addMarker, resolveMarkers } = createHighlighter();\n            let result = code;\n\n            // Multi-line comments /* ... */\n            result = result.replace(/(\\/\\*[\\s\\S]*?\\*\\/)/g, (match) =>\n                addMarker(match, 'au-code__comment'));\n\n            // Single-line comments\n            result = result.replace(/(\\/\\/.*)/g, (match) =>\n                addMarker(match, 'au-code__comment'));\n\n            // Template literals (backticks)\n            result = result.replace(/(`[^`]*`)/g, (match) =>\n                addMarker(match, 'au-code__string'));\n\n            // Strings\n            result = result.replace(/('[^']*'|\"[^\"]*\")/g, (match) =>\n                addMarker(match, 'au-code__string'));\n\n            // Numbers (including decimals and scientific notation)\n            result = result.replace(/\\b(\\d+\\.?\\d*(?:e[+-]?\\d+)?)\\b/gi, (match) =>\n                addMarker(match, 'au-code__number'));\n\n            // Keywords (expanded list)\n            result = result.replace(/\\b(const|let|var|function|return|if|else|for|while|do|switch|case|break|continue|class|extends|import|export|from|default|async|await|new|this|super|typeof|instanceof|in|of|try|catch|finally|throw|yield|static|get|set)\\b/g, (match) =>\n                addMarker(match, 'au-code__keyword'));\n\n            // Boolean/null/undefined\n            result = result.replace(/\\b(true|false|null|undefined|NaN|Infinity)\\b/g, (match) =>\n                addMarker(match, 'au-code__builtin'));\n\n            // Function names (word followed by parenthesis)\n            result = result.replace(/\\b([a-zA-Z_]\\w*)\\s*(?=\\()/g, (match, name) =>\n                addMarker(name, 'au-code__function'));\n\n            return resolveMarkers(result);\n        }\n\n        // CSS highlighting\n        if (language === 'css' || language === 'scss' || language === 'sass') {\n            const { addMarker, resolveMarkers } = createHighlighter();\n            let result = code;\n\n            // Comments\n            result = result.replace(/(\\/\\*[\\s\\S]*?\\*\\/)/g, (match) =>\n                addMarker(match, 'au-code__comment'));\n\n            // Strings\n            result = result.replace(/('[^']*'|\"[^\"]*\")/g, (match) =>\n                addMarker(match, 'au-code__string'));\n\n            // At-rules (@media, @keyframes, etc.)\n            result = result.replace(/(@[\\w-]+)/g, (match) =>\n                addMarker(match, 'au-code__keyword'));\n\n            // Property values with units\n            result = result.replace(/\\b(\\d+\\.?\\d*)(px|em|rem|%|vh|vw|s|ms|deg|fr)\\b/g, (match, num, unit) =>\n                `${addMarker(num, 'au-code__number')}${addMarker(unit, 'au-code__builtin')}`);\n\n            // Numbers without units\n            result = result.replace(/\\b(\\d+\\.?\\d*)\\b/g, (match) =>\n                addMarker(match, 'au-code__number'));\n\n            // Hex colors\n            result = result.replace(/(#[0-9a-fA-F]{3,8})\\b/g, (match) =>\n                addMarker(match, 'au-code__string'));\n\n            // CSS properties (word followed by colon)\n            result = result.replace(/\\b([\\w-]+)\\s*:/g, (match, prop) =>\n                `${addMarker(prop, 'au-code__attr')}:`);\n\n            // Selectors (. # or element at start of line or after comma/brace)\n            result = result.replace(/(^|[{,\\s])([.#]?[\\w-]+)(?=\\s*[{,])/gm, (match, before, selector) =>\n                `${before}${addMarker(selector, 'au-code__tag')}`);\n\n            return resolveMarkers(result);\n        }\n\n        // JSON highlighting\n        if (language === 'json') {\n            const { addMarker, resolveMarkers } = createHighlighter();\n            let result = code;\n\n            // Strings (keys will be handled separately)\n            result = result.replace(/(\"[^\"]*\")\\s*:/g, (match, key) =>\n                `${addMarker(key, 'au-code__attr')}:`);\n\n            // String values\n            result = result.replace(/:\\s*(\"[^\"]*\")/g, (match, val) =>\n                `: ${addMarker(val, 'au-code__string')}`);\n\n            // Numbers\n            result = result.replace(/:\\s*(-?\\d+\\.?\\d*)/g, (match, num) =>\n                `: ${addMarker(num, 'au-code__number')}`);\n\n            // Booleans and null\n            result = result.replace(/\\b(true|false|null)\\b/g, (match) =>\n                addMarker(match, 'au-code__builtin'));\n\n            return resolveMarkers(result);\n        }\n\n        // Shell/Bash highlighting\n        if (language === 'bash' || language === 'sh' || language === 'shell') {\n            const { addMarker, resolveMarkers } = createHighlighter();\n            let result = code;\n\n            // Comments\n            result = result.replace(/(#.*)/g, (match) =>\n                addMarker(match, 'au-code__comment'));\n\n            // Strings\n            result = result.replace(/('[^']*'|\"[^\"]*\")/g, (match) =>\n                addMarker(match, 'au-code__string'));\n\n            // Variables $VAR and ${VAR}\n            result = result.replace(/(\\$\\{?\\w+\\}?)/g, (match) =>\n                addMarker(match, 'au-code__attr'));\n\n            // Common commands\n            result = result.replace(/\\b(cd|ls|echo|cat|grep|find|sudo|npm|npx|bun|node|git|curl|wget|mkdir|rm|cp|mv|chmod|chown)\\b/g, (match) =>\n                addMarker(match, 'au-code__keyword'));\n\n            // Flags\n            result = result.replace(/(\\s)(--?[\\w-]+)/g, (match, space, flag) =>\n                `${space}${addMarker(flag, 'au-code__builtin')}`);\n\n            return resolveMarkers(result);\n        }\n\n        // No highlighting for unknown languages\n        return code;\n    }\n\n    /**\n     * Remove common leading whitespace from all lines.\n     * @private\n     */\n    #dedent(code) {\n        // Split into lines\n        let lines = code.split('\\n');\n\n        // Remove leading empty lines\n        while (lines.length > 0 && lines[0].trim() === '') {\n            lines.shift();\n        }\n        // Remove trailing empty lines\n        while (lines.length > 0 && lines[lines.length - 1].trim() === '') {\n            lines.pop();\n        }\n\n        if (lines.length === 0) return '';\n\n        // Find minimum indent across ALL non-empty lines\n        let minIndent = Infinity;\n        for (const line of lines) {\n            // Skip empty lines when calculating min indent\n            if (line.trim() === '') continue;\n\n            const match = line.match(/^(\\s*)/);\n            const indent = match ? match[1].length : 0;\n            minIndent = Math.min(minIndent, indent);\n        }\n\n        // If no common indent found, return as-is\n        if (minIndent === Infinity || minIndent === 0) {\n            return lines.join('\\n');\n        }\n\n        // Remove exactly minIndent spaces from start of each line\n        return lines.map(line => {\n            if (line.trim() === '') return ''; // Keep empty lines as empty\n            return line.slice(minIndent);\n        }).join('\\n');\n    }\n\n    /**\n     * Bracket-counting auto-indenter.\n     * @private\n     */\n    #autoIndent(code, language) {\n        const INDENT = '    '; // 4 spaces\n        const lines = code.split('\\n');\n        const result = [];\n        let indentLevel = 0;\n\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n\n            // Skip empty lines\n            if (line === '') {\n                result.push('');\n                continue;\n            }\n\n            // Calculate bracket changes for this line\n            let openBrackets = 0;\n            let closeBrackets = 0;\n\n            if (language === 'html') {\n                // HTML: count opening/closing tags\n                // Opening: <tag> or <tag attr>\n                // Closing: </tag> or self-closing />\n                const openTags = (line.match(/<[a-zA-Z][^>]*(?<!\\/)\\s*>/g) || []).length;\n                const closeTags = (line.match(/<\\/[^>]+>/g) || []).length;\n                const selfClosing = (line.match(/<[^>]+\\/>/g) || []).length;\n                openBrackets = openTags - selfClosing;\n                closeBrackets = closeTags;\n            } else {\n                // JS/CSS/JSON: count { and }\n                // Avoid counting brackets inside strings (basic heuristic)\n                let inString = false;\n                let stringChar = '';\n                for (let j = 0; j < line.length; j++) {\n                    const char = line[j];\n                    const prev = j > 0 ? line[j - 1] : '';\n\n                    if ((char === '\"' || char === \"'\" || char === '`') && prev !== '\\\\') {\n                        if (!inString) {\n                            inString = true;\n                            stringChar = char;\n                        } else if (char === stringChar) {\n                            inString = false;\n                        }\n                    }\n\n                    if (!inString) {\n                        if (char === '{' || char === '[' || char === '(') openBrackets++;\n                        if (char === '}' || char === ']' || char === ')') closeBrackets++;\n                    }\n                }\n            }\n\n            // Determine if line starts with closing bracket (decrease indent BEFORE this line)\n            const startsWithClose = language === 'html'\n                ? line.startsWith('</')\n                : /^[}\\]\\)]/.test(line);\n\n            // Apply closing brackets that start the line BEFORE indenting\n            if (startsWithClose && closeBrackets > 0) {\n                indentLevel = Math.max(0, indentLevel - 1);\n                closeBrackets--; // Already accounted for\n            }\n\n            // Add the indented line\n            result.push(INDENT.repeat(indentLevel) + line);\n\n            // Update indent level for next line\n            // Net change: opens increase, closes decrease\n            indentLevel = Math.max(0, indentLevel + openBrackets - closeBrackets);\n        }\n\n        return result.join('\\n');\n    }\n\n    /** @private */\n    #applyStyles() {\n        this.style.display = 'block';\n        this.style.background = 'var(--md-sys-color-surface-container-highest)';\n\n        // Skip border-radius when embedded in au-example for seamless integration\n        const isEmbedded = this.closest('au-example');\n        if (isEmbedded) {\n            // Only top corners flat to align with header, bottom stays rounded\n            this.style.borderTopLeftRadius = '0';\n            this.style.borderTopRightRadius = '0';\n            this.style.borderBottomLeftRadius = 'var(--md-sys-shape-corner-medium)';\n            this.style.borderBottomRightRadius = 'var(--md-sys-shape-corner-medium)';\n        } else {\n            this.style.borderRadius = 'var(--md-sys-shape-corner-medium)';\n        }\n\n        this.style.overflow = 'hidden';\n        this.style.fontFamily = \"'Fira Code', 'Consolas', monospace\";\n        this.style.fontSize = '13px';\n\n        const header = this.querySelector('.au-code__header');\n        if (header) {\n            header.style.display = 'flex';\n            header.style.justifyContent = 'space-between';\n            header.style.alignItems = 'center';\n            header.style.padding = '8px 16px';\n            header.style.background = 'var(--md-sys-color-surface-container)';\n            header.style.borderBottom = '1px solid var(--md-sys-color-outline-variant)';\n        }\n\n        const lang = this.querySelector('.au-code__language');\n        if (lang) {\n            lang.style.fontSize = '11px';\n            lang.style.fontWeight = '600';\n            lang.style.color = 'var(--md-sys-color-primary)';\n            lang.style.letterSpacing = '0.5px';\n        }\n\n        const copyBtn = this.querySelector('.au-code__copy');\n        if (copyBtn) {\n            copyBtn.style.background = 'transparent';\n            copyBtn.style.border = 'none';\n            copyBtn.style.cursor = 'pointer';\n            copyBtn.style.color = 'var(--md-sys-color-on-surface-variant)';\n            copyBtn.style.padding = '4px';\n            copyBtn.style.borderRadius = '4px';\n            copyBtn.style.display = 'flex';\n            copyBtn.style.transition = 'all 0.2s ease';\n        }\n\n        const pre = this.querySelector('.au-code__pre');\n        if (pre) {\n            pre.style.margin = '0';\n            pre.style.padding = '16px';\n            pre.style.overflow = 'auto';\n            pre.style.maxHeight = '400px';\n        }\n\n        const content = this.querySelector('.au-code__content');\n        if (content) {\n            content.style.color = 'var(--md-sys-color-on-surface)';\n        }\n\n        // P2.1 perf fix: inject syntax highlighting styles once (not per render)\n        if (!AuCode._stylesInjected) {\n            AuCode._stylesInjected = true;\n            const style = document.createElement('style');\n            style.id = 'au-code-styles';\n            style.textContent = `\n            .au-code__tag { color: var(--md-sys-color-primary); }\n            .au-code__attr { color: var(--md-sys-color-tertiary); }\n            .au-code__string { color: var(--md-sys-color-secondary); }\n            .au-code__keyword { color: var(--md-sys-color-primary); font-weight: 500; }\n            .au-code__comment { color: var(--md-sys-color-outline); font-style: italic; }\n            .au-code__number { color: var(--md-sys-color-error); }\n            .au-code__function { color: var(--md-sys-color-tertiary); }\n            .au-code__builtin { color: var(--md-sys-color-primary); font-weight: 500; }\n            .au-code__copy:hover { \n                background: var(--md-sys-color-primary-container) !important;\n                color: var(--md-sys-color-on-primary-container) !important;\n            }\n            .au-code__copy:active {\n                background: var(--md-sys-color-primary) !important;\n                color: var(--md-sys-color-on-primary) !important;\n                transform: scale(0.95);\n            }\n            .au-code__copy.copied {\n                background: #c8e6c9 !important;\n                color: #1b5e20 !important;\n            }\n        `;\n            document.head.appendChild(style);\n        }\n    }\n\n    /** @private */\n    #setupCopyButton(originalCode) {\n        const btn = this.querySelector('.au-code__copy');\n        if (btn) {\n            this.listen(btn, 'click', async () => {\n                try {\n                    await navigator.clipboard.writeText(originalCode.trim());\n                    // Add copied class for visual feedback\n                    btn.classList.add('copied');\n                    btn.innerHTML = `\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                            <polyline points=\"20 6 9 17 4 12\"/>\n                        </svg>\n                    `;\n                    this.setTimeout(() => {\n                        btn.classList.remove('copied');\n                        btn.innerHTML = `\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                                <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"/>\n                                <path d=\"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1\"/>\n                            </svg>\n                        `;\n                    }, 2000);\n                } catch (e) {\n                    console.error('Copy failed:', e);\n                }\n            });\n        }\n    }\n}\n\ndefine('au-code', AuCode);\n",
    "/**\n * @fileoverview au-api-table - API Documentation Table Component\n * \n * Usage: \n * <au-api-table type=\"attributes\">\n *   <au-api-row name=\"checked\" type=\"boolean\" default=\"false\">Whether checkbox is checked</au-api-row>\n * </au-api-table>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\n\n/**\n * API documentation table that renders structured attribute, property,\n * method, event, and design-token rows from child `<au-api-row>` elements.\n *\n * @class\n * @extends AuElement\n * @element au-api-table\n */\nexport class AuApiTable extends AuElement {\n    static baseClass = 'au-api-table';\n    static observedAttributes = ['type'];\n\n\n    /** @override */\n    render() {\n        const type = this.attr('type', 'attributes');\n        const rows = Array.from(this.querySelectorAll('au-api-row'));\n\n        const headers = {\n            attributes: ['Name', 'Type', 'Default', 'Description'],\n            properties: ['Name', 'Type', 'Description'],\n            methods: ['Name', 'Signature', 'Description'],\n            events: ['Name', 'Detail', 'Description'],\n            tokens: ['Token', 'Default', 'Description']\n        };\n\n        const cols = headers[type] || headers.attributes;\n\n        // Store row data before clearing\n        const rowData = rows.map(row => ({\n            name: row.getAttribute('name') || '',\n            type: row.getAttribute('type') || '',\n            default: row.getAttribute('default') || '-',\n            signature: row.getAttribute('signature') || '',\n            detail: row.getAttribute('detail') || '',\n            description: row.textContent.trim()\n        }));\n\n        this.innerHTML = html`\n            <table class=\"au-api-table__table\">\n                <thead>\n                    <tr>\n                        ${safe(cols.map(c => html`<th>${c}</th>`).join(''))}\n                    </tr>\n                </thead>\n                <tbody>\n                    ${safe(rowData.map(row => this.#renderRow(type, row)).join(''))}\n                </tbody>\n            </table>\n        `;\n\n        this.#applyStyles();\n    }\n\n    /**\n     * Render a single table row based on the table type.\n     * @private\n     * @param {string} type - Table type (attributes, properties, methods, events, tokens).\n     * @param {Object} data - Row data extracted from the `<au-api-row>` element.\n     * @returns {string} HTML string for the table row.\n     */\n    #renderRow(type, data) {\n        switch (type) {\n            case 'attributes':\n                return html`<tr>\n                    <td><code>${data.name}</code></td>\n                    <td><code class=\"type\">${data.type}</code></td>\n                    <td><code class=\"default\">${data.default}</code></td>\n                    <td>${data.description}</td>\n                </tr>`;\n            case 'properties':\n                return html`<tr>\n                    <td><code>${data.name}</code></td>\n                    <td><code class=\"type\">${data.type}</code></td>\n                    <td>${data.description}</td>\n                </tr>`;\n            case 'methods':\n                return html`<tr>\n                    <td><code>${data.name}</code></td>\n                    <td><code class=\"signature\">${data.signature}</code></td>\n                    <td>${data.description}</td>\n                </tr>`;\n            case 'events':\n                return html`<tr>\n                    <td><code>${data.name}</code></td>\n                    <td><code class=\"detail\">${data.detail}</code></td>\n                    <td>${data.description}</td>\n                </tr>`;\n            case 'tokens':\n                return html`<tr>\n                    <td><code>${data.name}</code></td>\n                    <td><code class=\"default\">${data.default}</code></td>\n                    <td>${data.description}</td>\n                </tr>`;\n            default:\n                return '';\n        }\n    }\n\n    /**\n     * Apply Material Design 3 inline styles to the rendered table.\n     * @private\n     */\n    #applyStyles() {\n        this.style.display = 'block';\n        this.style.overflowX = 'auto';\n        this.style.marginBottom = '24px';  /* MD3: 24dp spacing between sections */\n\n        const table = this.querySelector('.au-api-table__table');\n        if (table) {\n            table.style.width = '100%';\n            table.style.borderCollapse = 'collapse';\n            table.style.fontSize = 'var(--md-sys-typescale-body-medium-size)';\n        }\n\n        const ths = this.querySelectorAll('th');\n        ths.forEach(th => {\n            th.style.textAlign = 'left';\n            th.style.padding = '16px';  /* MD3: 16dp padding */\n            th.style.height = '56px';  /* MD3: header row height */\n            th.style.background = 'var(--md-sys-color-surface-container)';\n            th.style.fontWeight = '500';\n            th.style.color = 'var(--md-sys-color-on-surface)';\n            th.style.borderBottom = '1px solid var(--md-sys-color-outline-variant)';\n        });\n\n        const tds = this.querySelectorAll('td');\n        tds.forEach(td => {\n            td.style.padding = '16px';  /* MD3: 16dp padding */\n            td.style.minHeight = '52px';  /* MD3: minimum row height */\n            td.style.borderBottom = '1px solid var(--md-sys-color-outline-variant)';\n            td.style.verticalAlign = 'middle';  /* Better vertical alignment */\n            td.style.lineHeight = '1.5';  /* Improve readability */\n        });\n\n        const codes = this.querySelectorAll('code');\n        codes.forEach(code => {\n            code.style.fontFamily = \"'Fira Code', monospace\";\n            code.style.fontSize = '13px';\n            code.style.padding = '2px 6px';\n            code.style.borderRadius = '4px';\n            code.style.background = 'var(--md-sys-color-surface-container-highest)';\n        });\n\n        const types = this.querySelectorAll('code.type, code.detail');\n        types.forEach(t => {\n            t.style.color = 'var(--md-sys-color-primary)';\n        });\n\n        const defaults = this.querySelectorAll('code.default');\n        defaults.forEach(d => {\n            d.style.color = 'var(--md-sys-color-secondary)';\n        });\n    }\n}\n\n/**\n * Data container row for `<au-api-table>`. Holds attribute metadata;\n * actual rendering is delegated to the parent table.\n *\n * @class\n * @extends AuElement\n * @element au-api-row\n */\nexport class AuApiRow extends AuElement {\n    static baseClass = 'au-api-row';\n    static observedAttributes = ['name', 'type', 'default', 'signature', 'detail'];\n\n    /** @override */\n    render() {\n        // Just a container, actual rendering done by parent\n    }\n}\n\ndefine('au-api-table', AuApiTable);\ndefine('au-api-row', AuApiRow);\n",
    "/**\n * @fileoverview au-example - Interactive Example Card Component\n * \n * Usage:\n * <au-example title=\"Basic checkbox\">\n *   <div slot=\"demo\">\n *     <au-checkbox checked>Example</au-checkbox>\n *   </div>\n *   <div slot=\"code\">\n *     <au-checkbox checked>Example</au-checkbox>\n *   </div>\n * </au-example>\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe, escapeHTML } from '../core/utils.js';\n\n/**\n * Interactive example card that displays a live demo alongside its source code.\n * Extracts content from `demo` and `code` slots, renders a toggle-able view.\n *\n * @class\n * @extends AuElement\n * @element au-example\n * @slot demo - Live component demonstration area.\n * @slot code - HTML source code to display (falls back to demo innerHTML).\n */\nexport class AuExample extends AuElement {\n    static baseClass = 'au-example';\n    static observedAttributes = ['title'];\n\n\n    /** @private Whether the code panel is currently visible. */\n    #showCode = false;\n\n    /** @override */\n    render() {\n        const title = this.attr('title', 'Example');\n        const demoSlot = this.querySelector('[slot=\"demo\"]');\n        const codeSlot = this.querySelector('[slot=\"code\"]');\n\n        // Extract content BEFORE modifying DOM\n        const demoContent = demoSlot ? demoSlot.innerHTML : '';\n        // For code, use textContent to get the decoded text (handles pre-escaped content)\n        // If there's a code slot, use it; otherwise use the demo slot's outerHTML\n        const codeContent = codeSlot\n            ? codeSlot.textContent\n            : (demoSlot ? demoSlot.innerHTML : '');\n\n        // Remove original slots to prevent duplicate event handlers\n        // The slots contain interactive elements (buttons with onclick) that would overlap\n        if (demoSlot) demoSlot.remove();\n        if (codeSlot) codeSlot.remove();\n\n        // CRITICAL: Pre-escape and prettify code content BEFORE creating au-code element\n        // This ensures au-code has content when connectedCallback runs (which triggers render)\n        const normalizedCode = this.#prettifyHTML(codeContent);\n        const escapedCode = escapeHTML(normalizedCode);\n\n        this.innerHTML = html`\n            <div class=\"au-example__card\">\n                <div class=\"au-example__header\">\n                    <span class=\"au-example__title\">${title}</span>\n                    <div class=\"au-example__actions\">\n                        <button class=\"au-example__btn\" data-action=\"link\" title=\"Copy link\">\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                                <path d=\"M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71\"/>\n                                <path d=\"M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71\"/>\n                            </svg>\n                        </button>\n                        <button class=\"au-example__btn\" data-action=\"code\" title=\"View source\">\n                            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                                <polyline points=\"16 18 22 12 16 6\"/>\n                                <polyline points=\"8 6 2 12 8 18\"/>\n                            </svg>\n                        </button>\n                    </div>\n                </div>\n                <div class=\"au-example__demo\">\n                    ${safe(demoContent)}\n                </div>\n                <div class=\"au-example__code\" style=\"display: none;\">\n                    <au-code language=\"html\">${safe(escapedCode)}</au-code>\n                </div>\n            </div>\n        `;\n\n        this.#applyStyles();\n        // Event delegation handled by AuElement.#setupEventDelegation()\n        // See handleAction() method below\n    }\n\n\n    // escapeHTML used here for code display (entity-encoding < > & for code blocks), not XSS\n\n    /**\n     * Pretty-prints HTML with proper indentation\n     * Lightweight implementation, no dependencies\n     * @param {string} html - The HTML string to format\n     * @returns {string} - Formatted HTML with proper indentation\n     */\n    #prettifyHTML(html) {\n        // Self-closing tags that don't need closing\n        const selfClosing = new Set([\n            'area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input',\n            'link', 'meta', 'param', 'source', 'track', 'wbr'\n        ]);\n\n        // Inline tags that shouldn't break to new line\n        const inline = new Set([\n            'a', 'abbr', 'b', 'bdo', 'br', 'cite', 'code', 'dfn', 'em',\n            'i', 'kbd', 'q', 's', 'samp', 'small', 'span', 'strong',\n            'sub', 'sup', 'u', 'var'\n        ]);\n\n        let result = '';\n        let indent = 0;\n        const indentStr = '    '; // 4 spaces\n\n        // Normalize: remove existing whitespace between tags\n        const normalized = html\n            .replace(/>\\s+</g, '><')\n            .replace(/\\s+/g, ' ')\n            .trim();\n\n        // Split by tags while keeping tags in result\n        const tokens = normalized.split(/(<[^>]+>)/g).filter(t => t.trim());\n\n        for (let i = 0; i < tokens.length; i++) {\n            const token = tokens[i].trim();\n            if (!token) continue;\n\n            const isTag = token.startsWith('<');\n            const isClosing = token.startsWith('</');\n            const isSelfClosing = token.endsWith('/>') ||\n                (isTag && selfClosing.has(token.match(/<\\/?(\\w+)/)?.[1]?.toLowerCase()));\n\n            if (isClosing) {\n                indent = Math.max(0, indent - 1);\n            }\n\n            // Get tag name if it's a tag\n            const tagName = isTag ? token.match(/<\\/?(\\w+)/)?.[1]?.toLowerCase() : null;\n            const isInline = tagName && inline.has(tagName);\n\n            // Add content\n            if (isTag) {\n                if (!isInline || isClosing) {\n                    if (result && !result.endsWith('\\n')) {\n                        result += '\\n';\n                    }\n                    result += indentStr.repeat(indent) + token;\n                } else {\n                    result += token;\n                }\n            } else {\n                // Text content - add inline\n                result += token;\n            }\n\n            // Increase indent after opening tag (not self-closing, not inline)\n            if (isTag && !isClosing && !isSelfClosing && !isInline) {\n                indent++;\n            }\n        }\n\n        return result.trim();\n    }\n\n    /**\n     * Apply Material Design 3 inline styles to the example card structure.\n     * @private\n     */\n    #applyStyles() {\n        this.style.display = 'block';\n        this.style.marginBottom = '24px';\n\n        const card = this.querySelector('.au-example__card');\n        if (card) {\n            card.style.background = 'var(--md-sys-color-surface)';\n            card.style.border = '1px solid var(--md-sys-color-outline-variant)';\n            card.style.borderRadius = 'var(--md-sys-shape-corner-large)';\n            // Note: Do NOT use overflow:hidden - it clips the code block\n        }\n\n        const header = this.querySelector('.au-example__header');\n        if (header) {\n            header.style.display = 'flex';\n            header.style.justifyContent = 'space-between';\n            header.style.alignItems = 'center';\n            header.style.padding = '12px 16px';\n            header.style.borderBottom = '1px solid var(--md-sys-color-outline-variant)';\n            header.style.background = 'var(--md-sys-color-surface-container-low)';\n            header.style.borderRadius = 'var(--md-sys-shape-corner-large) var(--md-sys-shape-corner-large) 0 0';\n        }\n\n        const title = this.querySelector('.au-example__title');\n        if (title) {\n            title.style.fontWeight = '500';\n            title.style.fontSize = 'var(--md-sys-typescale-title-small-size)';\n            title.style.color = 'var(--md-sys-color-on-surface)';\n            // 2026: Proper text overflow handling\n            // min-width: 0 is CRITICAL for flexbox children to allow shrinking below content size\n            title.style.minWidth = '0';\n            title.style.overflow = 'hidden';\n            title.style.textOverflow = 'ellipsis';\n            title.style.whiteSpace = 'nowrap';\n        }\n\n        const actions = this.querySelector('.au-example__actions');\n        if (actions) {\n            actions.style.display = 'flex';\n            actions.style.gap = '4px';\n        }\n\n        const btns = this.querySelectorAll('.au-example__btn');\n        btns.forEach(btn => {\n            btn.style.background = 'transparent';\n            btn.style.border = 'none';\n            btn.style.cursor = 'pointer';\n            btn.style.padding = '8px';\n            btn.style.borderRadius = '50%';\n            btn.style.color = 'var(--md-sys-color-on-surface-variant)';\n            btn.style.display = 'flex';\n            btn.style.alignItems = 'center';\n            btn.style.justifyContent = 'center';\n            btn.style.transition = 'all 0.2s ease';\n        });\n\n        const demo = this.querySelector('.au-example__demo');\n        if (demo) {\n            // 2026: Proper containment - demo area MUST contain its content\n            demo.style.boxSizing = 'border-box';\n            demo.style.width = '100%';\n            demo.style.maxWidth = '100%';\n            demo.style.padding = '24px';\n            // Flexbox with wrap for responsive layout\n            demo.style.display = 'flex';\n            demo.style.flexWrap = 'wrap';\n            demo.style.gap = '16px';\n            demo.style.alignItems = 'center';\n            demo.style.justifyContent = 'flex-start';\n            // No overflow clipping - content wraps naturally\n\n            // Force interactive children to wrap properly instead of shrinking\n            // IMPORTANT: Layout containers (au-stack, au-grid) must NOT have flex-shrink: 0\n            // They need to shrink to contain their children properly\n            const layoutContainers = new Set(['AU-STACK', 'AU-GRID', 'AU-LAYOUT']);\n            Array.from(demo.children).forEach(child => {\n                if (!layoutContainers.has(child.tagName)) {\n                    child.style.flexShrink = '0';\n                }\n            });\n        }\n\n        const codeBlock = this.querySelector('.au-example__code');\n        if (codeBlock) {\n            codeBlock.style.borderTop = '1px solid var(--md-sys-color-outline-variant)';\n        }\n\n        // Style the au-code element for seamless integration\n        const muCode = this.querySelector('.au-example__code au-code');\n        if (muCode) {\n            // Only zero TOP corners - bottom corners should stay rounded (set by au-code itself)\n            muCode.style.borderTopLeftRadius = '0';\n            muCode.style.borderTopRightRadius = '0';\n            muCode.style.maxHeight = '400px';\n            muCode.style.overflow = 'auto';\n\n            // Also remove border-radius from the au-code header (HTML badge area)\n            const muCodeHeader = muCode.querySelector('.au-code__header');\n            if (muCodeHeader) {\n                muCodeHeader.style.borderRadius = '0';\n            }\n        }\n\n        // Add hover styles\n        const style = document.createElement('style');\n        style.textContent = `\n            .au-example__btn:hover {\n                background: var(--md-sys-color-surface-container-high) !important;\n                color: var(--md-sys-color-primary) !important;\n            }\n            .au-example__btn.active {\n                background: var(--md-sys-color-primary-container) !important;\n                color: var(--md-sys-color-on-primary-container) !important;\n            }\n        `;\n        if (!document.querySelector('#au-example-styles')) {\n            style.id = 'au-example-styles';\n            document.head.appendChild(style);\n        }\n    }\n\n    /**\n     * 2026: Handle delegated actions from AuElement.\n     * Called automatically by base class event delegation.\n     */\n    handleAction(action, target, event) {\n        if (action === 'code') {\n            const codeBlock = this.querySelector('.au-example__code');\n            if (codeBlock) {\n                this.#showCode = !this.#showCode;\n                codeBlock.style.display = this.#showCode ? 'block' : 'none';\n                target.classList.toggle('active', this.#showCode);\n\n                // Scroll code block into view when shown\n                if (this.#showCode) {\n                    // Double rAF ensures layout is complete before measuring\n                    requestAnimationFrame(() => {\n                        requestAnimationFrame(() => {\n                            // Find the scrollable container (.au-layout-main in demo)\n                            const scrollContainer = this.closest('.au-layout-main') ||\n                                document.querySelector('.au-layout-main') ||\n                                document.documentElement;\n\n                            const codeRect = codeBlock.getBoundingClientRect();\n                            const containerRect = scrollContainer.getBoundingClientRect?.() ||\n                                { top: 0, bottom: window.innerHeight };\n\n                            // Only scroll if code block is below viewport\n                            if (codeRect.bottom > containerRect.bottom) {\n                                const scrollOffset = codeRect.bottom - containerRect.bottom + 20;\n                                scrollContainer.scrollBy({\n                                    top: scrollOffset,\n                                    behavior: 'smooth'\n                                });\n                            }\n                        });\n                    });\n                }\n            }\n        } else if (action === 'link') {\n            this.#copyLink(target);\n        }\n    }\n\n    /**\n     * Copy the current page URL to the clipboard.\n     * @private\n     * @param {HTMLElement} btn - The button element that triggered the copy.\n     */\n    async #copyLink(btn) {\n        const url = window.location.href;\n        try {\n            await navigator.clipboard.writeText(url);\n            btn.style.color = 'var(--md-sys-color-primary)';\n            this.setTimeout(() => {\n                btn.style.color = '';\n            }, 2000);\n        } catch (e) {\n            console.error('Copy failed:', e);\n        }\n    }\n}\n\ndefine('au-example', AuExample);\n",
    "/**\n * @fileoverview au-doc-page - Self-Contained Documentation Page Component\n * \n * This component encapsulates the entire 4-tab documentation structure,\n * making it trivial to add new component documentation pages.\n * \n * Usage:\n * <au-doc-page \n *   title=\"Button\"\n *   selector=\"au-button\"\n *   description=\"Interactive button component\">\n *   \n *   <div slot=\"overview\">... overview content ...</div>\n *   <div slot=\"api\">... api tables ...</div>\n *   <div slot=\"styling\">... css tokens ...</div>\n *   <div slot=\"examples\">... example cards ...</div>\n * </au-doc-page>\n * \n * Benefits:\n * - No JavaScript needed per page - tabs work automatically\n * - Consistent structure across all pages\n * - Single source of truth for documentation layout\n */\n\nimport { AuElement, define } from '../core/AuElement.js';\nimport { html, safe } from '../core/utils.js';\n\n/**\n * Self-contained documentation page with a four-tab layout\n * (Overview, API, Styling, Examples) driven by slotted content.\n *\n * @class\n * @extends AuElement\n * @element au-doc-page\n * @slot overview - Component overview and description.\n * @slot api      - API tables for attributes, properties, methods, events.\n * @slot styling  - CSS design-token documentation.\n * @slot examples - Interactive example cards.\n */\nexport class AuDocPage extends AuElement {\n    static baseClass = 'au-doc-page';\n    static observedAttributes = ['title', 'selector', 'description'];\n\n\n    /** @private Currently selected tab index. */\n    #activeTab = 0;\n\n    /** @override */\n    connectedCallback() {\n        super.connectedCallback();\n        // Use requestAnimationFrame to ensure child elements are parsed\n        requestAnimationFrame(() => this.#setupTabs());\n    }\n\n    /** @override */\n    render() {\n        const title = this.attr('title', 'Component');\n        const selector = this.attr('selector', '');\n        const description = this.attr('description', '');\n\n        // Get slot content before replacing innerHTML\n        const overviewSlot = this.querySelector('[slot=\"overview\"]');\n        const apiSlot = this.querySelector('[slot=\"api\"]');\n        const stylingSlot = this.querySelector('[slot=\"styling\"]');\n        const examplesSlot = this.querySelector('[slot=\"examples\"]');\n\n        const overviewContent = overviewSlot ? overviewSlot.innerHTML : '';\n        const apiContent = apiSlot ? apiSlot.innerHTML : '';\n        const stylingContent = stylingSlot ? stylingSlot.innerHTML : '';\n        const examplesContent = examplesSlot ? examplesSlot.innerHTML : '';\n\n        this.innerHTML = html`\n            <h1 class=\"page-title\">${title}</h1>\n            <p class=\"page-subtitle\">\n                ${selector ? html`<code>&lt;${selector}&gt;</code> ` : ''}${description}\n            </p>\n\n            <au-tabs active=\"0\" class=\"au-doc-page__tabs\" style=\"margin-bottom: 24px;\">\n                <au-tab>OVERVIEW</au-tab>\n                <au-tab>API</au-tab>\n                <au-tab>STYLING</au-tab>\n                <au-tab>EXAMPLES</au-tab>\n            </au-tabs>\n\n            <div class=\"au-doc-page__content au-doc-page__overview\">\n                ${safe(overviewContent)}\n            </div>\n            <div class=\"au-doc-page__content au-doc-page__api\" style=\"display: none;\">\n                ${safe(apiContent)}\n            </div>\n            <div class=\"au-doc-page__content au-doc-page__styling\" style=\"display: none;\">\n                ${safe(stylingContent)}\n            </div>\n            <div class=\"au-doc-page__content au-doc-page__examples\" style=\"display: none;\">\n                ${safe(examplesContent)}\n            </div>\n        `;\n\n        this.style.display = 'block';\n    }\n\n    /**\n     * Wire tab-change events to show/hide corresponding content panels.\n     * @private\n     */\n    #setupTabs() {\n        const tabs = this.querySelector('.au-doc-page__tabs');\n        const contents = this.querySelectorAll('.au-doc-page__content');\n\n        if (tabs) {\n            this.listen(tabs, 'au-tab-change', (e) => {\n                this.#activeTab = e.detail.index;\n                contents.forEach((content, i) => {\n                    content.style.display = i === this.#activeTab ? 'block' : 'none';\n                });\n            });\n        }\n    }\n}\n\ndefine('au-doc-page', AuDocPage);\n",
    "/**\n * @fileoverview Shared Constants for AgentUI Framework\n * \n * Central source of truth for framework-wide constants.\n * Eliminates duplication between index.js and chunks/core.js.\n */\n\n/**\n * Complete list of all AgentUI component tags.\n * Used by discoverAll() and other discovery APIs.\n * \n * @type {string[]}\n */\nexport const ALL_COMPONENT_TAGS = [\n    'au-button', 'au-input', 'au-textarea', 'au-card', 'au-modal',\n    'au-alert', 'au-toast', 'au-checkbox', 'au-switch', 'au-radio',\n    'au-dropdown', 'au-tabs', 'au-tab', 'au-chip', 'au-badge',\n    'au-avatar', 'au-progress', 'au-spinner', 'au-skeleton',\n    'au-tooltip', 'au-table', 'au-datatable', 'au-form',\n    'au-stack', 'au-grid', 'au-container', 'au-divider',\n    'au-drawer', 'au-sidebar', 'au-navbar', 'au-bottom-nav',\n    'au-layout', 'au-router', 'au-page', 'au-theme-toggle',\n    'au-splash', 'au-virtual-list', 'au-lazy', 'au-repeat',\n    'au-fetch', 'au-confirm', 'au-schema-form', 'au-prompt-ui',\n    'au-error-boundary', 'au-code', 'au-callout', 'au-icon',\n    'au-api-table', 'au-example', 'au-doc-page'\n];\n",
    "/**\n * @fileoverview Shared Discovery Functions for AgentUI\n * \n * Eliminates duplication of loadDescriptions() and discoverAll()\n * between index.js and chunks/core.js.\n */\n\nimport { ALL_COMPONENT_TAGS } from './constants.js';\n\n/**\n * Load the describe catalog via fetch().\n * Resolves catalog URL relative to AgentUI script tags.\n * \n * @param {typeof import('./AuElement.js').AuElement} AuElement - AuElement class to populate\n * @param {Object} [options] - Options\n * @param {boolean} [options.checkChunks=false] - Whether to check for /chunks/ path prefix\n */\nexport async function loadDescriptions(AuElement, options = {}) {\n    if (AuElement._describeCatalog) return;\n\n    const scripts = document.querySelectorAll('script[src]');\n    let baseUrl = '';\n    for (const s of scripts) {\n        if (options.checkChunks\n            ? (s.src.includes('agentui') || s.src.includes('chunks'))\n            : s.src.includes('agentui')) {\n            baseUrl = s.src.substring(0, s.src.lastIndexOf('/') + 1);\n            // If we're in chunks/, go up one level\n            if (options.checkChunks && baseUrl.includes('/chunks/')) {\n                baseUrl = baseUrl.replace('/chunks/', '/');\n            }\n            break;\n        }\n    }\n    const url = baseUrl + 'describe-catalog.json';\n    try {\n        const res = await fetch(url);\n        if (res.ok) {\n            AuElement._describeCatalog = await res.json();\n        }\n    } catch (e) {\n        if (window.AGENTUI_DEBUG) {\n            console.warn('[AgentUI] Could not load describe catalog from', url);\n        }\n    }\n}\n\n/**\n * Create a discoverAll() function bound to the given AuElement class.\n * \n * @param {typeof import('./AuElement.js').AuElement} AuElement - AuElement class\n * @returns {Function} Async discoverAll function\n */\nexport function createDiscoverAll(AuElement) {\n    return async function discoverAll() {\n        if (!AuElement._describeCatalog) {\n            await this.loadDescriptions();\n        }\n        const components = {};\n        for (const tag of ALL_COMPONENT_TAGS) {\n            const cls = customElements.get(tag);\n            if (cls?.describe) {\n                components[tag] = cls.describe();\n            }\n        }\n        return components;\n    };\n}\n",
    "/**\n * @fileoverview AgentUI v3.5 - Complete Framework (2026 Edition)\n * \n * AI-Optimized UI Framework for Large-Scale Applications\n * 45+ Components | Memory-Safe | Agent-First | State-of-the-Art Performance\n */\n\n// ============================================\n// CORE\n// ============================================\nexport { AuElement, define } from './core/AuElement.js';\nexport { bus, UIEvents, showToast } from './core/bus.js';\nexport { Theme } from './core/theme.js';\nexport { createStore } from './core/store.js';\n\n/**\n * Returns a Promise that resolves when all AgentUI components are registered.\n * If already ready, resolves immediately (fast path).\n * \n * @returns {Promise<void>}\n * @example\n * import { whenReady } from 'agentui-wc';\n * await whenReady();\n * document.querySelector('au-layout').doSomething();\n */\nexport function whenReady() {\n    if (typeof window !== 'undefined' && window.AgentUI?.ready) {\n        return Promise.resolve();\n    }\n    return new Promise(resolve => {\n        if (typeof document !== 'undefined') {\n            document.addEventListener('au-ready', () => resolve(), { once: true });\n        } else {\n            resolve(); // Node.js/test environment — no DOM, resolve immediately\n        }\n    });\n}\n\nexport { Router } from './core/router.js';\nexport { http, HttpError } from './core/http.js';\nexport { createRipple, attachRipple, RippleMixin } from './core/ripple.js';\n\nexport { AgentAPI, getAuComponentTree, describe as describeComponent, findByLabel, getRegisteredComponents, enableVisualMarkers, disableVisualMarkers, getMarkerMap, getMarkerElement, getMCPActions } from './core/agent-api.js';\n\nexport { ComponentSchema, getComponentSchema, getAllSchemas, getSchemaComponents, getSchemaQuickRef } from './core/component-schema.js';\n\n// ============================================\n// CENTRALIZED UTILITIES \n// ============================================\nexport { Z_INDEX, injectLayerTokens } from './core/layers.js';\nexport { keyboard, KeyboardManager } from './core/keyboard.js';\nexport { breakpoints, BREAKPOINTS, BreakpointObserver } from './core/breakpoints.js';\nexport { escapeHTML, html, safe } from './core/utils.js';\n\n// ============================================\n// VIEW TRANSITIONS (2026  - Smooth animations)\n// ============================================\nexport {\n    transition,\n    transitionNamed,\n    navigateWithTransition,\n    supportsViewTransitions\n} from './core/transitions.js';\n\n// ============================================\n// TASK SCHEDULER (2026  - Priority scheduling)\n// ============================================\nexport {\n    scheduleTask,\n    yieldToMain,\n    processWithYield,\n    runBackground,\n    runImmediate,\n    afterPaint,\n    supportsScheduler\n} from './core/scheduler.js';\n\n// ============================================\n// RENDER UTILITIES (Large-Scale App Optimization)\n// ============================================\nexport {\n    scheduler,\n    memo,\n    debounce,\n    throttle,\n    createVisibilityObserver,\n    domBatch,\n    processInChunks\n} from './core/render.js';\n\n// ============================================\n// LAYOUT COMPONENTS\n// ============================================\nexport { AuStack } from './components/au-stack.js';\nexport { AuGrid } from './components/au-grid.js';\nexport { AuContainer } from './components/au-container.js';\nexport { AuNavbar, AuNavbarBrand, AuNavbarLinks, AuNavbarActions } from './components/au-navbar.js';\nexport { AuSidebar, AuSidebarItem } from './components/au-sidebar.js';\nexport { AuDivider } from './components/au-divider.js';\n\n// MD3 Responsive Layout (2026)\nexport { AuLayout } from './components/au-layout.js';\nexport { AuDrawer } from './components/au-drawer.js';\nexport { AuDrawerItem, AuNavItem } from './components/au-drawer-item.js';\nexport { AuBottomNav } from './components/au-bottom-nav.js';\n\n// ============================================\n// FORM COMPONENTS\n// ============================================\nexport { AuButton } from './components/au-button.js';\nexport { AuInput } from './components/au-input.js';\nexport { AuTextarea } from './components/au-textarea.js';\nexport { AuForm } from './components/au-form.js';\nexport { AuDropdown, AuOption } from './components/au-dropdown.js';\nexport { AuCheckbox } from './components/au-checkbox.js';\nexport { AuSwitch } from './components/au-switch.js';\nexport { AuRadioGroup, AuRadio } from './components/au-radio.js';\nexport { AuChip } from './components/au-chip.js';\n\n// ============================================\n// DISPLAY COMPONENTS\n// ============================================\nexport { AuCard } from './components/au-card.js';\nexport { AuCallout } from './components/au-callout.js';\nexport { AuTabs, AuTab } from './components/au-tabs.js';\nexport { AuAlert } from './components/au-alert.js';\nexport { AuBadge } from './components/au-badge.js';\nexport { AuProgress } from './components/au-progress.js';\nexport { AuTable, AuThead, AuTbody, AuTr, AuTh, AuTd } from './components/au-table.js';\nexport { AuAvatar } from './components/au-avatar.js';\nexport { AuSkeleton } from './components/au-skeleton.js';\n\n// ============================================\n// FEEDBACK COMPONENTS\n// ============================================\nexport { AuSpinner } from './components/au-spinner.js';\nexport { AuModal } from './components/au-modal.js';\nexport { AuToast, Toast } from './components/au-toast.js';\nexport { AuTooltip } from './components/au-tooltip.js';\nexport { AuConfirm, auConfirm } from './components/au-confirm.js';\n\n// ============================================\n// ROUTING COMPONENTS\n// ============================================\nexport { AuRouter } from './components/au-router.js';\nexport { AuPage } from './components/au-page.js';\n\n// ============================================\n// TOAST LISTENER REGISTRATION (Single point)\n// Uses LightBus-native hasListeners() instead of global flags\n// ============================================\nimport { Toast as ToastService } from './components/au-toast.js';\nimport { bus as toastBus, UIEvents as ToastEvents } from './core/bus.js';\n\nif (!toastBus.hasListeners(ToastEvents.TOAST_SHOW)) {\n    toastBus.on(ToastEvents.TOAST_SHOW, (data) => {\n        ToastService.show(data.message, data);\n    });\n}\n\n// ============================================\n// UTILITY COMPONENTS\n// ============================================\nexport { AuThemeToggle } from './components/au-theme-toggle.js';\nexport { AuIcon, IconNames } from './components/au-icon.js';\nexport { AuSplash } from './components/au-splash.js';\n\n// ============================================\n// PERFORMANCE COMPONENTS (Large-Scale)\n// ============================================\nexport { AuVirtualList } from './components/au-virtual-list.js';\nexport { AuLazy } from './components/au-lazy.js';\nexport { AuRepeat } from './components/au-repeat.js';\nexport { AuFetch } from './components/au-fetch.js';\n\n// AI-First Components (2026)\nexport { AuDataTable } from './components/au-datatable.js';\nexport { AuSchemaForm } from './components/au-schema-form.js';\nexport { AuPromptInput, AuCodeBlock, AuAgentToolbar, AuMessageBubble } from './components/au-prompt-ui.js';\nexport { AuErrorBoundary, getErrors, clearErrors } from './components/au-error-boundary.js';\n\n// ============================================\n// DOCUMENTATION COMPONENTS\n// ============================================\nexport { AuCode } from './components/au-code.js';\nexport { AuApiTable, AuApiRow } from './components/au-api-table.js';\nexport { AuExample } from './components/au-example.js';\nexport { AuDocPage } from './components/au-doc-page.js';\n\n// ============================================\n// AUTO-REGISTER ALL COMPONENTS\n// ============================================\nimport './components/au-stack.js';\nimport './components/au-grid.js';\nimport './components/au-container.js';\nimport './components/au-navbar.js';\nimport './components/au-sidebar.js';\nimport './components/au-divider.js';\nimport './components/au-button.js';\nimport './components/au-input.js';\nimport './components/au-textarea.js';\nimport './components/au-form.js';\nimport './components/au-card.js';\nimport './components/au-callout.js';\nimport './components/au-tabs.js';\nimport './components/au-alert.js';\nimport './components/au-badge.js';\nimport './components/au-spinner.js';\nimport './components/au-progress.js';\nimport './components/au-dropdown.js';\nimport './components/au-checkbox.js';\nimport './components/au-switch.js';\nimport './components/au-radio.js';\nimport './components/au-chip.js';\nimport './components/au-modal.js';\nimport './components/au-toast.js';\nimport './components/au-tooltip.js';\nimport './components/au-theme-toggle.js';\nimport './components/au-icon.js';\nimport './components/au-splash.js';\nimport './components/au-table.js';\nimport './components/au-avatar.js';\nimport './components/au-skeleton.js';\nimport './components/au-virtual-list.js';\nimport './components/au-lazy.js';\nimport './components/au-repeat.js';\nimport './components/au-confirm.js';\nimport './components/au-fetch.js';\n\nimport './components/au-datatable.js';\nimport './components/au-schema-form.js';\nimport './components/au-prompt-ui.js';\nimport './components/au-error-boundary.js';\n\n// MD3 Responsive Layout\nimport './components/au-layout.js';\nimport './components/au-drawer.js';\nimport './components/au-drawer-item.js';\nimport './components/au-bottom-nav.js';\n\n// ============================================\n// DOCUMENTATION COMPONENTS\n// ============================================\nimport './components/au-code.js';\nimport './components/au-api-table.js';\nimport './components/au-example.js';\nimport './components/au-doc-page.js';\n\n// ============================================\n// GLOBAL EXPORT (for IIFE bundle browser usage)\n// ============================================\nimport { Theme } from './core/theme.js';\nimport { bus, UIEvents, showToast } from './core/bus.js';\nimport { createStore } from './core/store.js';\n\nimport { Router } from './core/router.js';\nimport { http, HttpError } from './core/http.js';\n\nimport { AgentAPI, getAuComponentTree, describe as describeComponent, findByLabel, getRegisteredComponents, enableVisualMarkers, disableVisualMarkers, getMarkerMap, getMarkerElement, getMCPActions } from './core/agent-api.js';\nimport { getComponentSchema, getAllSchemas, getSchemaComponents, getSchemaQuickRef } from './core/component-schema.js';\n\nimport { getErrors, clearErrors } from './components/au-error-boundary.js';\nimport { auConfirm } from './components/au-confirm.js';\nimport { AuElement } from './core/AuElement.js';\nimport { ALL_COMPONENT_TAGS } from './core/constants.js';\nimport { loadDescriptions as _loadDescriptions, createDiscoverAll } from './core/discovery.js';\n\nif (typeof window !== 'undefined') {\n    window.AgentUI = {\n        // Theme\n        Theme,\n        // Bus\n        bus,\n        // Store\n        createStore,\n        UIEvents,\n        showToast,\n        // Readiness\n        whenReady,\n\n        // Router\n        Router,\n        // HTTP\n        http,\n        HttpError,\n\n        AgentAPI,\n        getAuComponentTree,\n        describeComponent,\n        findByLabel,\n        getRegisteredComponents,\n\n        // Enterprise: Error Handling\n        getErrors,\n        clearErrors,\n        // 2026 Agent: Visual Markers (multimodal)\n        enableVisualMarkers,\n        disableVisualMarkers,\n        getMarkerMap,\n        getMarkerElement,\n        // 2026 Agent: MCP Actions (standard protocol)\n        getMCPActions,\n        // 2026 Agent: Programmatic Dialogs\n        auConfirm,\n        // 2026 Agent: Component Schema (structured metadata)\n        getComponentSchema,\n        getAllSchemas,\n        getSchemaComponents,\n        getSchemaQuickRef,\n\n\n        // 🤖 AI AGENT DISCOVERY (2026)\n        // Use this to get ALL component info in one call\n        // Lazy-loads the describe catalog — zero cost until called\n        discoverAll: createDiscoverAll(AuElement),\n\n        // 🤖 Pre-load describe catalog without querying components\n        // Uses fetch() to keep catalog OUT of the main bundle (zero cost for regular users)\n        async loadDescriptions() {\n            await _loadDescriptions(AuElement);\n        }\n    };\n\n    // ============================================\n    // AU-READY EVENT (Agent DX)\n    // Fires when all AgentUI components are registered\n    // Usage: document.addEventListener('au-ready', () => { ... })\n    // ============================================\n    const emitAuReady = () => {\n        if (window.AGENTUI_DEBUG) {\n            console.log('[AgentUI] All components registered, emitting au-ready');\n        }\n        window.AgentUI.ready = true;\n        document.dispatchEvent(new CustomEvent('au-ready', {\n            detail: {\n                timestamp: Date.now()\n            }\n        }));\n    };\n\n    // Emit after all imports have been processed and DOM is ready.\n    // setTimeout(0) is used instead of queueMicrotask because microtasks\n    // run during module evaluation, BEFORE all ES module import side-effects\n    // (customElements.define calls) have completed. setTimeout defers to the\n    // next task, guaranteeing all components are registered.\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', emitAuReady, { once: true });\n    } else {\n        setTimeout(emitAuReady, 0);\n    }\n\n    // Debug mode logging\n    if (window.AGENTUI_DEBUG) {\n        console.log('[AgentUI] Debug mode enabled');\n        console.log('[AgentUI] Registered components:', getRegisteredComponents());\n    }\n}\n\n"
  ],
  "mappings": "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",
  "debugId": "82ADC6AF93F3A36964756E2164756E21",
  "names": []
}
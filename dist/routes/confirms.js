import{c as n}from"./chunk-zf3jm3jj.js";import"./chunk-6yc01c45.js";import"./chunk-0p814v3x.js";import"./chunk-pnmk505d.js";import"./chunk-cq3jhpch.js";import"./chunk-7bampcf2.js";import"./chunk-h1m0y636.js";import{j as a,m as o}from"./chunk-jxs5xaj9.js";class c extends n{static baseClass="au-confirm";static cssFile="overlays";static observedAttributes=["title","message","confirm-text","cancel-text","variant","open","size"];#t=null;connectedCallback(){if(!this.hasAttribute("data-rendered"))this.setAttribute("data-rendered","true");Object.getPrototypeOf(n.prototype).connectedCallback.call(this)}render(){if(this.querySelector("dialog")){this.#t=this.querySelector("dialog"),this.#e();return}let t=this.attr("title","Confirm"),i=this.attr("message","Are you sure?"),e=this.attr("confirm-text","Confirm"),s=this.attr("cancel-text","Cancel"),r=this.attr("variant","primary")==="danger"?"danger":"filled";this.innerHTML=o`
            <dialog class="au-confirm__dialog">
                <h3 class="au-confirm__title">${t}</h3>
                <p class="au-confirm__message">${i}</p>
                <div class="au-confirm__actions">
                    <au-button variant="text" data-action="cancel">${s}</au-button>
                    <au-button variant="${r}" data-action="confirm">${e}</au-button>
                </div>
            </dialog>
        `,this.#t=this.querySelector("dialog"),this.#e()}handleAction(t,i,e){if(t==="cancel")this.cancel();else if(t==="confirm")this.confirm()}#e(){if(this.#t=this.querySelector("dialog"),!this.#t)return;this.listen(this.#t,"close",()=>{this.removeAttribute("open"),this.classList.remove("is-open","is-visible"),document.body.style.overflow=""}),this.listen(this.#t,"cancel",(t)=>{t.preventDefault(),this.cancel()}),this.listen(this.#t,"click",(t)=>{if(t.target===this.#t)this.cancel()})}update(t,i,e){if(t==="open"){if(i!==null)this.#i()}}#i(){if(!this.#t||this.#t.open)return;this.classList.add("is-open"),this.#t.showModal(),document.body.style.overflow="hidden";let t=this.querySelector('[data-action="confirm"]');if(t)requestAnimationFrame(()=>{requestAnimationFrame(()=>t.focus())});requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.classList.add("is-visible")})})}open(){this.setAttribute("open","")}close(){if(!this.#t)return;this.classList.remove("is-visible");let t=!1,i=()=>{if(t)return;if(t=!0,this.#t&&this.#t.open)this.#t.close();this.removeAttribute("open"),this.classList.remove("is-open"),document.body.style.overflow=""},e=this.#t,s=(r)=>{if(r.target===e)e.removeEventListener("transitionend",s),i()};e.addEventListener("transitionend",s),this.setTimeout(()=>{e.removeEventListener("transitionend",s),i()},200)}confirm(){this.close(),this.emit("au-confirm")}cancel(){this.close(),this.emit("au-cancel")}}a("au-confirm",c);

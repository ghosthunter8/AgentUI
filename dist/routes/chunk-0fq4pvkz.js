import{j as o,k as l,m as n,n as a}from"./chunk-eqmf7npt.js";var m="scheduler"in globalThis;function c(){return new Promise((t)=>{requestAnimationFrame(()=>requestAnimationFrame(t))})}class r extends o{static baseClass="au-modal";static cssFile="overlays";static observedAttributes=["open","size"];#t=null;disconnectedCallback(){if(this.classList.contains("is-open"))document.body.style.overflow="";super.disconnectedCallback()}connectedCallback(){if(!this.hasAttribute("data-rendered"))this._userContent=this.innerHTML,this.setAttribute("data-rendered","true");super.connectedCallback(),this.#e()}render(){if(this.querySelector("dialog"))return;let t=this.attr("size","md"),e=this._userContent||"";this.innerHTML=a`<dialog class="au-modal__dialog au-modal--${t}"> <button class="au-modal__close" aria-label="Close">âœ•</button> <div class="au-modal__body">${n(e)}</div> </dialog>`,this.#t=this.querySelector("dialog")}#e(){if(this.#t=this.querySelector("dialog"),!this.#t)return;this.listen(this.#t,"close",()=>{this.removeAttribute("open"),this.classList.remove("is-open","is-visible"),document.body.style.overflow=""}),this.listen(this.#t,"cancel",(e)=>{e.preventDefault(),this.close()}),this.listen(this.#t,"click",(e)=>{if(e.target===this.#t)this.close()});let t=this.querySelector(".au-modal__close");if(t)this.listen(t,"click",()=>{this.close()})}update(t,e,s){if(t==="open"){if(e!==null)this.#s()}}#s(){if(!this.#t||this.#t.open)return;this.classList.add("is-open"),this.#t.showModal(),document.body.style.overflow="hidden",this.emit("au-open"),c().then(()=>this.classList.add("is-visible"))}open(){this.setAttribute("open","")}close(){if(!this.#t)return;this.classList.remove("is-visible");let t=!1,e=()=>{if(t)return;if(t=!0,this.#t&&this.#t.open)this.#t.close();this.removeAttribute("open"),this.classList.remove("is-open"),document.body.style.overflow="",this.emit("au-close")},s=this.#t,i=(h)=>{if(h.target===s)s.removeEventListener("transitionend",i),e()};this.listen(s,"transitionend",i),this.setTimeout(()=>{s.removeEventListener("transitionend",i),e()},200)}}l("au-modal",r);
export{r as a};

var u=/^(save|submit|confirm|send|create|add|apply|ok|yes)$/,d=/^(cancel|close|dismiss|no|nevermind)$/,h=/^(delete|remove|clear|trash)$/,f=/^(back|next|previous|forward|continue)$/;class n extends HTMLElement{static observedAttributes=[];static baseClass="";static cssFile=null;static _loadedCSS=/*@__PURE__*/new Set;static _bundleChecked=!1;static _bundleLoaded=!1;static _agentLoggerInitialized=!1;static useContainment=!0;static describe(){let e=this.baseClass||this.name.replace(/^Au/,"au-").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=n._describeCatalog?.[e]||{name:e,props:this.observedAttributes||[],baseClass:this.baseClass||"",cssFile:this.cssFile||null},t=typeof document<"u"?Array.from(document.querySelectorAll(e)):[];return{...s,runtime:{registered:typeof customElements<"u"&&!!customElements.get(e),version:"0.1.146",instanceCount:t.length,instances:t.slice(0,5).map((i)=>{let r={id:i.id||null};if("value"in i&&i.value!==void 0)r.value=i.value;if("checked"in i&&i.checked!==void 0)r.checked=i.checked;if(typeof i.offsetParent<"u")r.visible=i.offsetParent!==null;return r})}}}static _describeCatalog=null;_rendered=!1;_abortController=null;_timers=/*@__PURE__*/new Set;_intervals=/*@__PURE__*/new Set;isReady=!1;_readyResolve=null;ready=new Promise((e)=>{this._readyResolve=e});constructor(){super();if(!n._agentLoggerInitialized)n._agentLoggerInitialized=!0,this._initAgentLogger()}_initAgentLogger(){if(!window.__AGENTUI_ERRORS__)window.__AGENTUI_ERRORS__=[];if(!window.AgentUIAgent)window.AgentUIAgent={reset:()=>{window.__AGENTUI_ERRORS__=[]},getErrors:()=>window.__AGENTUI_ERRORS__,hasError:(e,s)=>{return window.__AGENTUI_ERRORS__.some((t)=>t.component===e.toLowerCase()&&t.code===s)}}}logError(e,s){let t={component:this.tagName.toLowerCase(),code:e,message:s,element:this,timestamp:Date.now()};window.__AGENTUI_ERRORS__.push(t),console.warn(`[AgentUI] ${e}: ${s}`,this)}connectedCallback(){if(!this._abortController)this._abortController=new AbortController;if(this.constructor.baseClass)this.classList.add(this.constructor.baseClass);if(this.constructor.useContainment&&!this.style.contain)this.style.contain="layout style";if(this.#e(),!this._rendered)this.render(),this._rendered=!0;if(this._loadComponentCSS(),this._inferSemanticAttributes(),!this.isReady){this.isReady=!0,this._readyResolve(this);try{this.dispatchEvent(new CustomEvent("au:ready",{bubbles:!0,composed:!0}))}catch(e){}}}#e(){this.listen(this,"click",(e)=>{let s=e.target.closest("[data-action]");if(!s||!this.contains(s))return;let t=s.dataset.action;if(this.handleAction)this.handleAction(t,s,e)})}_loadComponentCSS(){let e=this.constructor.cssFile;if(!e)return;if(!n._bundleChecked)n._bundleChecked=!0,n._bundleLoaded=!!document.querySelector('link[href*="agentui.css"], link[href*="agentui.min.css"]')||!!document.querySelector('link[href*="agentui-wc"]')||!!document.querySelector('link[href*="components.css"]')||!!document.querySelector("style[data-agentui]")||typeof getComputedStyle<"u"&&getComputedStyle(document.documentElement).getPropertyValue("--md-sys-color-primary").trim()!=="";if(n._bundleLoaded)return;if(n._loadedCSS.has(e))return;n._loadedCSS.add(e);let s=document.createElement("link");s.id=`au-css-${e}`,s.rel="stylesheet";let t="/styles/",i=document.querySelector('link[href*="/styles/"]');if(i){let r=i.href.match(/(.*\/(?:src\/|dist\/)?styles\/)/);if(r)t=r[1]}else{let r=document.querySelector('link[href*="/dist/"]');if(r){let a=r.href.match(/(.*\/dist\/)/);if(a)t=a[1]+"styles/"}else{let a=document.querySelector('script[src*="/src/"]');if(a){let l=a.src.match(/(.*\/src\/)/);if(l)t=l[1]+"styles/"}}}if(t.startsWith("http")||t.startsWith("//"))try{if(new URL(t,window.location.origin).origin!==window.location.origin)console.warn(`[AgentUI] Blocked cross-origin CSS path: ${t}`),t="/styles/"}catch{t="/styles/"}s.href=`${t}components/${e}.css`,document.head.appendChild(s)}_inferSemanticAttributes(){let e=this.tagName.toLowerCase();if(this.hasAttribute("data-au-action"))return;let s="",t="";switch(e){case"au-button":s=this._inferButtonAction(),t=this._inferButtonRole();break;case"au-input":case"au-textarea":s="input",t="text-field";break;case"au-checkbox":case"au-switch":s="toggle",t="control";break;case"au-dropdown":s="select",t="selector";break;case"au-modal":s="dialog",t="overlay";break;case"au-tabs":s="navigate",t="navigation";break;case"au-card":t="container";break}if(s)this.setAttribute("data-au-action",s);if(t)this.setAttribute("data-au-role",t)}_inferButtonAction(){let e=this.textContent?.toLowerCase().trim()||"";if(u.test(e))return"submit";if(d.test(e))return"cancel";if(h.test(e))return"delete";if(f.test(e))return"navigate";return"click"}_inferButtonRole(){let e=this.getAttribute("variant");if(e==="filled"||e==="elevated")return"primary-action";if(e==="tonal"||e==="outlined")return"secondary-action";if(e==="text")return"tertiary-action";if(e==="danger")return"destructive-action";return"action"}disconnectedCallback(){if(this._abortController)this._abortController.abort(),this._abortController=null;for(let e of this._timers)clearTimeout(e);this._timers.clear();for(let e of this._intervals)clearInterval(e);this._intervals.clear(),this.cleanup()}cleanup(){}attributeChangedCallback(e,s,t){if(s!==t&&this._rendered)this.update(e,t,s)}render(){}update(e,s,t){}setupEvents(){}attr(e,s=""){return this.getAttribute(e)??s}has(e){return this.hasAttribute(e)}emit(e,s={}){this.dispatchEvent(new CustomEvent(e,{bubbles:!0,composed:!0,detail:s}))}listen(e,s,t,i={}){if(!this._abortController)this._abortController=new AbortController;let r={...i,signal:this._abortController.signal};e.addEventListener(s,t,r)}setTimeout(e,s){let t;return t=setTimeout(()=>{this._timers.delete(t),e()},s),this._timers.add(t),t}setInterval(e,s){let t=setInterval(e,s);return this._intervals.add(t),t}setupActivation(e){this.updateTabindex(),this.listen(this,"keydown",(s)=>{if((s.key==="Enter"||s.key===" ")&&!this.has("disabled"))s.preventDefault(),e()})}updateTabindex(){this.setAttribute("tabindex",this.has("disabled")?"-1":"0")}setDisplay(e){this.style.display=e}get isDisabled(){return this.has("disabled")}}function _(e,s,t={}){if(customElements.get(e))return;let i=t.priority||"user-blocking";if(typeof scheduler<"u"&&scheduler.postTask)scheduler.postTask(()=>{if(!customElements.get(e))customElements.define(e,s)},{priority:i});else customElements.define(e,s)}function c(e){if(e==null)return"";return String(e).replace(/[&<>"']/g,(s)=>m[s])}var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};class o extends String{constructor(e){super(e==null?"":e)}}function g(e){return new o(e)}function p(e,...s){let t="";for(let i=0;i<e.length;i++)if(t+=e[i],i<s.length){let r=s[i];if(r instanceof o)t+=r;else if(Array.isArray(r))for(let a of r)if(a instanceof o)t+=a;else t+=c(a);else t+=c(r)}return new o(t)}
export{n as j,_ as k,c as l,g as m,p as n};

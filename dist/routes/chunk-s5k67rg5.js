import{g as n}from"./chunk-tkfnkwax.js";import{l as _}from"./chunk-x9m15qkh.js";import{m as o,n as l,p as c,q as h}from"./chunk-gb3z8ds6.js";class b extends o{static get observedAttributes(){return["has-drawer","has-bottom-nav","full-bleed"]}static baseClass="au-layout";static cssFile="layout";static useContainment=!1;constructor(){super()}connectedCallback(){if(!this._slotsCaptured)this._slots={header:this.querySelector('[slot="header"]'),drawer:this.querySelector('[slot="drawer"]'),footer:this.querySelector('[slot="footer"]'),bottom:this.querySelector('[slot="bottom"]'),default:Array.from(this.children).filter((e)=>!e.hasAttribute("slot"))},this._slotsCaptured=!0;if(super.connectedCallback(),this._setupScrollReset(),this._updateLayout(),typeof requestAnimationFrame==="function")requestAnimationFrame(()=>{this._recheckBottomNav(),this._checkPaddingIntegrity()})}disconnectedCallback(){super.disconnectedCallback()}_setupScrollReset(){this.listen(window,"hashchange",()=>{let e=this.querySelector(".au-layout-main");if(e)e.scrollTop=0})}_updateLayout(){let e=this._slots.drawer!==null,t=this._slots.bottom!==null;this.toggleAttribute("has-drawer",e),this.toggleAttribute("has-bottom-nav",t)}_recheckBottomNav(){let e=this._slots.bottom;if(!e)return;let t=getComputedStyle(e).display!=="none";this.toggleAttribute("has-bottom-nav",t)}_checkPaddingIntegrity(){if(!this.hasAttribute("has-bottom-nav"))return;if(this.hasAttribute("full-bleed"))return;let e=this.querySelector(".au-layout-content");if(!e)return;let t=typeof window<"u"?window:typeof globalThis<"u"?globalThis:null;if(!t||typeof t.getComputedStyle!=="function")return;let i=parseFloat(t.getComputedStyle(e).paddingBottom);if(isNaN(i))return;if(i<60){let s=e.children;for(let a=0;a<s.length;a++){let r=parseFloat(t.getComputedStyle(s[a]).paddingBottom);if(!isNaN(r)&&r>=60)return}console.warn("[au-layout] ⚠️ padding-bottom on .au-layout-content is "+i+"px, "+`but has-bottom-nav is active — content may be hidden behind the bottom nav.
`+"Fix: use <au-layout full-bleed> instead of overriding padding manually.")}}render(){this.innerHTML="";let e=document.createElement("div");e.className="au-layout-wrapper";let t=document.createElement("header");if(t.className="au-layout-header",this._slots.header)t.appendChild(this._slots.header);e.appendChild(t);let i=document.createElement("div");i.className="au-layout-body";let s=document.createElement("aside");if(s.className="au-layout-drawer",this._slots.drawer)s.appendChild(this._slots.drawer);i.appendChild(s);let a=document.createElement("div");a.className="au-layout-main";let r=document.createElement("main");if(r.className="au-layout-content",this._slots.default)this._slots.default.forEach((g)=>r.appendChild(g));a.appendChild(r),i.appendChild(a),e.appendChild(i);let d=document.createElement("footer");if(d.className="au-layout-footer",this._slots.footer)d.appendChild(this._slots.footer);e.appendChild(d),this.appendChild(e);let u=document.createElement("div");if(u.className="au-layout-bottom",this._slots.bottom)u.appendChild(this._slots.bottom);this.appendChild(u)}}l("au-layout",b);class m{#e=[];#t=!1;constructor(){this.#i()}#i(){if(this.#t||typeof window>"u")return;document.addEventListener("keydown",(e)=>{if(e.key==="Escape"&&this.#e.length>0)e.preventDefault(),e.stopPropagation(),this.#e[this.#e.length-1].callback()}),this.#t=!0}pushEscapeHandler(e,t){let i={element:e,callback:t};return this.#e.push(i),()=>{let s=this.#e.indexOf(i);if(s>-1)this.#e.splice(s,1)}}isTopmost(e){if(this.#e.length===0)return!1;return this.#e[this.#e.length-1].element===e}get stackDepth(){return this.#e.length}}var y=new m;class f extends o{static get observedAttributes(){return["mode","open","expand-on-hover","position"]}static baseClass="au-drawer";static cssFile="drawer";static useContainment=!1;constructor(){super();this._currentMode="expanded",this._isHovering=!1,this._unsubscribe=null}get mode(){return this.getAttribute("mode")||"auto"}set mode(e){this.setAttribute("mode",e)}get open(){return this.hasAttribute("open")}set open(e){this.toggleAttribute("open",Boolean(e))}get expandOnHover(){return this.hasAttribute("expand-on-hover")}set expandOnHover(e){this.toggleAttribute("expand-on-hover",Boolean(e))}get position(){return this.getAttribute("position")||"start"}set position(e){this.setAttribute("position",e)}connectedCallback(){if(!this._slotsCaptured)this._slots={header:this.querySelector('[slot="header"]'),footer:this.querySelector('[slot="footer"]'),default:Array.from(this.children).filter((e)=>!e.hasAttribute("slot"))},this._slotsCaptured=!0;super.connectedCallback(),this._setupBreakpointListener(),this._setupListeners(),this._forceUpdateMode()}_getInitialMode(){let e=this.mode,t=n.isCompact,i=n.isMedium;if(e==="permanent")return"expanded";else if(e==="temporary")return"hidden";else if(e==="rail")return t?"hidden":"rail";else if(t)return"hidden";else if(i)return"rail";else return"expanded"}_forceUpdateMode(){this._currentMode=this._getInitialMode(),this._applyMode()}disconnectedCallback(){if(super.disconnectedCallback(),this._unsubscribe)this._unsubscribe(),this._unsubscribe=null;this._unsubEsc?.(),this._unsubEsc=null}attributeChangedCallback(e,t,i){if(!this.isConnected)return;if(e==="open")this._updateOpenState();else if(e==="mode")this._updateMode()}_setupBreakpointListener(){this._unsubscribe=n.subscribe(()=>{this._updateMode()})}_updateMode(){let e=this.mode,t=n.isCompact,i=n.isMedium,s;if(e==="permanent")s="expanded";else if(e==="temporary")s="hidden";else if(e==="rail")s=t?"hidden":"rail";else if(t)s="hidden";else if(i)s="rail";else s="expanded";if(s!==this._currentMode)this._currentMode=s,this._applyMode()}_applyMode(){let e=this.querySelector(".au-drawer-nav");if(!e)return;if(e.classList.remove("au-drawer-mode-expanded","au-drawer-mode-rail","au-drawer-mode-hidden"),e.classList.add(`au-drawer-mode-${this._currentMode}`),this.querySelectorAll("au-drawer-item").forEach((t)=>{if(this._currentMode==="rail"&&!this._isHovering)t.setAttribute("hide-label","");else t.removeAttribute("hide-label")}),this._currentMode!=="hidden")this.open=!1,this._hideScrim(),this._unsubEsc?.(),this._unsubEsc=null;else if(!this.open)this._hideScrim()}_setupListeners(){let e=this.querySelector(".au-drawer-scrim");if(e)this.listen(e,"click",()=>{this.open=!1});let t=this.querySelector(".au-drawer-nav");if(t&&this.expandOnHover)this.listen(t,"mouseenter",()=>{if(this._currentMode==="rail")this._isHovering=!0,t.classList.add("au-drawer-expanded-hover"),this._applyMode()}),this.listen(t,"mouseleave",()=>{if(this._currentMode==="rail")this._isHovering=!1,t.classList.remove("au-drawer-expanded-hover"),this._applyMode()});this.listen(this,"au-nav-select",(i)=>{if(this._currentMode==="hidden"&&this.open)this.open=!1;this._updateActiveItem(i.detail.item)}),this._unsubEsc=null}_updateActiveItem(e){this.querySelectorAll("au-drawer-item").forEach((t)=>{t.active=t===e})}_updateOpenState(){let e=this.querySelector(".au-drawer-nav");if(this.open){if(e?.classList.add("au-drawer-open"),this._currentMode==="hidden")this._showScrim(),this._unsubEsc=y.pushEscapeHandler(this,()=>{this.open=!1})}else e?.classList.remove("au-drawer-open"),this._hideScrim(),this._unsubEsc?.(),this._unsubEsc=null}_showScrim(){let e=this.querySelector(".au-drawer-scrim");if(e)e.classList.add("au-drawer-scrim-visible")}_hideScrim(){let e=this.querySelector(".au-drawer-scrim");if(e)e.classList.remove("au-drawer-scrim-visible")}toggle(){this.open=!this.open}render(){this.innerHTML="";let e=document.createElement("div");e.className="au-drawer-scrim",this.appendChild(e);let t=document.createElement("nav");t.className=`au-drawer-nav au-drawer-mode-${this._getInitialMode()}`,t.setAttribute("role","navigation");let i=document.createElement("div");if(i.className="au-drawer-header",this._slots.header)i.appendChild(this._slots.header);t.appendChild(i);let s=document.createElement("div");if(s.className="au-drawer-content",s.setAttribute("role","menu"),this._slots.default)this._slots.default.forEach((a)=>s.appendChild(a));if(t.appendChild(s),this._slots.footer)t.appendChild(this._slots.footer);this.appendChild(t)}}l("au-drawer",f);class p extends o{static get observedAttributes(){return["icon","href","active","badge","disabled","layout","label"]}static baseClass="au-drawer-item";static cssFile="drawer-item";constructor(){super();this._capturedLabel="";let e=Array.from(this.childNodes).filter((t)=>t.nodeType===Node.TEXT_NODE).map((t)=>t.textContent.trim()).join("").trim();if(e)this._capturedLabel=e}get icon(){return this.getAttribute("icon")||""}set icon(e){this.setAttribute("icon",e)}get href(){return this.getAttribute("href")||""}set href(e){this.setAttribute("href",e)}get active(){return this.hasAttribute("active")}set active(e){this.toggleAttribute("active",Boolean(e))}get badge(){return this.getAttribute("badge")}set badge(e){e?this.setAttribute("badge",e):this.removeAttribute("badge")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){this.toggleAttribute("disabled",Boolean(e))}get layout(){return this.getAttribute("layout")||"horizontal"}set layout(e){this.setAttribute("layout",e)}get label(){return this.getAttribute("label")||this._capturedLabel||""}set label(e){this.setAttribute("label",e)}connectedCallback(){if(!this._capturedLabel&&this.hasAttribute("label"))this._capturedLabel=this.getAttribute("label");if(!this._capturedLabel&&!this.hasAttribute("label")){if(this._capturedLabel=this.textContent.trim(),this._capturedLabel)this.setAttribute("label",this._capturedLabel)}super.connectedCallback(),this._setupListeners(),this._setupRipple(),this.setAttribute("tabindex","0"),this.setAttribute("role","menuitem"),this.setupActivation(()=>this._handleClick(new MouseEvent("click")))}attributeChangedCallback(e,t,i){if(t!==i&&this.isConnected)this.render()}_setupListeners(){this.listen(this,"click",this._handleClick.bind(this))}_setupRipple(){if(this.disabled)return;let e=this.querySelector(".au-drawer-item-link");if(e)this._rippleCleanup=_(e)}_handleClick(e){if(this.disabled){e.preventDefault();return}if(this.href){if(this.href.startsWith("#"))e.preventDefault(),window.location.hash=this.href}this.emit("au-nav-select",{href:this.href,item:this},{bubbles:!0,composed:!0})}render(){let e=this.label,t=e.length>0,i=this.badge?h`<span class="au-drawer-item-badge">${this.badge}</span>`:"",s=this.href?"a":"button",a=this.href?`href="${this.href}"`:"",r=this.disabled?this.href?'aria-disabled="true"':"disabled":"",d=e?`aria-label="${e}"`:"";this.innerHTML=h`${c(`<${s} class="au-drawer-item-link" ${a} ${r} ${d}>`)} <span class="au-drawer-item-icon"> <au-icon name="${this.icon}" size="24"></au-icon> </span> ${t?h`<span class="au-drawer-item-label" aria-hidden="true">${e}</span>`:""} ${i} ${c(`</${s}>`)}`}}l("au-drawer-item",p);l("au-nav-item",class extends p{connectedCallback(){if(!this.hasAttribute("layout"))this.setAttribute("layout","vertical");super.connectedCallback()}});

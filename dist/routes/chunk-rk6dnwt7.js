import{j as o,k as l}from"./chunk-j7wcbqec.js";var d="scheduler"in globalThis;function r(){return new Promise((e)=>{requestAnimationFrame(()=>requestAnimationFrame(e))})}class n extends o{static baseClass="au-modal";static cssFile="overlays";static observedAttributes=["open","size"];#e=null;connectedCallback(){if(!this.hasAttribute("data-rendered"))this._userContent=this.innerHTML,this.setAttribute("data-rendered","true");super.connectedCallback(),this.#t()}render(){if(this.querySelector("dialog"))return;let e=this.attr("size","md"),t=this._userContent||"";this.innerHTML=`
            <dialog class="au-modal__dialog au-modal--${e}">
                <button class="au-modal__close" aria-label="Close">âœ•</button>
                <div class="au-modal__body">${t}</div>
            </dialog>
        `,this.#e=this.querySelector("dialog")}#t(){if(this.#e=this.querySelector("dialog"),!this.#e)return;this.listen(this.#e,"close",()=>{this.removeAttribute("open"),this.classList.remove("is-open","is-visible"),document.body.style.overflow="",this.emit("au-close")}),this.listen(this.#e,"cancel",(t)=>{t.preventDefault(),this.close()}),this.listen(this.#e,"click",(t)=>{if(t.target===this.#e)this.close()});let e=this.querySelector(".au-modal__close");if(e)this.listen(e,"click",()=>{this.close()})}update(e,t,s){if(e==="open"){if(t!==null)this.#s()}}#s(){if(!this.#e||this.#e.open)return;this.classList.add("is-open"),this.#e.showModal(),document.body.style.overflow="hidden",this.emit("au-open"),r().then(()=>this.classList.add("is-visible"))}open(){this.setAttribute("open","")}close(){if(!this.#e)return;this.classList.remove("is-visible");let e=!1,t=()=>{if(e)return;if(e=!0,this.#e&&this.#e.open)this.#e.close();this.removeAttribute("open"),this.classList.remove("is-open"),document.body.style.overflow="",this.emit("au-close")},s=this.#e,i=(a)=>{if(a.target===s)s.removeEventListener("transitionend",i),t()};s.addEventListener("transitionend",i),this.setTimeout(()=>{s.removeEventListener("transitionend",i),t()},200)}}l("au-modal",n);
export{n as c};

class M{#A=[];#C=!1;schedule(A){if(this.#A.push(A),!this.#C)this.#C=!0,requestAnimationFrame(()=>this.#E())}#E(){let A=this.#A.slice();this.#A=[],this.#C=!1;for(let E of A)try{E()}catch(C){console.error("[RenderScheduler] Error:",C)}}}var P=new M;function Q(A,E={}){let C=E.keyFn??JSON.stringify,G=E.maxSize??1/0,H=new Map;return(...I)=>{let J=C(I);if(H.has(J))return H.get(J);let L=A(...I);if(H.size>=G){let O=H.keys().next().value;H.delete(O)}return H.set(J,L),L}}function U(A,E=100){let C=null;return(...G)=>{if(C)clearTimeout(C);C=setTimeout(()=>A(...G),E)}}function W(A,E=100){let C=!1;return(...G)=>{if(!C)A(...G),C=!0,setTimeout(()=>C=!1,E)}}function X(A,E={}){let C=new IntersectionObserver((G)=>{for(let H of G)if(H.isIntersecting)A(H.target),C.unobserve(H.target)},{rootMargin:"100px",threshold:0,...E});return{observe:(G)=>C.observe(G),disconnect:()=>C.disconnect()}}class N{#A=[];#C=[];#E=!1;read(A){this.#A.push(A),this.#G()}write(A){this.#C.push(A),this.#G()}#G(){if(!this.#E)this.#E=!0,requestAnimationFrame(()=>this.#H())}#H(){let A;while(A=this.#A.shift())try{A()}catch(E){console.error(E)}while(A=this.#C.shift())try{A()}catch(E){console.error(E)}if(this.#E=!1,this.#A.length||this.#C.length)this.#G()}}var Z=new N;async function _(A,E,C=100){for(let G=0;G<A.length;G+=C){let H=A.slice(G,G+C);for(let I=0;I<H.length;I++)E(H[I],G+I);await new Promise((I)=>setTimeout(I,0))}}
export{P as u,Q as v,U as w,W as x,X as y,Z as z,_ as A};

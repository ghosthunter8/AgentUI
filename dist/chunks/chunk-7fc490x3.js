import{B as G,C as z,D as x}from"./chunk-6k0k7e8t.js";var V=typeof window<"u"?window:globalThis,I=["ui:toast","ui:modal","ui:theme","ui:tabs","ui:dropdown","ui:form","ui:grid","ui:stack","ui:virtual-list"],S={type:"ui-framework",version:"0.1.116",description:"AI-Optimized UI Framework - Web Components Edition"};class _{#q=new Map;#J=new Map;#Q=new Set;#X=new Set;#Z=100;#$=!1;#W=Date.now();peerId;capabilities;meta;constructor(q={}){this.peerId=q.peerId??"default",this.capabilities=q.capabilities??[],this.meta=q.meta??{},this.#$=q.debug??!1}on(q,J){if(!this.#q.has(q))this.#q.set(q,new Set);let X=J;this.#q.get(q).add(X);let Q=this.#q.get(q).size;if(Q>this.#Z)console.warn(`[AgentUI] Possible event leak: "${q}" has ${Q} listeners (maxListeners: ${this.#Z}). Use setMaxListeners() to increase.`);return{unsubscribe:()=>this.#q.get(q)?.delete(X)}}off(q,J){this.#q.get(q)?.delete(J)}emitSync(q,J){let X={event:q,data:J};for(let Z of this.#X)X=Z(X,{event:q})??X;let Q=this.#q.get(q);if(Q)for(let Z of Q){let F=X;for(let K of this.#Q)F=K(F,{event:q})??F;Z(F)}for(let[Z,F]of this.#q)if(Z.endsWith("*")&&q.startsWith(Z.slice(0,-1))&&Z!==q)for(let K of F)K(X)}async emit(q,J){return this.emitSync(q,J),{delivered:!0,event:q}}signal(q,J){this.emitSync(q,J)}hasListeners(q){return(this.#q.get(q)?.size??0)>0}handle(q,J){return this.#J.set(q,J),{unsubscribe:()=>this.#J.delete(q)}}unhandle(q){this.#J.delete(q)}async request(q,J,X){let Q=this.#J.get(J);if(!Q)throw Error(`No handler for '${J}'`);return Q(X)}async broadcastRequest(q,J){return this.request(this.peerId,q,J)}addInboundHook(q){return this.#Q.add(q),()=>this.#Q.delete(q)}addOutboundHook(q){return this.#X.add(q),()=>this.#X.delete(q)}setMaxListeners(q){this.#Z=q}get debug(){return this.#$}get peers(){return[]}get peerCount(){return 0}healthCheck(){return{status:"healthy",peerId:this.peerId,uptime:Date.now()-this.#W,listeners:this.#q.size,handlers:this.#J.size}}destroy(){this.#q.clear(),this.#J.clear(),this.#Q.clear(),this.#X.clear()}}if(!V.__AGENTUI_BUS__)V.__AGENTUI_BUS__=new _({peerId:"agentui",capabilities:I,meta:S});var $=V.__AGENTUI_BUS__,U="__AGENTUI_COMPONENT_REGISTRY__";if(!V[U])V[U]=new Map;var A=V[U],j={on(q,J){let X=$.on(q,(Q)=>{J(Q.data??Q)});return()=>X.unsubscribe()},once(q,J){let X=this.on(q,(Q)=>{X(),J(Q)})},off(q,J){$.off(q,J)},emit(q,J){return $.emitSync(q,J)},async emitAsync(q,J){return $.emit(q,J)},signal(q,J){$.signal(q,J)},async request(q,J,X){return $.request(q,J,X)},async broadcastRequest(q,J){return $.broadcastRequest(q,J)},handle(q,J){return $.handle(q,J)},unhandle(q){$.unhandle(q)},destroy(){$.destroy()},setMaxListeners(q){$.setMaxListeners(q)},get peerId(){return $.peerId},get peers(){return $.peers},get peerCount(){return $.peerCount},hasListeners(q){return $.hasListeners(q)},get raw(){return $}},Y={TOAST_SHOW:"ui:toast:show",TOAST_DISMISS:"ui:toast:dismiss",MODAL_OPEN:"ui:modal:open",MODAL_CLOSE:"ui:modal:close",THEME_CHANGE:"ui:theme:change",TAB_CHANGE:"ui:tab:change",DROPDOWN_SELECT:"ui:dropdown:select",FORM_SUBMIT:"ui:form:submit",FORM_VALIDATE:"ui:form:validate"},k=(q,J={})=>{j.emit(Y.TOAST_SHOW,{message:q,...J})};var H=(q,J)=>{A.set(q,{...J,registeredAt:Date.now()})};var P="scheduler"in globalThis;async function R(q,J="user-visible"){if(P)return globalThis.scheduler.postTask(q,{priority:J});let X=J==="user-blocking"?0:J==="user-visible"?0:1;return new Promise((Q)=>{setTimeout(()=>Q(q()),X)})}async function B(){if(P&&"yield"in globalThis.scheduler)return globalThis.scheduler.yield();return new Promise((q)=>setTimeout(q,0))}async function y(q,J,X=50){for(let Q=0;Q<q.length;Q++)if(J(q[Q],Q),(Q+1)%X===0)await B()}function T(q){return R(q,"background")}function f(q){return R(q,"user-blocking")}function w(){return new Promise((q)=>{requestAnimationFrame(()=>requestAnimationFrame(q))})}class M extends G{static baseClass="au-toast";static cssFile=null;static observedAttributes=["severity","duration","position"];#q=null;#J=null;connectedCallback(){if(!this.#J&&!this.querySelector(".au-toast__content"))this.#J=this.innerHTML;super.connectedCallback(),this.listen(this,"click",(J)=>{if(J.target.classList.contains("au-toast__close"))this.dismiss()});let q=parseInt(this.attr("duration","3000"));if(q>0)this.#q=this.setTimeout(()=>this.dismiss(),q)}disconnectedCallback(){super.disconnectedCallback()}render(){if(this.querySelector(".au-toast__content")){this.#Q();return}let q=this.#J||"";this.innerHTML=`
            <span class="au-toast__content">${q}</span>
            <button class="au-toast__close" aria-label="Dismiss">✕</button>
        `,this.#Q()}update(q,J,X){this.#Q()}#Q(){let q=this.attr("severity","info"),J=this.attr("position","bottom-center"),X=["au-toast",`au-toast--${q}`,`au-toast--${J}`];X.forEach((Q)=>this.classList.add(Q)),Array.from(this.classList).forEach((Q)=>{if(Q.startsWith("au-toast--")&&!X.includes(Q))this.classList.remove(Q)})}dismiss(){this.emit("au-dismiss"),this.classList.add("is-exiting");let q=!1,J=()=>{if(!q)q=!0,this.remove()};this.addEventListener("animationend",J,{once:!0}),this.setTimeout(J,200)}}z("au-toast",M);class L extends G{static baseClass="au-toast-container";connectedCallback(){super.connectedCallback(),this.setAttribute("role","status"),this.setAttribute("aria-live","polite")}}z("au-toast-container",L);var C={show(q,J={}){let X=J.position||"bottom-center",Q=document.querySelector(`au-toast-container[position="${X}"]`);if(!Q)Q=document.createElement("au-toast-container"),Q.setAttribute("position",X),document.body.appendChild(Q);let Z=document.createElement("au-toast");if(Z.textContent=q,J.severity)Z.setAttribute("severity",J.severity);if(J.duration)Z.setAttribute("duration",J.duration.toString());return Q.appendChild(Z),Z}};if(typeof window<"u"&&j&&!j.hasListeners(Y.TOAST_SHOW))j.on(Y.TOAST_SHOW,(q)=>{C.show(q.message,q)});H("au-toast",{signals:[Y.TOAST_SHOW,Y.TOAST_DISMISS],options:{severities:["info","success","warning","error"],positions:["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],defaultDuration:3000},description:"MD3 Snackbar/Toast Notification component"});class D extends G{static baseClass="au-modal";static cssFile="overlays";static observedAttributes=["open","size"];#q=null;connectedCallback(){if(!this.hasAttribute("data-rendered"))this._userContent=this.innerHTML,this.setAttribute("data-rendered","true");super.connectedCallback(),this.#J()}render(){if(this.querySelector("dialog"))return;let q=this.attr("size","md"),J=this._userContent||"";this.innerHTML=`
            <dialog class="au-modal__dialog au-modal--${q}">
                <button class="au-modal__close" aria-label="Close">✕</button>
                <div class="au-modal__body">${J}</div>
            </dialog>
        `,this.#q=this.querySelector("dialog")}#J(){if(this.#q=this.querySelector("dialog"),!this.#q)return;this.listen(this.#q,"close",()=>{this.removeAttribute("open"),this.classList.remove("is-open","is-visible"),document.body.style.overflow="",this.emit("au-close")}),this.listen(this.#q,"cancel",(J)=>{J.preventDefault(),this.close()}),this.listen(this.#q,"click",(J)=>{if(J.target===this.#q)this.close()});let q=this.querySelector(".au-modal__close");if(q)this.listen(q,"click",()=>{this.close()})}update(q,J,X){if(q==="open"){if(J!==null)this.#Q()}}#Q(){if(!this.#q||this.#q.open)return;this.classList.add("is-open"),this.#q.showModal(),document.body.style.overflow="hidden",this.emit("au-open"),w().then(()=>this.classList.add("is-visible"))}open(){this.setAttribute("open","")}close(){if(!this.#q)return;this.classList.remove("is-visible");let q=!1,J=()=>{if(q)return;if(q=!0,this.#q&&this.#q.open)this.#q.close();this.removeAttribute("open"),this.classList.remove("is-open"),document.body.style.overflow="",this.emit("au-close")},X=this.#q,Q=(Z)=>{if(Z.target===X)X.removeEventListener("transitionend",Q),J()};X.addEventListener("transitionend",Q),this.setTimeout(()=>{X.removeEventListener("transitionend",Q),J()},200)}}z("au-modal",D);var O=null;async function s(q,J={}){let{title:X="Confirm",confirmText:Q="Confirm",cancelText:Z="Cancel",variant:F="primary"}=J;if(O)O.remove();return new Promise((K)=>{let W=document.createElement("au-confirm");W.setAttribute("title",X),W.setAttribute("message",q),W.setAttribute("confirm-text",Q),W.setAttribute("cancel-text",Z),W.setAttribute("variant",F),W.addEventListener("au-confirm",()=>{W.remove(),O=null,K(!0)}),W.addEventListener("au-cancel",()=>{W.remove(),O=null,K(!1)}),O=W,document.body.appendChild(W),W.open()})}class N extends D{static baseClass="au-confirm";static cssFile="overlays";static observedAttributes=["title","message","confirm-text","cancel-text","variant","open","size"];#q=null;connectedCallback(){if(!this.hasAttribute("data-rendered"))this.setAttribute("data-rendered","true");Object.getPrototypeOf(D.prototype).connectedCallback.call(this)}render(){if(this.querySelector("dialog")){this.#q=this.querySelector("dialog"),this.#J();return}let q=x(this.attr("title","Confirm")),J=x(this.attr("message","Are you sure?")),X=x(this.attr("confirm-text","Confirm")),Q=x(this.attr("cancel-text","Cancel")),F=this.attr("variant","primary")==="danger"?"danger":"filled";this.innerHTML=`
            <dialog class="au-confirm__dialog">
                <h3 class="au-confirm__title">${q}</h3>
                <p class="au-confirm__message">${J}</p>
                <div class="au-confirm__actions">
                    <au-button variant="text" data-action="cancel">${Q}</au-button>
                    <au-button variant="${F}" data-action="confirm">${X}</au-button>
                </div>
            </dialog>
        `,this.#q=this.querySelector("dialog"),this.#J()}handleAction(q,J,X){if(q==="cancel")this.cancel();else if(q==="confirm")this.confirm()}#J(){if(this.#q=this.querySelector("dialog"),!this.#q)return;this.listen(this.#q,"close",()=>{this.removeAttribute("open"),this.classList.remove("is-open","is-visible"),document.body.style.overflow=""}),this.listen(this.#q,"cancel",(q)=>{q.preventDefault(),this.cancel()}),this.listen(this.#q,"click",(q)=>{if(q.target===this.#q)this.cancel()})}update(q,J,X){if(q==="open"){if(J!==null)this.#Q()}}#Q(){if(!this.#q||this.#q.open)return;this.classList.add("is-open"),this.#q.showModal(),document.body.style.overflow="hidden";let q=this.querySelector('[data-action="confirm"]');if(q)requestAnimationFrame(()=>{requestAnimationFrame(()=>q.focus())});requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.classList.add("is-visible")})})}open(){this.setAttribute("open","")}close(){if(!this.#q)return;this.classList.remove("is-visible");let q=!1,J=()=>{if(q)return;if(q=!0,this.#q&&this.#q.open)this.#q.close();this.removeAttribute("open"),this.classList.remove("is-open"),document.body.style.overflow=""},X=this.#q,Q=(Z)=>{if(Z.target===X)X.removeEventListener("transitionend",Q),J()};X.addEventListener("transitionend",Q),this.setTimeout(()=>{X.removeEventListener("transitionend",Q),J()},200)}confirm(){this.close(),this.emit("au-confirm")}cancel(){this.close(),this.emit("au-cancel")}}z("au-confirm",N);
export{j as f,Y as g,k as h,H as i,P as j,R as k,B as l,y as m,T as n,f as o,M as p,C as q,D as r,s,N as t};

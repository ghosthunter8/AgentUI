import{B as H,C as F,E as L,F as G}from"./chunk-kz77cwwb.js";var V=typeof window<"u"?window:globalThis,A=["ui:toast","ui:modal","ui:theme","ui:tabs","ui:dropdown","ui:form","ui:grid","ui:stack","ui:virtual-list"],B={type:"ui-framework",version:"0.1.144",description:"AI-Optimized UI Framework - Web Components Edition"};class P{#q=/*@__PURE__*/new Map;#J=/*@__PURE__*/new Map;#Q=/*@__PURE__*/new Map;#X=/*@__PURE__*/new Set;#Z=/*@__PURE__*/new Set;#$=100;#W=!1;#z=Date.now();peerId;capabilities;meta;constructor(q={}){this.peerId=q.peerId??"default",this.capabilities=q.capabilities??[],this.meta=q.meta??{},this.#W=q.debug??!1}on(q,J){if(q.endsWith("*")){let Z=q.slice(0,-1);if(!this.#J.has(Z))this.#J.set(Z,/*@__PURE__*/new Set);return this.#J.get(Z).add(J),{unsubscribe:()=>this.#J.get(Z)?.delete(J)}}if(!this.#q.has(q))this.#q.set(q,/*@__PURE__*/new Set);let Q=J;this.#q.get(q).add(Q);let X=this.#q.get(q).size;if(X>this.#$)console.warn(`[AgentUI] Possible event leak: "${q}" has ${X} listeners (maxListeners: ${this.#$}). Use setMaxListeners() to increase.`);return{unsubscribe:()=>this.#q.get(q)?.delete(Q)}}off(q,J){if(q.endsWith("*")){let Q=q.slice(0,-1);this.#J.get(Q)?.delete(J);return}this.#q.get(q)?.delete(J)}emitSync(q,J){let Q={event:q,data:J};for(let z of this.#Z)Q=z(Q,{event:q})??Q;let X=Q;for(let z of this.#X)X=z(X,{event:q})??X;let Z=this.#q.get(q);if(Z)for(let z of Z)z(X);for(let[z,U]of this.#J)if(q.startsWith(z))for(let W of U)W(X)}async emit(q,J){return this.emitSync(q,J),{delivered:!0,event:q}}signal(q,J){this.emitSync(q,J)}hasListeners(q){return(this.#q.get(q)?.size??0)>0}handle(q,J){return this.#Q.set(q,J),{unsubscribe:()=>this.#Q.delete(q)}}unhandle(q){this.#Q.delete(q)}async request(q,J,Q){let X=this.#Q.get(J);if(!X)throw Error(`No handler for '${J}'`);return X(Q)}async broadcastRequest(q,J){return this.request(this.peerId,q,J)}addInboundHook(q){return this.#X.add(q),()=>this.#X.delete(q)}addOutboundHook(q){return this.#Z.add(q),()=>this.#Z.delete(q)}setMaxListeners(q){this.#$=q}get debug(){return this.#W}get peers(){return[]}get peerCount(){return 0}healthCheck(){return{status:"healthy",peerId:this.peerId,uptime:Date.now()-this.#z,listeners:this.#q.size,handlers:this.#Q.size}}destroy(){this.#q.clear(),this.#Q.clear(),this.#X.clear(),this.#Z.clear()}}if(!V.__AGENTUI_BUS__)V.__AGENTUI_BUS__=new P({peerId:"agentui",capabilities:A,meta:B});var $=V.__AGENTUI_BUS__,R="__AGENTUI_COMPONENT_REGISTRY__";if(!V[R])V[R]=/*@__PURE__*/new Map;var E=V[R],K=/*@__PURE__*/new WeakMap,D={on(q,J){let Q=(Z)=>{J(Z.data??Z)};if(!K.has(J))K.set(J,/*@__PURE__*/new Map);K.get(J).set(q,Q);let X=$.on(q,Q);return()=>{X.unsubscribe(),K.get(J)?.delete(q)}},once(q,J){let Q=this.on(q,(X)=>{Q(),J(X)})},off(q,J){let Q=K.get(J)?.get(q);if(Q)$.off(q,Q),K.get(J)?.delete(q)},emit(q,J){return $.emitSync(q,J)},async emitAsync(q,J){return $.emit(q,J)},signal(q,J){$.signal(q,J)},async request(q,J,Q){return $.request(q,J,Q)},async broadcastRequest(q,J){return $.broadcastRequest(q,J)},handle(q,J){return $.handle(q,J)},unhandle(q){$.unhandle(q)},destroy(){$.destroy()},setMaxListeners(q){$.setMaxListeners(q)},get peerId(){return $.peerId},get peers(){return $.peers},get peerCount(){return $.peerCount},hasListeners(q){return $.hasListeners(q)},get raw(){return $}},Y={TOAST_SHOW:"ui:toast:show",TOAST_DISMISS:"ui:toast:dismiss",MODAL_OPEN:"ui:modal:open",MODAL_CLOSE:"ui:modal:close",THEME_CHANGE:"ui:theme:change",TAB_CHANGE:"ui:tab:change",DROPDOWN_SELECT:"ui:dropdown:select",FORM_SUBMIT:"ui:form:submit",FORM_VALIDATE:"ui:form:validate"},C=(q,J={})=>{D.emit(Y.TOAST_SHOW,{message:q,...J})};var x=(q,J)=>{E.set(q,{...J,registeredAt:Date.now()})};var _="scheduler"in globalThis;async function M(q,J="user-visible"){if(_)return globalThis.scheduler.postTask(q,{priority:J});let Q=J==="user-blocking"?0:J==="user-visible"?0:1;return new Promise((X)=>{setTimeout(()=>X(q()),Q)})}async function T(){if(_&&"yield"in globalThis.scheduler)return globalThis.scheduler.yield();return new Promise((q)=>setTimeout(q,0))}async function f(q,J,Q=50){for(let X=0;X<q.length;X++)if(J(q[X],X),(X+1)%Q===0)await T()}function h(q){return M(q,"background")}function m(q){return M(q,"user-blocking")}function N(){return new Promise((q)=>{requestAnimationFrame(()=>requestAnimationFrame(q))})}class I extends H{static baseClass="au-toast";static cssFile=null;static observedAttributes=["severity","duration","position"];#q=null;#J=null;connectedCallback(){if(!this.#J&&!this.querySelector(".au-toast__content"))this.#J=this.innerHTML;super.connectedCallback(),this.listen(this,"click",(J)=>{if(J.target.classList.contains("au-toast__close"))this.dismiss()});let q=parseInt(this.attr("duration","3000"));if(q>0)this.#q=this.setTimeout(()=>this.dismiss(),q)}disconnectedCallback(){super.disconnectedCallback()}render(){if(this.querySelector(".au-toast__content")){this.#Q();return}let q=this.#J||"";this.innerHTML=G`<span class="au-toast__content">${L(q)}</span> <button class="au-toast__close" aria-label="Dismiss">✕</button>`,this.#Q()}update(q,J,Q){this.#Q()}#Q(){let q=this.attr("severity","info"),J=this.attr("position","bottom-center"),Q=["au-toast",`au-toast--${q}`,`au-toast--${J}`];Q.forEach((X)=>this.classList.add(X)),Array.from(this.classList).forEach((X)=>{if(X.startsWith("au-toast--")&&!Q.includes(X))this.classList.remove(X)})}dismiss(){this.emit("au-dismiss"),this.classList.add("is-exiting");let q=!1,J=()=>{if(!q){q=!0;let Q=this.parentElement;if(this.remove(),Q?.tagName==="AU-TOAST-CONTAINER"&&Q.children.length===0)Q.remove()}};this.listen(this,"animationend",J,{once:!0}),this.setTimeout(J,200)}}F("au-toast",I);class S extends H{static baseClass="au-toast-container";connectedCallback(){super.connectedCallback(),this.setAttribute("role","status"),this.setAttribute("aria-live","polite")}}F("au-toast-container",S);var y={show(q,J={}){let Q=J.position||"bottom-center",X=document.querySelector(`au-toast-container[position="${Q}"]`);if(!X)X=document.createElement("au-toast-container"),X.setAttribute("position",Q),document.body.appendChild(X);let Z=document.createElement("au-toast");if(Z.textContent=q,J.severity)Z.setAttribute("severity",J.severity);if(J.duration)Z.setAttribute("duration",J.duration.toString());return X.appendChild(Z),Z}};if(typeof window<"u"&&D&&!D.hasListeners(Y.TOAST_SHOW))D.on(Y.TOAST_SHOW,(q)=>{y.show(q.message,q)});x("au-toast",{signals:[Y.TOAST_SHOW,Y.TOAST_DISMISS],options:{severities:["info","success","warning","error"],positions:["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"],defaultDuration:3000},description:"MD3 Snackbar/Toast Notification component"});class O extends H{static baseClass="au-modal";static cssFile="overlays";static observedAttributes=["open","size"];#q=null;disconnectedCallback(){if(this.classList.contains("is-open"))document.body.style.overflow="";super.disconnectedCallback()}connectedCallback(){if(!this.hasAttribute("data-rendered"))this._userContent=this.innerHTML,this.setAttribute("data-rendered","true");super.connectedCallback(),this.#J()}render(){if(this.querySelector("dialog"))return;let q=this.attr("size","md"),J=this._userContent||"";this.innerHTML=G`<dialog class="au-modal__dialog au-modal--${q}"> <button class="au-modal__close" aria-label="Close">✕</button> <div class="au-modal__body">${L(J)}</div> </dialog>`,this.#q=this.querySelector("dialog")}#J(){if(this.#q=this.querySelector("dialog"),!this.#q)return;this.listen(this.#q,"close",()=>{this.removeAttribute("open"),this.classList.remove("is-open","is-visible"),document.body.style.overflow=""}),this.listen(this.#q,"cancel",(J)=>{J.preventDefault(),this.close()}),this.listen(this.#q,"click",(J)=>{if(J.target===this.#q)this.close()});let q=this.querySelector(".au-modal__close");if(q)this.listen(q,"click",()=>{this.close()})}update(q,J,Q){if(q==="open"){if(J!==null)this.#Q()}}#Q(){if(!this.#q||this.#q.open)return;this.classList.add("is-open"),this.#q.showModal(),document.body.style.overflow="hidden",this.emit("au-open"),N().then(()=>this.classList.add("is-visible"))}open(){this.setAttribute("open","")}close(){if(!this.#q)return;this.classList.remove("is-visible");let q=!1,J=()=>{if(q)return;if(q=!0,this.#q&&this.#q.open)this.#q.close();this.removeAttribute("open"),this.classList.remove("is-open"),document.body.style.overflow="",this.emit("au-close")},Q=this.#q,X=(Z)=>{if(Z.target===Q)Q.removeEventListener("transitionend",X),J()};this.listen(Q,"transitionend",X),this.setTimeout(()=>{Q.removeEventListener("transitionend",X),J()},200)}}F("au-modal",O);var j=null;async function t(q,J={}){let{title:Q="Confirm",confirmText:X="Confirm",cancelText:Z="Cancel",variant:z="primary"}=J;if(j)j.remove();return new Promise((U)=>{let W=document.createElement("au-confirm");W.setAttribute("title",Q),W.setAttribute("message",q),W.setAttribute("confirm-text",X),W.setAttribute("cancel-text",Z),W.setAttribute("variant",z),W.addEventListener("au-confirm",()=>{W.remove(),j=null,U(!0)}),W.addEventListener("au-cancel",()=>{W.remove(),j=null,U(!1)}),j=W,document.body.appendChild(W),W.open()})}class w extends O{static baseClass="au-confirm";static cssFile="overlays";static observedAttributes=["title","message","confirm-text","cancel-text","variant","open","size"];#q=null;disconnectedCallback(){if(this.#q?.open)document.body.style.overflow="";super.disconnectedCallback()}connectedCallback(){if(!this.hasAttribute("data-rendered"))this.setAttribute("data-rendered","true");Object.getPrototypeOf(O.prototype).connectedCallback.call(this)}render(){if(this.querySelector("dialog")){this.#q=this.querySelector("dialog"),this.#J();return}let q=this.attr("title","Confirm"),J=this.attr("message","Are you sure?"),Q=this.attr("confirm-text","Confirm"),X=this.attr("cancel-text","Cancel"),z=this.attr("variant","primary")==="danger"?"danger":"filled";this.innerHTML=G`<dialog class="au-confirm__dialog"> <h3 class="au-confirm__title">${q}</h3> <p class="au-confirm__message">${J}</p> <div class="au-confirm__actions"> <au-button variant="text" data-action="cancel">${X}</au-button> <au-button variant="${z}" data-action="confirm">${Q}</au-button> </div> </dialog>`,this.#q=this.querySelector("dialog"),this.#J()}handleAction(q,J,Q){if(q==="cancel")this.cancel();else if(q==="confirm")this.confirm()}#J(){if(this.#q=this.querySelector("dialog"),!this.#q)return;this.listen(this.#q,"close",()=>{this.removeAttribute("open"),this.classList.remove("is-open","is-visible"),document.body.style.overflow=""}),this.listen(this.#q,"cancel",(q)=>{q.preventDefault(),this.cancel()}),this.listen(this.#q,"click",(q)=>{if(q.target===this.#q)this.cancel()})}update(q,J,Q){if(q==="open"){if(J!==null)this.#Q()}}#Q(){if(!this.#q||this.#q.open)return;this.classList.add("is-open"),this.#q.showModal(),document.body.style.overflow="hidden";let q=this.querySelector('[data-action="confirm"]');if(q)requestAnimationFrame(()=>{requestAnimationFrame(()=>q.focus())});requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.classList.add("is-visible")})})}open(){this.setAttribute("open","")}close(){if(!this.#q)return;this.classList.remove("is-visible");let q=!1,J=()=>{if(q)return;if(q=!0,this.#q&&this.#q.open)this.#q.close();this.removeAttribute("open"),this.classList.remove("is-open"),document.body.style.overflow=""},Q=this.#q,X=(Z)=>{if(Z.target===Q)Q.removeEventListener("transitionend",X),J()};this.listen(Q,"transitionend",X),this.setTimeout(()=>{Q.removeEventListener("transitionend",X),J()},200)}confirm(){this.close(),this.emit("au-confirm")}cancel(){this.close(),this.emit("au-cancel")}}F("au-confirm",w);
export{D as f,Y as g,C as h,x as i,_ as j,M as k,T as l,f as m,h as n,m as o,I as p,y as q,O as r,t as s,w as t};

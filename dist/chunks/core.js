import{a as b,b as p,c}from"./chunk-42g7gkjd.js";import{f as O,g as D,h as I,i as w,j as i,k as n,l as o,m as r,n as s,o as l,q as y,s as g}from"./chunk-zj665nrt.js";import{A as Wz,u as a,v as t,w as e,x as zz,y as Hz,z as Jz}from"./chunk-p1wb5tk8.js";import{B as P,C as M,F as V}from"./chunk-7hqcgf3q.js";function T(z,H={}){let J=H.persist?`agentui:${H.persist}`:null,W={...z},X=new Map,G=new Set,F=!1,Q=new Map;if(J)try{let $=typeof localStorage<"u"?localStorage.getItem(J):null;if($){let Y=JSON.parse($);if(Y&&typeof Y==="object"){for(let q of Object.keys(z))if(q in Y)W[q]=Y[q]}}}catch($){}function Z($,Y,q){let N=X.get($);if(N)for(let U of N)U(Y,q);for(let U of G)U($,Y,q)}function B(){if(!J)return;try{if(typeof localStorage<"u")localStorage.setItem(J,JSON.stringify(W))}catch($){}}let R=new Proxy(W,{get($,Y){return $[Y]},set($,Y,q){let N=$[Y];if(Object.is(N,q))return!0;if($[Y]=q,F){if(!Q.has(Y))Q.set(Y,{oldVal:N});Q.get(Y).newVal=q}else Z(Y,q,N),B();return!0}});return{state:R,subscribe($,Y){if($==="*")return G.add(Y),()=>G.delete(Y);if(!X.has($))X.set($,new Set);return X.get($).add(Y),()=>{let q=X.get($);if(q){if(q.delete(Y),q.size===0)X.delete($)}}},batch($){F=!0,Q.clear();try{$()}finally{F=!1;for(let[Y,{newVal:q,oldVal:N}]of Q)if(!Object.is(q,N))Z(Y,q,N);Q.clear(),B()}},getState(){return{...W}},setState($){for(let[Y,q]of Object.entries($))R[Y]=q},destroy(){X.clear(),G.clear()}}}var K=T({current:"light",preference:"auto"},{persist:"au-theme"}),L={set(z){if(z==="auto"){let H=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",H?"dark":"light")}else document.documentElement.setAttribute("data-theme",z);K.state.preference=z,K.state.current=document.documentElement.getAttribute("data-theme"),O.emit(D.THEME_CHANGE,{theme:z})},get(){return document.documentElement.getAttribute("data-theme")||"light"},toggle(){let z=this.get();this.set(z==="dark"?"light":"dark")},init(){let z=typeof localStorage<"u"?localStorage.getItem("au-theme"):null;if(z&&K.state.preference==="auto"){this.set(z);try{localStorage.removeItem("au-theme")}catch(J){}return}let H=K.state.preference;if(H&&H!=="auto")this.set(H);else if(z){this.set(z);try{localStorage.removeItem("au-theme")}catch(J){}}else this.set("auto");this._mql=window.matchMedia("(prefers-color-scheme: dark)"),this._onMqlChange=(J)=>{if(K.state.preference==="auto")document.documentElement.setAttribute("data-theme",J.matches?"dark":"light")},this._mql.addEventListener("change",this._onMqlChange)},destroy(){if(this._mql&&this._onMqlChange)this._mql.removeEventListener("change",this._onMqlChange),this._mql=null,this._onMqlChange=null},get _store(){return K}};if(typeof window<"u")L.init();var x="startViewTransition"in document;async function j(z){if(x)await document.startViewTransition(async()=>{await z()}).finished;else await z()}async function k(z,{name:H="page"}={}){if(x){let J=document.createElement("style");J.textContent=`
            ::view-transition-old(${H}),
            ::view-transition-new(${H}) {
                animation-duration: 0.3s;
            }
        `,document.head.appendChild(J);try{await j(z)}finally{J.remove()}}else await z()}async function u(z,H){await j(()=>{window.history.pushState({},"",z),H()})}class S extends P{static baseClass="au-theme-toggle";connectedCallback(){super.connectedCallback(),this.listen(this,"click",()=>L.toggle()),O.on(D.THEME_CHANGE,()=>this.#z())}render(){this.innerHTML=V`
            <button class="au-theme-toggle__button" aria-label="Toggle theme">
                <span class="au-theme-toggle__icon"></span>
            </button>
        `,this.#z()}#z(){let z=L.get()==="dark",H=this.querySelector(".au-theme-toggle__icon");if(H)H.textContent=z?"☀️":"\uD83C\uDF19"}}M("au-theme-toggle",S);w("au-theme-toggle",{signals:[D.THEME_CHANGE],options:{themes:["light","dark"],emits:["click"]},description:"Theme toggle button that switches between light/dark modes"});function A(z){let H=z.getAttribute("aria-labelledby");if(H){let Z=H.split(" ").map((B)=>document.getElementById(B)?.textContent).filter(Boolean).join(" ");if(Z)return Z}let J=z.getAttribute("aria-label");if(J)return J;if(z.id){let Z=document.querySelector(`label[for="${z.id}"]`);if(Z)return Z.textContent.trim()}let W=z.getAttribute("title");if(W)return W;let X=z.getAttribute("role")||z.tagName.toLowerCase();if(["button","link","tab","menuitem","option","radio","checkbox"].some((Z)=>X.includes(Z))){let Z=z.textContent?.trim();if(Z&&Z.length<100)return Z}let F=z.getAttribute("placeholder");if(F)return F;let Q=z.getAttribute("value");if(Q&&z.tagName.includes("INPUT"))return`Input: ${Q}`;return z.tagName.toLowerCase().replace("au-","")}function d(z){let H=[],J=z.tagName.toLowerCase();if(z.hasAttribute("disabled"))return["none (disabled)"];if(z.onclick||z.hasAttribute("onclick"))H.push("click");switch(J){case"au-button":H.push("click");break;case"au-checkbox":case"au-switch":H.push("toggle","check","uncheck");break;case"au-input":case"au-textarea":H.push("type","clear","focus");break;case"au-dropdown":H.push("open","select","close");break;case"au-modal":H.push("open","close");break;case"au-tabs":H.push("select-tab");break;case"au-radio":H.push("select");break;case"au-chip":H.push("toggle","click");break;case"au-confirm":H.push("confirm","cancel");break;default:if(z.classList.contains("au-button")||z.getAttribute("role")==="button")H.push("click")}return H.length?H:["focus"]}function _(z){let H={},J=z.tagName.toLowerCase();if(z.hasAttribute("checked"))H.checked=!0;if(z.hasAttribute("disabled"))H.disabled=!0;if(z.hasAttribute("open"))H.open=!0;if(z.hasAttribute("selected"))H.selected=!0;if(z.hasAttribute("active"))H.active=!0;if(z.hasAttribute("loading"))H.loading=!0;if(z.hasAttribute("value"))H.value=z.getAttribute("value");let W=z.getAttribute("aria-checked");if(W)H.ariaChecked=W==="true";let X=z.getAttribute("aria-expanded");if(X)H.expanded=X==="true";let G=z.getAttribute("aria-selected");if(G)H.selected=G==="true";switch(J){case"au-input":case"au-textarea":let F=z.querySelector("input, textarea");if(F)H.value=F.value,H.placeholder=F.placeholder;break;case"au-progress":H.value=parseFloat(z.getAttribute("value")||"0"),H.max=parseFloat(z.getAttribute("max")||"100"),H.percentage=H.value/H.max*100;break;case"au-dropdown":H.value=z.getAttribute("value"),H.open=z.classList.contains("is-open");break}return H}function v(z){let H=z.tagName.toLowerCase().replace("au-",""),J=A(z),W=_(z),X=W.disabled?" (disabled)":"",F={button:()=>`Button "${J}"${X}. ${W.loading?"Currently loading.":"Click to activate."}`,checkbox:()=>`Checkbox "${J}"${X}. Currently ${W.ariaChecked||W.checked?"checked":"unchecked"}.`,switch:()=>`Toggle switch "${J}"${X}. Currently ${W.ariaChecked||W.checked?"on":"off"}.`,input:()=>`Text input "${J}"${X}. ${W.value?`Current value: "${W.value}"`:"Empty."} ${W.placeholder?`Placeholder: "${W.placeholder}"`:""}`,textarea:()=>`Text area "${J}"${X}. ${W.value?`Contains: "${W.value.slice(0,50)}${W.value.length>50?"...":""}"`:"Empty."}`,dropdown:()=>`Dropdown "${J}"${X}. ${W.value?`Selected: "${W.value}"`:"No selection."} ${W.open?"Menu is open.":"Menu is closed."}`,modal:()=>`Modal dialog${W.open?" (currently open)":" (currently closed)"}. ${J!=="modal"?`Title: "${J}"`:""}`,tabs:()=>`Tab navigation with ${z.querySelectorAll("au-tab").length} tabs.`,tab:()=>`Tab "${J}". ${W.active?"Currently active.":"Inactive."}`,progress:()=>`Progress bar at ${Math.round(W.percentage||0)}%.`,spinner:()=>"Loading spinner indicating operation in progress.",alert:()=>`Alert message: "${z.textContent?.trim().slice(0,100)||J}"`,card:()=>`Card container${J!=="card"?` titled "${J}"`:""}.`,chip:()=>`Chip "${J}"${X}. ${W.selected?"Selected.":"Not selected."}`,badge:()=>`Badge showing "${z.textContent?.trim()||"notification"}"`,avatar:()=>`User avatar${z.getAttribute("name")?` for "${z.getAttribute("name")}"`:""}`,icon:()=>`Icon: ${z.getAttribute("name")||"decorative"}`,confirm:()=>`Confirmation dialog. ${W.open?"Waiting for user response.":"Hidden."}`,fetch:()=>`Data fetcher${W.loading?" (loading)":""}. URL: ${z.getAttribute("url")||"not set"}`}[H];if(F)return F();return`${H} component${J?` "${J}"`:""}${X}.`}function m(z){let H=z.getBoundingClientRect();return H.top<window.innerHeight&&H.bottom>0&&H.left<window.innerWidth&&H.right>0&&H.width>0&&H.height>0}function E(z=document.body,H={}){let{visibleOnly:J=!1,interactiveOnly:W=!1,types:X=null}=H,G;if(X)G=z.querySelectorAll(X.join(","));else G=Array.from(z.querySelectorAll("*")).filter((Z)=>Z.tagName.toLowerCase().startsWith("au-")&&Z.tagName.toLowerCase()!=="au-ripple-wave");let F=[],Q=new Set(["au-button","au-checkbox","au-switch","au-input","au-textarea","au-dropdown","au-radio","au-tab","au-chip","au-modal","au-confirm"]);for(let Z of G){let B=Z.tagName.toLowerCase(),R=Q.has(B),$=m(Z);if(J&&!$)continue;if(W&&!R)continue;let Y=Z.getBoundingClientRect();F.push({tag:B,id:Z.id||null,label:A(Z),description:v(Z),state:_(Z),actions:d(Z),rect:{top:Math.round(Y.top),left:Math.round(Y.left),width:Math.round(Y.width),height:Math.round(Y.height)},interactive:R,visible:$})}return F}function f(z){let H=typeof z==="string"?document.querySelector(z):z;if(!H)return null;return v(H)}function C(){let z=new Map,H=["au-button","au-input","au-textarea","au-checkbox","au-switch","au-dropdown","au-option","au-radio","au-radio-group","au-chip","au-card","au-tabs","au-tab","au-alert","au-badge","au-progress","au-avatar","au-skeleton","au-spinner","au-modal","au-toast","au-tooltip","au-icon","au-stack","au-grid","au-container","au-navbar","au-sidebar","au-divider","au-theme-toggle","au-virtual-list","au-lazy","au-repeat","au-form","au-table","au-confirm","au-fetch"];for(let J of H){let W=customElements.get(J);if(W)z.set(J,W)}return z}function h(z,H=document.body){let J=z.toLowerCase();return E(H).filter((X)=>X.label.toLowerCase().includes(J)).map((X)=>{let G=X.id?`#${X.id}`:`${X.tag}`;return H.querySelector(G)}).filter(Boolean)}if(!O.hasListeners(D.TOAST_SHOW))O.on(D.TOAST_SHOW,(z)=>{y.show(z.message,z)});if(typeof window<"u"&&!window.AgentUI){window.AgentUI={Theme:L,bus:O,UIEvents:D,showToast:I,getAuComponentTree:E,describeComponent:f,findByLabel:h,getRegisteredComponents:C,auConfirm:g,ready:!1,async discoverAll(){if(!P._describeCatalog)await this.loadDescriptions();let H={},J=["au-button","au-input","au-textarea","au-card","au-modal","au-alert","au-toast","au-checkbox","au-switch","au-radio","au-dropdown","au-tabs","au-tab","au-chip","au-badge","au-avatar","au-progress","au-spinner","au-skeleton","au-tooltip","au-table","au-datatable","au-form","au-stack","au-grid","au-container","au-divider","au-drawer","au-sidebar","au-navbar","au-bottom-nav","au-layout","au-router","au-page","au-theme-toggle","au-splash","au-virtual-list","au-lazy","au-repeat","au-fetch","au-confirm","au-schema-form","au-prompt-ui","au-error-boundary","au-code","au-callout","au-icon","au-api-table","au-example","au-doc-page"];for(let W of J){let X=customElements.get(W);if(X?.describe)H[W]=X.describe()}return H},async loadDescriptions(){if(P._describeCatalog)return;let H=document.querySelectorAll("script[src]"),J="";for(let X of H)if(X.src.includes("agentui")||X.src.includes("chunks")){if(J=X.src.substring(0,X.src.lastIndexOf("/")+1),J.includes("/chunks/"))J=J.replace("/chunks/","/");break}let W=J+"describe-catalog.json";try{let X=await fetch(W);if(X.ok)P._describeCatalog=await X.json()}catch(X){if(window.AGENTUI_DEBUG)console.warn("[AgentUI] Could not load describe catalog from",W)}}};let z=()=>{if(window.AGENTUI_DEBUG)console.log("[AgentUI] All components registered, emitting au-ready");window.AgentUI.ready=!0,document.dispatchEvent(new CustomEvent("au-ready",{detail:{timestamp:Date.now()}}))};if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",z,{once:!0});else setTimeout(z,0)}export{o as yieldToMain,k as transitionNamed,j as transition,zz as throttle,x as supportsViewTransitions,i as supportsScheduler,I as showToast,a as scheduler,n as scheduleTask,l as runImmediate,s as runBackground,r as processWithYield,Wz as processInChunks,u as navigateWithTransition,t as memo,Jz as domBatch,M as define,e as debounce,Hz as createVisibilityObserver,b as createRipple,O as bus,p as attachRipple,D as UIEvents,L as Theme,c as RippleMixin,S as AuThemeToggle,P as AuElement};

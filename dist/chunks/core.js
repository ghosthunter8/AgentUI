import{c as p,d as c,e as i}from"./chunk-211vny06.js";import{f as N,g as D,h as S,i as V,j as n,k as o,l as r,m as s,n as l,o as a,q as g,s as k}from"./chunk-bvm8pkxw.js";import{A as Wz,u as t,v as e,w as zz,x as Gz,y as Hz,z as Jz}from"./chunk-5b1r3q6c.js";import{B as R,C as I,F as A}from"./chunk-w5d3wap9.js";function w(z,G={}){let H=G.persist?`agentui:${G.persist}`:null,J={...z},W=/*@__PURE__*/new Map,Y=/*@__PURE__*/new Set,F=!1,O=/*@__PURE__*/new Map;if(H)try{let X=typeof localStorage<"u"?localStorage.getItem(H):null;if(X){let Z=JSON.parse(X);if(Z&&typeof Z==="object"){for(let q of Object.keys(z))if(q in Z){let Q=z[q],P=Z[q];if(Q===null||Q===void 0)J[q]=P;else if(Array.isArray(Q)){if(Array.isArray(P))J[q]=P}else if(typeof P===typeof Q)J[q]=P}}}}catch(X){}function $(X,Z,q){let Q=W.get(X);if(Q)for(let P of Q)P(Z,q);for(let P of Y)P(X,Z,q)}function B(){if(!H)return;try{if(typeof localStorage<"u")localStorage.setItem(H,JSON.stringify(J))}catch(X){}}let x=/*@__PURE__*/new Set(["__proto__","constructor","prototype"]),K=new Proxy(J,{get(X,Z){return X[Z]},set(X,Z,q){if(x.has(Z))return console.warn(`[AgentUI Store] Blocked dangerous key: "${String(Z)}"`),!0;let Q=X[Z];if(Object.is(Q,q))return!0;if(X[Z]=q,F){if(!O.has(Z))O.set(Z,{oldVal:Q});O.get(Z).newVal=q}else $(Z,q,Q),B();return!0}});return{state:K,subscribe(X,Z){if(X==="*")return Y.add(Z),()=>Y.delete(Z);if(!W.has(X))W.set(X,/*@__PURE__*/new Set);return W.get(X).add(Z),()=>{let q=W.get(X);if(q){if(q.delete(Z),q.size===0)W.delete(X)}}},batch(X){F=!0,O.clear();try{X()}finally{F=!1;for(let[Z,{newVal:q,oldVal:Q}]of O)if(!Object.is(q,Q))$(Z,q,Q);O.clear(),B()}},getState(){return{...J}},setState(X){for(let[Z,q]of Object.entries(X))K[Z]=q},destroy(){W.clear(),Y.clear()}}}var U=w({current:"light",preference:"auto"},{persist:"au-theme"}),L={set(z){if(z==="auto"){let G=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",G?"dark":"light")}else document.documentElement.setAttribute("data-theme",z);U.state.preference=z,U.state.current=document.documentElement.getAttribute("data-theme"),N.emit(D.THEME_CHANGE,{theme:z})},get(){return document.documentElement.getAttribute("data-theme")||"light"},toggle(){let z=this.get();this.set(z==="dark"?"light":"dark")},init(){let z=typeof localStorage<"u"?localStorage.getItem("au-theme"):null;if(z&&U.state.preference==="auto"){this.set(z);try{localStorage.removeItem("au-theme")}catch(H){}return}let G=U.state.preference;if(G&&G!=="auto")this.set(G);else if(z){this.set(z);try{localStorage.removeItem("au-theme")}catch(H){}}else this.set("auto");this._mql=window.matchMedia("(prefers-color-scheme: dark)"),this._onMqlChange=(H)=>{if(U.state.preference==="auto")document.documentElement.setAttribute("data-theme",H.matches?"dark":"light")},this._mql.addEventListener("change",this._onMqlChange)},destroy(){if(this._mql&&this._onMqlChange)this._mql.removeEventListener("change",this._onMqlChange),this._mql=null,this._onMqlChange=null},get _store(){return U}};if(typeof window<"u")L.init();var M="startViewTransition"in document;async function j(z){if(M)await document.startViewTransition(async()=>{await z()}).finished;else await z()}async function u(z,{name:G="page"}={}){if(M){let H=document.createElement("style");H.textContent=`::view-transition-old(${G}), ::view-transition-new(${G}) { animation-duration: 0.3s; }`,document.head.appendChild(H);try{await j(z)}finally{try{H.remove()}catch(J){}}}else await z()}async function m(z,G){await j(()=>{window.history.pushState({},"",z),G()})}class E extends R{static baseClass="au-theme-toggle";connectedCallback(){super.connectedCallback(),this.listen(this,"click",()=>L.toggle()),N.on(D.THEME_CHANGE,()=>this.#z())}render(){this.innerHTML=A`<button class="au-theme-toggle__button" aria-label="Toggle theme"> <span class="au-theme-toggle__icon"></span> </button>`,this.#z()}#z(){let z=L.get()==="dark",G=this.querySelector(".au-theme-toggle__icon");if(G)G.textContent=z?"☀️":"\uD83C\uDF19"}}I("au-theme-toggle",E);V("au-theme-toggle",{signals:[D.THEME_CHANGE],options:{themes:["light","dark"],emits:["click"]},description:"Theme toggle button that switches between light/dark modes"});function f(z){let G=z.getAttribute("aria-labelledby");if(G){let $=G.split(" ").map((B)=>document.getElementById(B)?.textContent).filter(Boolean).join(" ");if($)return $}let H=z.getAttribute("aria-label");if(H)return H;if(z.id){let $=document.querySelector(`label[for="${z.id}"]`);if($)return $.textContent.trim()}let J=z.getAttribute("title");if(J)return J;let W=z.getAttribute("role")||z.tagName.toLowerCase();if(["button","link","tab","menuitem","option","radio","checkbox"].some(($)=>W.includes($))){let $=z.textContent?.trim();if($&&$.length<100)return $}let F=z.getAttribute("placeholder");if(F)return F;let O=z.getAttribute("value");if(O&&z.tagName.includes("INPUT"))return`Input: ${O}`;return z.tagName.toLowerCase().replace("au-","")}function d(z){let G=[],H=z.tagName.toLowerCase();if(z.hasAttribute("disabled"))return["none (disabled)"];if(z.onclick||z.hasAttribute("onclick"))G.push("click");switch(H){case"au-button":G.push("click");break;case"au-checkbox":case"au-switch":G.push("toggle","check","uncheck");break;case"au-input":case"au-textarea":G.push("type","clear","focus");break;case"au-dropdown":G.push("open","select","close");break;case"au-modal":G.push("open","close");break;case"au-tabs":G.push("select-tab");break;case"au-radio":G.push("select");break;case"au-chip":G.push("toggle","click");break;case"au-confirm":G.push("confirm","cancel");break;default:if(z.classList.contains("au-button")||z.getAttribute("role")==="button")G.push("click")}return G.length?G:["focus"]}function _(z){let G={},H=z.tagName.toLowerCase();if(z.hasAttribute("checked"))G.checked=!0;if(z.hasAttribute("disabled"))G.disabled=!0;if(z.hasAttribute("open"))G.open=!0;if(z.hasAttribute("selected"))G.selected=!0;if(z.hasAttribute("active"))G.active=!0;if(z.hasAttribute("loading"))G.loading=!0;if(z.hasAttribute("value"))G.value=z.getAttribute("value");let J=z.getAttribute("aria-checked");if(J)G.ariaChecked=J==="true";let W=z.getAttribute("aria-expanded");if(W)G.expanded=W==="true";let Y=z.getAttribute("aria-selected");if(Y)G.selected=Y==="true";switch(H){case"au-input":case"au-textarea":let F=z.querySelector("input, textarea");if(F)G.value=F.value,G.placeholder=F.placeholder;break;case"au-progress":G.value=parseFloat(z.getAttribute("value")||"0"),G.max=parseFloat(z.getAttribute("max")||"100"),G.percentage=G.value/G.max*100;break;case"au-dropdown":G.value=z.getAttribute("value"),G.open=z.classList.contains("is-open");break}return G}function v(z){let G=z.tagName.toLowerCase().replace("au-",""),H=f(z),J=_(z),W=J.disabled?" (disabled)":"",F={button:()=>`Button "${H}"${W}. ${J.loading?"Currently loading.":"Click to activate."}`,checkbox:()=>`Checkbox "${H}"${W}. Currently ${J.ariaChecked||J.checked?"checked":"unchecked"}.`,switch:()=>`Toggle switch "${H}"${W}. Currently ${J.ariaChecked||J.checked?"on":"off"}.`,input:()=>`Text input "${H}"${W}. ${J.value?`Current value: "${J.value}"`:"Empty."} ${J.placeholder?`Placeholder: "${J.placeholder}"`:""}`,textarea:()=>`Text area "${H}"${W}. ${J.value?`Contains: "${J.value.slice(0,50)}${J.value.length>50?"...":""}"`:"Empty."}`,dropdown:()=>`Dropdown "${H}"${W}. ${J.value?`Selected: "${J.value}"`:"No selection."} ${J.open?"Menu is open.":"Menu is closed."}`,modal:()=>`Modal dialog${J.open?" (currently open)":" (currently closed)"}. ${H!=="modal"?`Title: "${H}"`:""}`,tabs:()=>`Tab navigation with ${z.querySelectorAll("au-tab").length} tabs.`,tab:()=>`Tab "${H}". ${J.active?"Currently active.":"Inactive."}`,progress:()=>`Progress bar at ${Math.round(J.percentage||0)}%.`,spinner:()=>"Loading spinner indicating operation in progress.",alert:()=>`Alert message: "${z.textContent?.trim().slice(0,100)||H}"`,card:()=>`Card container${H!=="card"?` titled "${H}"`:""}.`,chip:()=>`Chip "${H}"${W}. ${J.selected?"Selected.":"Not selected."}`,badge:()=>`Badge showing "${z.textContent?.trim()||"notification"}"`,avatar:()=>`User avatar${z.getAttribute("name")?` for "${z.getAttribute("name")}"`:""}`,icon:()=>`Icon: ${z.getAttribute("name")||"decorative"}`,confirm:()=>`Confirmation dialog. ${J.open?"Waiting for user response.":"Hidden."}`,fetch:()=>`Data fetcher${J.loading?" (loading)":""}. URL: ${z.getAttribute("url")||"not set"}`}[G];if(F)return F();return`${G} component${H?` "${H}"`:""}${W}.`}function b(z){let G=z.getBoundingClientRect();return G.top<window.innerHeight&&G.bottom>0&&G.left<window.innerWidth&&G.right>0&&G.width>0&&G.height>0}function T(z=document.body,G={}){let{visibleOnly:H=!1,interactiveOnly:J=!1,types:W=null}=G,Y;if(W)Y=z.querySelectorAll(W.join(","));else Y=Array.from(z.querySelectorAll("*")).filter(($)=>$.tagName.toLowerCase().startsWith("au-")&&$.tagName.toLowerCase()!=="au-ripple-wave");let F=[],O=/*@__PURE__*/new Set(["au-button","au-checkbox","au-switch","au-input","au-textarea","au-dropdown","au-radio","au-tab","au-chip","au-modal","au-confirm"]);for(let $ of Y){let B=$.tagName.toLowerCase(),x=O.has(B),K=b($);if(H&&!K)continue;if(J&&!x)continue;let X=$.getBoundingClientRect();F.push({tag:B,id:$.id||null,label:f($),description:v($),state:_($),actions:d($),rect:{top:Math.round(X.top),left:Math.round(X.left),width:Math.round(X.width),height:Math.round(X.height)},interactive:x,visible:K})}return F}function C(z){let G=typeof z==="string"?document.querySelector(z):z;if(!G)return null;return v(G)}function h(){let z=/*@__PURE__*/new Map,G=["au-button","au-input","au-textarea","au-checkbox","au-switch","au-dropdown","au-option","au-radio","au-radio-group","au-chip","au-card","au-tabs","au-tab","au-alert","au-badge","au-progress","au-avatar","au-skeleton","au-spinner","au-modal","au-toast","au-tooltip","au-icon","au-stack","au-grid","au-container","au-navbar","au-sidebar","au-divider","au-theme-toggle","au-virtual-list","au-lazy","au-repeat","au-form","au-table","au-confirm","au-fetch"];for(let H of G){let J=customElements.get(H);if(J)z.set(H,J)}return z}function y(z,G=document.body){let H=z.toLowerCase();return T(G).filter((W)=>W.label.toLowerCase().includes(H)).map((W)=>{let Y=W.id?`#${W.id}`:`${W.tag}`;return G.querySelector(Y)}).filter(Boolean)}if(!N.hasListeners(D.TOAST_SHOW))N.on(D.TOAST_SHOW,(z)=>{g.show(z.message,z)});if(typeof window<"u"&&!window.AgentUI){window.AgentUI={Theme:L,bus:N,UIEvents:D,showToast:S,getAuComponentTree:T,describeComponent:C,findByLabel:y,getRegisteredComponents:h,auConfirm:k,ready:!1,async discoverAll(){if(!R._describeCatalog)await this.loadDescriptions();let G={},H=["au-button","au-input","au-textarea","au-card","au-modal","au-alert","au-toast","au-checkbox","au-switch","au-radio","au-dropdown","au-tabs","au-tab","au-chip","au-badge","au-avatar","au-progress","au-spinner","au-skeleton","au-tooltip","au-table","au-datatable","au-form","au-stack","au-grid","au-container","au-divider","au-drawer","au-sidebar","au-navbar","au-bottom-nav","au-layout","au-router","au-page","au-theme-toggle","au-splash","au-virtual-list","au-lazy","au-repeat","au-fetch","au-confirm","au-schema-form","au-prompt-ui","au-error-boundary","au-code","au-callout","au-icon","au-api-table","au-example","au-doc-page"];for(let J of H){let W=customElements.get(J);if(W?.describe)G[J]=W.describe()}return G},async loadDescriptions(){if(R._describeCatalog)return;let G=document.querySelectorAll("script[src]"),H="";for(let W of G)if(W.src.includes("agentui")||W.src.includes("chunks")){if(H=W.src.substring(0,W.src.lastIndexOf("/")+1),H.includes("/chunks/"))H=H.replace("/chunks/","/");break}let J=H+"describe-catalog.json";try{let W=await fetch(J);if(W.ok)R._describeCatalog=await W.json()}catch(W){if(window.AGENTUI_DEBUG)console.warn("[AgentUI] Could not load describe catalog from",J)}}};let z=()=>{if(window.AGENTUI_DEBUG);window.AgentUI.ready=!0,document.dispatchEvent(new CustomEvent("au-ready",{detail:{timestamp:Date.now()}}))};if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",z,{once:!0});else setTimeout(z,0)}export{r as yieldToMain,u as transitionNamed,j as transition,Gz as throttle,M as supportsViewTransitions,n as supportsScheduler,S as showToast,t as scheduler,o as scheduleTask,a as runImmediate,l as runBackground,s as processWithYield,Wz as processInChunks,m as navigateWithTransition,e as memo,Jz as domBatch,I as define,zz as debounce,Hz as createVisibilityObserver,p as createRipple,N as bus,c as attachRipple,D as UIEvents,L as Theme,i as RippleMixin,E as AuThemeToggle,R as AuElement};

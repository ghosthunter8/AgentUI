import{c as n,d as o,e as r}from"./chunk-211vny06.js";import{f as P,g as N,h as T,i as E,j as s,k as a,l,m as t,n as e,o as zz,q as d,s as b}from"./chunk-3ycrdmsn.js";import{A as $z,u as Gz,v as Hz,w as Jz,x as Wz,y as Xz,z as Zz}from"./chunk-5b1r3q6c.js";import{B as R,C as I,F as f}from"./chunk-kz77cwwb.js";function V(z,G={}){let J=G.persist?`agentui:${G.persist}`:null,H={...z},W=/*@__PURE__*/new Map,q=/*@__PURE__*/new Set,Y=!1,O=/*@__PURE__*/new Map;if(J)try{let X=typeof localStorage<"u"?localStorage.getItem(J):null;if(X){let Z=JSON.parse(X);if(Z&&typeof Z==="object"){for(let F of Object.keys(z))if(F in Z){let Q=z[F],D=Z[F];if(Q===null||Q===void 0)H[F]=D;else if(Array.isArray(Q)){if(Array.isArray(D))H[F]=D}else if(typeof D===typeof Q)H[F]=D}}}}catch(X){}function $(X,Z,F){let Q=W.get(X);if(Q)for(let D of Q)D(Z,F);for(let D of q)D(X,Z,F)}function U(){if(!J)return;try{if(typeof localStorage<"u")localStorage.setItem(J,JSON.stringify(H))}catch(X){}}let K=/*@__PURE__*/new Set(["__proto__","constructor","prototype"]),x=new Proxy(H,{get(X,Z){return X[Z]},set(X,Z,F){if(K.has(Z))return console.warn(`[AgentUI Store] Blocked dangerous key: "${String(Z)}"`),!0;let Q=X[Z];if(Object.is(Q,F))return!0;if(X[Z]=F,Y){if(!O.has(Z))O.set(Z,{oldVal:Q});O.get(Z).newVal=F}else $(Z,F,Q),U();return!0}});return{state:x,subscribe(X,Z){if(X==="*")return q.add(Z),()=>q.delete(Z);if(!W.has(X))W.set(X,/*@__PURE__*/new Set);return W.get(X).add(Z),()=>{let F=W.get(X);if(F){if(F.delete(Z),F.size===0)W.delete(X)}}},batch(X){Y=!0,O.clear();try{X()}finally{Y=!1;for(let[Z,{newVal:F,oldVal:Q}]of O)if(!Object.is(F,Q))$(Z,F,Q);O.clear(),U()}},getState(){return{...H}},setState(X){for(let[Z,F]of Object.entries(X))x[Z]=F},destroy(){W.clear(),q.clear()}}}var L=V({current:"light",preference:"auto"},{persist:"au-theme"}),B={set(z){if(z==="auto"){let G=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",G?"dark":"light")}else document.documentElement.setAttribute("data-theme",z);L.state.preference=z,L.state.current=document.documentElement.getAttribute("data-theme"),P.emit(N.THEME_CHANGE,{theme:z})},get(){return document.documentElement.getAttribute("data-theme")||"light"},toggle(){let z=this.get();this.set(z==="dark"?"light":"dark")},init(){let z=typeof localStorage<"u"?localStorage.getItem("au-theme"):null;if(z&&L.state.preference==="auto"){this.set(z);try{localStorage.removeItem("au-theme")}catch(J){}return}let G=L.state.preference;if(G&&G!=="auto")this.set(G);else if(z){this.set(z);try{localStorage.removeItem("au-theme")}catch(J){}}else this.set("auto");this._mql=window.matchMedia("(prefers-color-scheme: dark)"),this._onMqlChange=(J)=>{if(L.state.preference==="auto")document.documentElement.setAttribute("data-theme",J.matches?"dark":"light")},this._mql.addEventListener("change",this._onMqlChange)},destroy(){if(this._mql&&this._onMqlChange)this._mql.removeEventListener("change",this._onMqlChange),this._mql=null,this._onMqlChange=null},get _store(){return L}};if(typeof window<"u")B.init();var w="startViewTransition"in document;async function M(z){if(w)await document.startViewTransition(async()=>{await z()}).finished;else await z()}async function m(z,{name:G="page"}={}){if(w){let J=document.createElement("style");J.textContent=`::view-transition-old(${G}), ::view-transition-new(${G}) { animation-duration: 0.3s; }`,document.head.appendChild(J);try{await M(z)}finally{try{J.remove()}catch(H){}}}else await z()}async function p(z,G){await M(()=>{window.history.pushState({},"",z),G()})}class j extends R{static baseClass="au-theme-toggle";connectedCallback(){super.connectedCallback(),this.listen(this,"click",()=>B.toggle()),P.on(N.THEME_CHANGE,()=>this.#z())}render(){this.innerHTML=f`<button class="au-theme-toggle__button" aria-label="Toggle theme"> <span class="au-theme-toggle__icon"></span> </button>`,this.#z()}#z(){let z=B.get()==="dark",G=this.querySelector(".au-theme-toggle__icon");if(G)G.textContent=z?"☀️":"\uD83C\uDF19"}}I("au-theme-toggle",j);E("au-theme-toggle",{signals:[N.THEME_CHANGE],options:{themes:["light","dark"],emits:["click"]},description:"Theme toggle button that switches between light/dark modes"});function v(z){let G=z.getAttribute("aria-labelledby");if(G){let $=G.split(" ").map((U)=>document.getElementById(U)?.textContent).filter(Boolean).join(" ");if($)return $}let J=z.getAttribute("aria-label");if(J)return J;if(z.id){let $=document.querySelector(`label[for="${z.id}"]`);if($)return $.textContent.trim()}let H=z.getAttribute("title");if(H)return H;let W=z.getAttribute("role")||z.tagName.toLowerCase();if(["button","link","tab","menuitem","option","radio","checkbox"].some(($)=>W.includes($))){let $=z.textContent?.trim();if($&&$.length<100)return $}let Y=z.getAttribute("placeholder");if(Y)return Y;let O=z.getAttribute("value");if(O&&z.tagName.includes("INPUT"))return`Input: ${O}`;return z.tagName.toLowerCase().replace("au-","")}function c(z){let G=[],J=z.tagName.toLowerCase();if(z.hasAttribute("disabled"))return["none (disabled)"];if(z.onclick||z.hasAttribute("onclick"))G.push("click");switch(J){case"au-button":G.push("click");break;case"au-checkbox":case"au-switch":G.push("toggle","check","uncheck");break;case"au-input":case"au-textarea":G.push("type","clear","focus");break;case"au-dropdown":G.push("open","select","close");break;case"au-modal":G.push("open","close");break;case"au-tabs":G.push("select-tab");break;case"au-radio":G.push("select");break;case"au-chip":G.push("toggle","click");break;case"au-confirm":G.push("confirm","cancel");break;default:if(z.classList.contains("au-button")||z.getAttribute("role")==="button")G.push("click")}return G.length?G:["focus"]}function _(z){let G={},J=z.tagName.toLowerCase();if(z.hasAttribute("checked"))G.checked=!0;if(z.hasAttribute("disabled"))G.disabled=!0;if(z.hasAttribute("open"))G.open=!0;if(z.hasAttribute("selected"))G.selected=!0;if(z.hasAttribute("active"))G.active=!0;if(z.hasAttribute("loading"))G.loading=!0;if(z.hasAttribute("value"))G.value=z.getAttribute("value");let H=z.getAttribute("aria-checked");if(H)G.ariaChecked=H==="true";let W=z.getAttribute("aria-expanded");if(W)G.expanded=W==="true";let q=z.getAttribute("aria-selected");if(q)G.selected=q==="true";switch(J){case"au-input":case"au-textarea":let Y=z.querySelector("input, textarea");if(Y)G.value=Y.value,G.placeholder=Y.placeholder;break;case"au-progress":G.value=parseFloat(z.getAttribute("value")||"0"),G.max=parseFloat(z.getAttribute("max")||"100"),G.percentage=G.value/G.max*100;break;case"au-dropdown":G.value=z.getAttribute("value"),G.open=z.classList.contains("is-open");break}return G}function h(z){let G=z.tagName.toLowerCase().replace("au-",""),J=v(z),H=_(z),W=H.disabled?" (disabled)":"",Y={button:()=>`Button "${J}"${W}. ${H.loading?"Currently loading.":"Click to activate."}`,checkbox:()=>`Checkbox "${J}"${W}. Currently ${H.ariaChecked||H.checked?"checked":"unchecked"}.`,switch:()=>`Toggle switch "${J}"${W}. Currently ${H.ariaChecked||H.checked?"on":"off"}.`,input:()=>`Text input "${J}"${W}. ${H.value?`Current value: "${H.value}"`:"Empty."} ${H.placeholder?`Placeholder: "${H.placeholder}"`:""}`,textarea:()=>`Text area "${J}"${W}. ${H.value?`Contains: "${H.value.slice(0,50)}${H.value.length>50?"...":""}"`:"Empty."}`,dropdown:()=>`Dropdown "${J}"${W}. ${H.value?`Selected: "${H.value}"`:"No selection."} ${H.open?"Menu is open.":"Menu is closed."}`,modal:()=>`Modal dialog${H.open?" (currently open)":" (currently closed)"}. ${J!=="modal"?`Title: "${J}"`:""}`,tabs:()=>`Tab navigation with ${z.querySelectorAll("au-tab").length} tabs.`,tab:()=>`Tab "${J}". ${H.active?"Currently active.":"Inactive."}`,progress:()=>`Progress bar at ${Math.round(H.percentage||0)}%.`,spinner:()=>"Loading spinner indicating operation in progress.",alert:()=>`Alert message: "${z.textContent?.trim().slice(0,100)||J}"`,card:()=>`Card container${J!=="card"?` titled "${J}"`:""}.`,chip:()=>`Chip "${J}"${W}. ${H.selected?"Selected.":"Not selected."}`,badge:()=>`Badge showing "${z.textContent?.trim()||"notification"}"`,avatar:()=>`User avatar${z.getAttribute("name")?` for "${z.getAttribute("name")}"`:""}`,icon:()=>`Icon: ${z.getAttribute("name")||"decorative"}`,confirm:()=>`Confirmation dialog. ${H.open?"Waiting for user response.":"Hidden."}`,fetch:()=>`Data fetcher${H.loading?" (loading)":""}. URL: ${z.getAttribute("url")||"not set"}`}[G];if(Y)return Y();return`${G} component${J?` "${J}"`:""}${W}.`}function i(z){let G=z.getBoundingClientRect();return G.top<window.innerHeight&&G.bottom>0&&G.left<window.innerWidth&&G.right>0&&G.width>0&&G.height>0}function S(z=document.body,G={}){let{visibleOnly:J=!1,interactiveOnly:H=!1,types:W=null}=G,q;if(W)q=z.querySelectorAll(W.join(","));else q=Array.from(z.querySelectorAll("*")).filter(($)=>$.tagName.toLowerCase().startsWith("au-")&&$.tagName.toLowerCase()!=="au-ripple-wave");let Y=[],O=/*@__PURE__*/new Set(["au-button","au-checkbox","au-switch","au-input","au-textarea","au-dropdown","au-radio","au-tab","au-chip","au-modal","au-confirm"]);for(let $ of q){let U=$.tagName.toLowerCase(),K=O.has(U),x=i($);if(J&&!x)continue;if(H&&!K)continue;let X=$.getBoundingClientRect();Y.push({tag:U,id:$.id||null,label:v($),description:h($),state:_($),actions:c($),rect:{top:Math.round(X.top),left:Math.round(X.left),width:Math.round(X.width),height:Math.round(X.height)},interactive:K,visible:x})}return Y}function A(z){let G=typeof z==="string"?document.querySelector(z):z;if(!G)return null;return h(G)}function C(){let z=/*@__PURE__*/new Map,G=["au-button","au-input","au-textarea","au-checkbox","au-switch","au-dropdown","au-option","au-radio","au-radio-group","au-chip","au-card","au-tabs","au-tab","au-alert","au-badge","au-progress","au-avatar","au-skeleton","au-spinner","au-modal","au-toast","au-tooltip","au-icon","au-stack","au-grid","au-container","au-navbar","au-sidebar","au-divider","au-theme-toggle","au-virtual-list","au-lazy","au-repeat","au-form","au-table","au-confirm","au-fetch"];for(let J of G){let H=customElements.get(J);if(H)z.set(J,H)}return z}function u(z,G=document.body){let J=z.toLowerCase();return S(G).filter((W)=>W.label.toLowerCase().includes(J)).map((W)=>{let q=W.id?`#${W.id}`:`${W.tag}`;return G.querySelector(q)}).filter(Boolean)}var y=["au-button","au-input","au-textarea","au-card","au-modal","au-alert","au-toast","au-checkbox","au-switch","au-radio","au-dropdown","au-tabs","au-tab","au-chip","au-badge","au-avatar","au-progress","au-spinner","au-skeleton","au-tooltip","au-table","au-datatable","au-form","au-stack","au-grid","au-container","au-divider","au-drawer","au-sidebar","au-navbar","au-bottom-nav","au-layout","au-router","au-page","au-theme-toggle","au-splash","au-virtual-list","au-lazy","au-repeat","au-fetch","au-confirm","au-schema-form","au-prompt-ui","au-error-boundary","au-code","au-callout","au-icon","au-api-table","au-example","au-doc-page"];async function g(z,G={}){if(z._describeCatalog)return;let J=document.querySelectorAll("script[src]"),H="";for(let q of J)if(G.checkChunks?q.src.includes("agentui")||q.src.includes("chunks"):q.src.includes("agentui")){if(H=q.src.substring(0,q.src.lastIndexOf("/")+1),G.checkChunks&&H.includes("/chunks/"))H=H.replace("/chunks/","/");break}let W=H+"describe-catalog.json";try{let q=await fetch(W);if(q.ok)z._describeCatalog=await q.json()}catch(q){if(window.AGENTUI_DEBUG)console.warn("[AgentUI] Could not load describe catalog from",W)}}function k(z){return async function(){if(!z._describeCatalog)await this.loadDescriptions();let J={};for(let H of y){let W=customElements.get(H);if(W?.describe)J[H]=W.describe()}return J}}if(!P.hasListeners(N.TOAST_SHOW))P.on(N.TOAST_SHOW,(z)=>{d.show(z.message,z)});if(typeof window<"u"&&!window.AgentUI){window.AgentUI={Theme:B,bus:P,UIEvents:N,showToast:T,getAuComponentTree:S,describeComponent:A,findByLabel:u,getRegisteredComponents:C,auConfirm:b,ready:!1,discoverAll:k(R),async loadDescriptions(){await g(R,{checkChunks:!0})}};let z=()=>{if(window.AGENTUI_DEBUG);window.AgentUI.ready=!0,document.dispatchEvent(new CustomEvent("au-ready",{detail:{timestamp:Date.now()}}))};if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",z,{once:!0});else setTimeout(z,0)}export{l as yieldToMain,m as transitionNamed,M as transition,Wz as throttle,w as supportsViewTransitions,s as supportsScheduler,T as showToast,Gz as scheduler,a as scheduleTask,zz as runImmediate,e as runBackground,t as processWithYield,$z as processInChunks,p as navigateWithTransition,Hz as memo,Zz as domBatch,I as define,Jz as debounce,Xz as createVisibilityObserver,n as createRipple,P as bus,o as attachRipple,N as UIEvents,B as Theme,r as RippleMixin,j as AuThemeToggle,R as AuElement};

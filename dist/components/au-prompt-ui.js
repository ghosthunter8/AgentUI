import{o as K}from"./chunk-0f7ph7sp.js";import{p as N,q as O}from"./chunk-4tm8p8jh.js";class Y extends N{static get observedAttributes(){return["placeholder","loading","disabled","multiline"]}static baseClass="au-prompt-input";static cssFile="prompt-ui";constructor(){super();this._value=""}get placeholder(){return this.getAttribute("placeholder")||"Type a message..."}get loading(){return this.hasAttribute("loading")}set loading(q){if(q)this.setAttribute("loading","");else this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}get multiline(){return this.hasAttribute("multiline")}get value(){return this._value}set value(q){this._value=q;let z=this.querySelector(".au-prompt-input-field");if(z)z.value=q}connectedCallback(){super.connectedCallback(),this.render()}attributeChangedCallback(q,z,y){if(!this.isConnected||z===y)return;let F=this.querySelector(".au-prompt-input-container");if(!F){this.render();return}switch(q){case"loading":{F.classList.toggle("au-prompt-input-loading",this.loading);let D=this.querySelector(".au-prompt-input-submit");if(D)D.disabled=this.disabled||this.loading,D.innerHTML=this.loading?'<div class="au-prompt-input-spinner"></div>':'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>';break}case"disabled":{let D=this.querySelector(".au-prompt-input-field"),J=this.querySelector(".au-prompt-input-submit");if(D)D.disabled=this.disabled;if(J)J.disabled=this.disabled||this.loading;break}case"placeholder":{let D=this.querySelector(".au-prompt-input-field");if(D)D.placeholder=this.placeholder;break}default:this.render()}}_submit(){if(this.loading||this.disabled||!this._value.trim())return;this.dispatchEvent(new CustomEvent("au-submit",{bubbles:!0,detail:{value:this._value.trim()}}))}_handleKeydown(q){if(q.key==="Enter"&&!q.shiftKey&&!this.multiline)q.preventDefault(),this._submit();else if(q.key==="Enter"&&q.metaKey)q.preventDefault(),this._submit()}render(){let q=this.multiline,z=this.placeholder;this.innerHTML=K`
            <div class="au-prompt-input-container ${this.loading?"au-prompt-input-loading":""}">
                ${q?K`<textarea class="au-prompt-input-field" placeholder="${z}" ${this.disabled?"disabled":""}></textarea>`:K`<input class="au-prompt-input-field" type="text" placeholder="${z}" ${this.disabled?"disabled":""} />`}
                <button class="au-prompt-input-submit" ${this.disabled||this.loading?"disabled":""}>
                    ${this.loading?'<div class="au-prompt-input-spinner"></div>':'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>'}
                </button>
            </div>
        `;let y=this.querySelector(".au-prompt-input-field"),F=this.querySelector(".au-prompt-input-submit");y.value=this._value,this.listen(y,"input",(D)=>{this._value=D.target.value,this.dispatchEvent(new CustomEvent("au-input",{bubbles:!0,detail:{value:this._value}}))}),this.listen(y,"keydown",(D)=>this._handleKeydown(D)),this.listen(F,"click",()=>this._submit())}}class Z extends N{static get observedAttributes(){return["language","filename"]}static baseClass="au-code-block";constructor(){super()}get language(){return this.getAttribute("language")||"text"}get filename(){return this.getAttribute("filename")}connectedCallback(){super.connectedCallback(),this.render()}attributeChangedCallback(q,z,y){if(this.isConnected&&z!==y)this.render()}async _copy(){let q=this.querySelector("code"),z=q?q.textContent.trim():"";try{await navigator.clipboard.writeText(z);let y=this.querySelector(".au-code-block-copy-btn");y.textContent="✓ Copied",this.setTimeout(()=>{y.textContent="Copy"},2000)}catch(y){console.error("Failed to copy:",y)}}render(){let q=this.textContent.trim();this.innerHTML=K`
            <div class="au-code-block-container">
                <div class="au-code-block-header">
                    ${this.filename?K`<span class="au-code-block-filename">${this.filename}</span>`:K`<span class="au-code-block-language">${this.language}</span>`}
                    <button class="au-code-block-copy-btn">Copy</button>
                </div>
                <pre class="au-code-block-pre"><code>${q}</code></pre>
            </div>
        `,this.listen(this.querySelector(".au-code-block-copy-btn"),"click",()=>this._copy())}}class _ extends N{static get observedAttributes(){return["actions"]}static baseClass="au-agent-toolbar";constructor(){super()}get actions(){let q=this.getAttribute("actions");return q?q.split(",").map((z)=>z.trim()):["copy","regenerate","thumbsUp","thumbsDown"]}connectedCallback(){super.connectedCallback(),this.render()}render(){let q={copy:{icon:"\uD83D\uDCCB",label:"Copy"},regenerate:{icon:"\uD83D\uDD04",label:"Regenerate"},thumbsUp:{icon:"\uD83D\uDC4D",label:"Good response"},thumbsDown:{icon:"\uD83D\uDC4E",label:"Poor response"},edit:{icon:"✏️",label:"Edit"},share:{icon:"↗️",label:"Share"}},z=this.actions.filter((y)=>q[y]).map((y)=>`
                <button class="au-agent-toolbar-btn" data-action="${y}" title="${q[y].label}">
                    ${q[y].icon}
                </button>
            `).join("");this.innerHTML=z}handleAction(q,z,y){this.dispatchEvent(new CustomEvent("au-action",{bubbles:!0,detail:{action:q}}))}}class $ extends N{static get observedAttributes(){return["role","avatar","name","timestamp"]}static baseClass="au-message-bubble";constructor(){super();this._originalContent=null}get role(){return this.getAttribute("role")||"user"}get avatar(){return this.getAttribute("avatar")}get name(){return this.getAttribute("name")||(this.role==="user"?"You":"Assistant")}get timestamp(){return this.getAttribute("timestamp")}connectedCallback(){if(super.connectedCallback(),!this._originalContent)this._originalContent=Array.from(this.childNodes);this.render()}attributeChangedCallback(q,z,y){if(this.isConnected&&z!==y)this.render()}render(){let q=this.role==="user",z=q?"\uD83D\uDC64":"\uD83E\uDD16",y=q?"au-message-bubble-user":"au-message-bubble-assistant",F=document.createElement("div");F.className=`au-message-bubble-message ${y}`;let D=document.createElement("div");if(D.className=`au-message-bubble-avatar ${y}`,this.avatar){let G=document.createElement("img");G.src=this.avatar,G.alt=this.name,D.appendChild(G)}else D.textContent=z;F.appendChild(D);let J=document.createElement("div");J.className="au-message-bubble-content";let Q=document.createElement("div");Q.className=`au-message-bubble-header ${y}`;let W=document.createElement("span");if(W.className="au-message-bubble-name",W.textContent=this.name,Q.appendChild(W),this.timestamp){let G=document.createElement("span");G.className="au-message-bubble-timestamp",G.textContent=this.timestamp,Q.appendChild(G)}J.appendChild(Q);let X=document.createElement("div");if(X.className=`au-message-bubble-bubble ${y}`,this._originalContent)this._originalContent.forEach((G)=>X.appendChild(G.cloneNode(!0)));J.appendChild(X),F.appendChild(J),this.innerHTML="",this.appendChild(F)}}O("au-prompt-input",Y);O("au-code-block",Z);O("au-agent-toolbar",_);O("au-message-bubble",$);export{Y as AuPromptInput,$ as AuMessageBubble,Z as AuCodeBlock,_ as AuAgentToolbar};

import{j as W}from"./chunk-bxze911z.js";import{n as J}from"./chunk-765h5dy2.js";class X extends J{static get observedAttributes(){return["placeholder","loading","disabled","multiline"]}static baseClass="au-prompt-input";static cssFile="prompt-ui";constructor(){super();this._value=""}get placeholder(){return this.getAttribute("placeholder")||"Type a message..."}get loading(){return this.hasAttribute("loading")}set loading(q){if(q)this.setAttribute("loading","");else this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}get multiline(){return this.hasAttribute("multiline")}get value(){return this._value}set value(q){this._value=q;let y=this.querySelector(".au-prompt-input-field");if(y)y.value=q}connectedCallback(){super.connectedCallback(),this.render()}attributeChangedCallback(q,y,z){if(this.isConnected&&y!==z)this.render()}_submit(){if(this.loading||this.disabled||!this._value.trim())return;this.dispatchEvent(new CustomEvent("au-submit",{bubbles:!0,detail:{value:this._value.trim()}}))}_handleKeydown(q){if(q.key==="Enter"&&!q.shiftKey&&!this.multiline)q.preventDefault(),this._submit();else if(q.key==="Enter"&&q.metaKey)q.preventDefault(),this._submit()}render(){let q=this.multiline,y=W(this.placeholder);this.innerHTML=`
            <div class="au-prompt-input-container ${this.loading?"au-prompt-input-loading":""}">
                ${q?`<textarea class="au-prompt-input-field" placeholder="${y}" ${this.disabled?"disabled":""}></textarea>`:`<input class="au-prompt-input-field" type="text" placeholder="${y}" ${this.disabled?"disabled":""} />`}
                <button class="au-prompt-input-submit" ${this.disabled||this.loading?"disabled":""}>
                    ${this.loading?'<div class="au-prompt-input-spinner"></div>':'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>'}
                </button>
            </div>
        `;let z=this.querySelector(".au-prompt-input-field"),G=this.querySelector(".au-prompt-input-submit");z.value=this._value,this.listen(z,"input",(F)=>{this._value=F.target.value,this.dispatchEvent(new CustomEvent("au-input",{bubbles:!0,detail:{value:this._value}}))}),this.listen(z,"keydown",(F)=>this._handleKeydown(F)),this.listen(G,"click",()=>this._submit())}}class Y extends J{static get observedAttributes(){return["language","filename"]}static baseClass="au-code-block";constructor(){super()}get language(){return this.getAttribute("language")||"text"}get filename(){return this.getAttribute("filename")}connectedCallback(){super.connectedCallback(),this.render()}attributeChangedCallback(q,y,z){if(this.isConnected&&y!==z)this.render()}async _copy(){let q=this.textContent.trim();try{await navigator.clipboard.writeText(q);let y=this.querySelector(".au-code-block-copy-btn");y.textContent="✓ Copied",this.setTimeout(()=>{y.textContent="Copy"},2000)}catch(y){console.error("Failed to copy:",y)}}render(){let q=this.textContent.trim();this.innerHTML=`
            <div class="au-code-block-container">
                <div class="au-code-block-header">
                    ${this.filename?`<span class="au-code-block-filename">${this.filename}</span>`:`<span class="au-code-block-language">${this.language}</span>`}
                    <button class="au-code-block-copy-btn">Copy</button>
                </div>
                <pre class="au-code-block-pre"><code>${W(q)}</code></pre>
            </div>
        `,this.listen(this.querySelector(".au-code-block-copy-btn"),"click",()=>this._copy())}}class Z extends J{static get observedAttributes(){return["actions"]}static baseClass="au-agent-toolbar";constructor(){super()}get actions(){let q=this.getAttribute("actions");return q?q.split(",").map((y)=>y.trim()):["copy","regenerate","thumbsUp","thumbsDown"]}connectedCallback(){super.connectedCallback(),this.render()}render(){let q={copy:{icon:"\uD83D\uDCCB",label:"Copy"},regenerate:{icon:"\uD83D\uDD04",label:"Regenerate"},thumbsUp:{icon:"\uD83D\uDC4D",label:"Good response"},thumbsDown:{icon:"\uD83D\uDC4E",label:"Poor response"},edit:{icon:"✏️",label:"Edit"},share:{icon:"↗️",label:"Share"}},y=this.actions.filter((z)=>q[z]).map((z)=>`
                <button class="au-agent-toolbar-btn" data-action="${z}" title="${q[z].label}">
                    ${q[z].icon}
                </button>
            `).join("");this.innerHTML=y}handleAction(q,y,z){this.dispatchEvent(new CustomEvent("au-action",{bubbles:!0,detail:{action:q}}))}}class _ extends J{static get observedAttributes(){return["role","avatar","name","timestamp"]}static baseClass="au-message-bubble";constructor(){super();this._originalContent=null}get role(){return this.getAttribute("role")||"user"}get avatar(){return this.getAttribute("avatar")}get name(){return this.getAttribute("name")||(this.role==="user"?"You":"Assistant")}get timestamp(){return this.getAttribute("timestamp")}connectedCallback(){if(super.connectedCallback(),!this._originalContent)this._originalContent=Array.from(this.childNodes);this.render()}attributeChangedCallback(q,y,z){if(this.isConnected&&y!==z)this.render()}render(){let q=this.role==="user",y=q?"\uD83D\uDC64":"\uD83E\uDD16",z=q?"au-message-bubble-user":"au-message-bubble-assistant",G=document.createElement("div");G.className=`au-message-bubble-message ${z}`;let F=document.createElement("div");if(F.className=`au-message-bubble-avatar ${z}`,this.avatar){let D=document.createElement("img");D.src=this.avatar,D.alt=this.name,F.appendChild(D)}else F.textContent=y;G.appendChild(F);let K=document.createElement("div");K.className="au-message-bubble-content";let N=document.createElement("div");N.className=`au-message-bubble-header ${z}`;let O=document.createElement("span");if(O.className="au-message-bubble-name",O.textContent=this.name,N.appendChild(O),this.timestamp){let D=document.createElement("span");D.className="au-message-bubble-timestamp",D.textContent=this.timestamp,N.appendChild(D)}K.appendChild(N);let Q=document.createElement("div");if(Q.className=`au-message-bubble-bubble ${z}`,this._originalContent)this._originalContent.forEach((D)=>Q.appendChild(D.cloneNode(!0)));K.appendChild(Q),G.appendChild(K),this.innerHTML="",this.appendChild(G)}}if(!customElements.get("au-prompt-input"))customElements.define("au-prompt-input",X);if(!customElements.get("au-code-block"))customElements.define("au-code-block",Y);if(!customElements.get("au-agent-toolbar"))customElements.define("au-agent-toolbar",Z);if(!customElements.get("au-message-bubble"))customElements.define("au-message-bubble",_);export{X as AuPromptInput,_ as AuMessageBubble,Y as AuCodeBlock,Z as AuAgentToolbar};

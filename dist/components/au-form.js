import{t as v,u as w}from"./chunk-j65yb8cs.js";class x extends v{static baseClass="au-form";static observedAttributes=["action","method"];connectedCallback(){super.connectedCallback(),this.listen(this,"submit",(k)=>{k.preventDefault(),this.#k()}),this.listen(this,"keydown",(k)=>{if(k.key==="Enter"&&k.target.matches("input"))k.preventDefault(),this.#k()})}render(){if(this.setAttribute("role","form"),this.hasAttribute("debug"))requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!this.querySelector("au-input, au-button, au-select, au-textarea, input, button, select, textarea"))this.logError("EMPTY_FORM","Form appears to be empty. Add input controls.")})})}#k(){let k=this.getFormData(),q=this.validate();if(q)this.emit("au-submit",{data:k,isValid:q});else this.emit("au-invalid",{data:k,errors:this.#q()})}getFormData(){let k={};return this.querySelectorAll("au-input[name]").forEach((q)=>{k[q.getAttribute("name")]=q.value}),this.querySelectorAll("input[name], select[name], textarea[name]").forEach((q)=>{if(q.type==="checkbox")k[q.name]=q.checked;else k[q.name]=q.value}),k}getValues(){return this.getFormData()}validate(){let k=!0;return this.querySelectorAll("[required]").forEach((q)=>{if(!(q.value||q.getAttribute("value")||"").trim())q.classList.add("is-invalid"),k=!1;else q.classList.remove("is-invalid")}),k}#q(){let k=[];return this.querySelectorAll(".is-invalid").forEach((q)=>{k.push({name:q.getAttribute("name"),message:"This field is required"})}),k}reset(){this.querySelectorAll("au-input").forEach((k)=>{k.value=""}),this.querySelectorAll("input, select, textarea").forEach((k)=>{k.value=""}),this.querySelectorAll(".is-invalid").forEach((k)=>{k.classList.remove("is-invalid")}),this.emit("au-reset")}}w("au-form",x);export{x as AuForm};

import{n as R,o as X}from"./chunk-0f7ph7sp.js";import{p as K,q as Q}from"./chunk-4tm8p8jh.js";var _="scheduler"in globalThis;function J(){return new Promise((q)=>{requestAnimationFrame(()=>requestAnimationFrame(q))})}class Y extends K{static baseClass="au-modal";static cssFile="overlays";static observedAttributes=["open","size"];#q=null;connectedCallback(){if(!this.hasAttribute("data-rendered"))this._userContent=this.innerHTML,this.setAttribute("data-rendered","true");super.connectedCallback(),this.#G()}render(){if(this.querySelector("dialog"))return;let q=this.attr("size","md"),G=this._userContent||"";this.innerHTML=X`
            <dialog class="au-modal__dialog au-modal--${q}">
                <button class="au-modal__close" aria-label="Close">âœ•</button>
                <div class="au-modal__body">${R(G)}</div>
            </dialog>
        `,this.#q=this.querySelector("dialog")}#G(){if(this.#q=this.querySelector("dialog"),!this.#q)return;this.listen(this.#q,"close",()=>{this.removeAttribute("open"),this.classList.remove("is-open","is-visible"),document.body.style.overflow=""}),this.listen(this.#q,"cancel",(G)=>{G.preventDefault(),this.close()}),this.listen(this.#q,"click",(G)=>{if(G.target===this.#q)this.close()});let q=this.querySelector(".au-modal__close");if(q)this.listen(q,"click",()=>{this.close()})}update(q,G,H){if(q==="open"){if(G!==null)this.#H()}}#H(){if(!this.#q||this.#q.open)return;this.classList.add("is-open"),this.#q.showModal(),document.body.style.overflow="hidden",this.emit("au-open"),J().then(()=>this.classList.add("is-visible"))}open(){this.setAttribute("open","")}close(){if(!this.#q)return;this.classList.remove("is-visible");let q=!1,G=()=>{if(q)return;if(q=!0,this.#q&&this.#q.open)this.#q.close();this.removeAttribute("open"),this.classList.remove("is-open"),document.body.style.overflow="",this.emit("au-close")},H=this.#q,I=(Z)=>{if(Z.target===H)H.removeEventListener("transitionend",I),G()};H.addEventListener("transitionend",I),this.setTimeout(()=>{H.removeEventListener("transitionend",I),G()},200)}}Q("au-modal",Y);
export{Y as b};

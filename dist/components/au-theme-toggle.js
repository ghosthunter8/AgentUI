import{n as B,o as Z,p as A}from"./chunk-6wcgg1yk.js";import{s as j}from"./chunk-kfvs9a30.js";import{t as D,u as I}from"./chunk-fvgsrqgj.js";function U(G,J={}){let N=J.persist?`agentui:${J.persist}`:null,Q={...G},P=/*@__PURE__*/new Map,$=/*@__PURE__*/new Set,O=!1,W=/*@__PURE__*/new Map;if(N)try{let z=typeof localStorage<"u"?localStorage.getItem(N):null;if(z){let q=JSON.parse(z);if(q&&typeof q==="object"){for(let F of Object.keys(G))if(F in q){let H=G[F],M=q[F];if(H===null||H===void 0)Q[F]=M;else if(Array.isArray(H)){if(Array.isArray(M))Q[F]=M}else if(typeof M===typeof H)Q[F]=M}}}}catch(z){}function R(z,q,F){let H=P.get(z);if(H)for(let M of H)M(q,F);for(let M of $)M(z,q,F)}function Y(){if(!N)return;try{if(typeof localStorage<"u")localStorage.setItem(N,JSON.stringify(Q))}catch(z){}}let T=/*@__PURE__*/new Set(["__proto__","constructor","prototype"]),x=new Proxy(Q,{get(z,q){return z[q]},set(z,q,F){if(T.has(q))return console.warn(`[AgentUI Store] Blocked dangerous key: "${String(q)}"`),!0;let H=z[q];if(Object.is(H,F))return!0;if(z[q]=F,O){if(!W.has(q))W.set(q,{oldVal:H});W.get(q).newVal=F}else R(q,F,H),Y();return!0}});return{state:x,subscribe(z,q){if(z==="*")return $.add(q),()=>$.delete(q);if(!P.has(z))P.set(z,/*@__PURE__*/new Set);return P.get(z).add(q),()=>{let F=P.get(z);if(F){if(F.delete(q),F.size===0)P.delete(z)}}},batch(z){O=!0,W.clear();try{z()}finally{O=!1;for(let[q,{newVal:F,oldVal:H}]of W)if(!Object.is(F,H))R(q,F,H);W.clear(),Y()}},getState(){return{...Q}},setState(z){for(let[q,F]of Object.entries(z))x[q]=F},destroy(){P.clear(),$.clear()}}}var X=U({current:"light",preference:"auto"},{persist:"au-theme"}),L={set(G){if(G==="auto"){let J=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",J?"dark":"light")}else document.documentElement.setAttribute("data-theme",G);X.state.preference=G,X.state.current=document.documentElement.getAttribute("data-theme"),B.emit(Z.THEME_CHANGE,{theme:G})},get(){return document.documentElement.getAttribute("data-theme")||"light"},toggle(){let G=this.get();this.set(G==="dark"?"light":"dark")},init(){let G=typeof localStorage<"u"?localStorage.getItem("au-theme"):null;if(G&&X.state.preference==="auto"){this.set(G);try{localStorage.removeItem("au-theme")}catch(N){}return}let J=X.state.preference;if(J&&J!=="auto")this.set(J);else if(G){this.set(G);try{localStorage.removeItem("au-theme")}catch(N){}}else this.set("auto");this._mql=window.matchMedia("(prefers-color-scheme: dark)"),this._onMqlChange=(N)=>{if(X.state.preference==="auto")document.documentElement.setAttribute("data-theme",N.matches?"dark":"light")},this._mql.addEventListener("change",this._onMqlChange)},destroy(){if(this._mql&&this._onMqlChange)this._mql.removeEventListener("change",this._onMqlChange),this._mql=null,this._onMqlChange=null},get _store(){return X}};if(typeof window<"u")L.init();class E extends D{static baseClass="au-theme-toggle";connectedCallback(){super.connectedCallback(),this.listen(this,"click",()=>L.toggle()),B.on(Z.THEME_CHANGE,()=>this.#q())}render(){this.innerHTML=j`<button class="au-theme-toggle__button" aria-label="Toggle theme"> <span class="au-theme-toggle__icon"></span> </button>`,this.#q()}#q(){let G=L.get()==="dark",J=this.querySelector(".au-theme-toggle__icon");if(J)J.textContent=G?"☀️":"\uD83C\uDF19"}}I("au-theme-toggle",E);A("au-theme-toggle",{signals:[Z.THEME_CHANGE],options:{themes:["light","dark"],emits:["click"]},description:"Theme toggle button that switches between light/dark modes"});export{E as AuThemeToggle};

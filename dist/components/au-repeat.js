import{g as Q}from"./chunk-hwrk9hgf.js";import{j as V}from"./chunk-bxze911z.js";import{n as S,o as U}from"./chunk-n8w89ctd.js";class W extends S{static baseClass="au-repeat";static observedAttributes=[];#b=[];#q=(q,B)=>B;#z=(q)=>`<div>${V(JSON.stringify(q))}</div>`;#g=new Map;set items(q){let B=this.#b;this.#b=q||[],Q.schedule(()=>this.#B(B))}get items(){return this.#b}set keyFn(q){this.#q=q}set renderItem(q){this.#z=q}render(){this.style.display="contents"}#B(q){let B=new Set,X=document.createDocumentFragment();for(let b=0;b<this.#b.length;b++){let z=this.#q(this.#b[b],b);B.add(z)}for(let[b,z]of this.#g)if(!B.has(b))z.remove(),this.#g.delete(b);let J=null;for(let b=0;b<this.#b.length;b++){let z=this.#b[b],G=this.#q(z,b),g=this.#g.get(G);if(!g){let D=document.createElement("div");D.innerHTML=this.#z(z,b),g=D.firstElementChild||D,g.dataset.muKey=G,this.#g.set(G,g)}else{let D=this.#z(z,b);if(g.outerHTML!==D){let P=document.createElement("div");P.innerHTML=D;let O=P.firstElementChild||P;O.dataset.muKey=G,g.replaceWith(O),this.#g.set(G,O),g=O}}if(J){if(g.previousElementSibling!==J)J.after(g)}else if(this.firstElementChild!==g)this.prepend(g);J=g}}getElement(q){return this.#g.get(q)}refresh(){this.#g.clear(),this.innerHTML="",Q.schedule(()=>this.#B([]))}}U("au-repeat",W);export{W as AuRepeat};

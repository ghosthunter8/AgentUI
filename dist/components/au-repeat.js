import{g as M}from"./chunk-hwrk9hgf.js";import{o as Q}from"./chunk-0f7ph7sp.js";import{p as O,q as P}from"./chunk-4tm8p8jh.js";class S extends O{static baseClass="au-repeat";static observedAttributes=[];#b=[];#q=(q,B)=>B;#z=(q)=>Q`<div>${JSON.stringify(q)}</div>`;#g=new Map;set items(q){let B=this.#b;this.#b=q||[],M.schedule(()=>this.#B(B))}get items(){return this.#b}set keyFn(q){this.#q=q}set renderItem(q){this.#z=q}render(){this.style.display="contents"}#B(q){let B=new Set,T=document.createDocumentFragment();for(let b=0;b<this.#b.length;b++){let z=this.#q(this.#b[b],b);B.add(z)}for(let[b,z]of this.#g)if(!B.has(b))z.remove(),this.#g.delete(b);let H=null;for(let b=0;b<this.#b.length;b++){let z=this.#b[b],G=this.#q(z,b),g=this.#g.get(G);if(!g){let D=document.createElement("div");D.innerHTML=this.#z(z,b),g=D.firstElementChild||D,g.dataset.muKey=G,this.#g.set(G,g)}else{let D=this.#z(z,b);if(g.outerHTML!==D){let L=document.createElement("div");L.innerHTML=D;let J=L.firstElementChild||L;J.dataset.muKey=G,g.replaceWith(J),this.#g.set(G,J),g=J}}if(H){if(g.previousElementSibling!==H)H.after(g)}else if(this.firstElementChild!==g)this.prepend(g);H=g}}getElement(q){return this.#g.get(q)}refresh(){this.#g.clear(),this.innerHTML="",M.schedule(()=>this.#B([]))}}P("au-repeat",S);export{S as AuRepeat};

import{h as M}from"./chunk-tc670bs4.js";import{p as Q}from"./chunk-yzw087eq.js";import{q as O,r as P}from"./chunk-j91n0wcr.js";class S extends O{static baseClass="au-repeat";static observedAttributes=[];#g=[];#q=(q,B)=>B;#z=(q)=>Q`<div>${JSON.stringify(q)}</div>`;#b=/*@__PURE__*/new Map;disconnectedCallback(){super.disconnectedCallback(),this.#b.clear()}set items(q){let B=this.#g;this.#g=q||[],M.schedule(()=>this.#B(B))}get items(){return this.#g}set keyFn(q){this.#q=q}set renderItem(q){this.#z=q}render(){this.style.display="contents"}#B(q){let B=/*@__PURE__*/new Set,T=document.createDocumentFragment();for(let b=0;b<this.#g.length;b++){let z=this.#q(this.#g[b],b);B.add(z)}for(let[b,z]of this.#b)if(!B.has(b))z.remove(),this.#b.delete(b);let H=null;for(let b=0;b<this.#g.length;b++){let z=this.#g[b],G=this.#q(z,b),g=this.#b.get(G);if(!g){let D=document.createElement("div");D.innerHTML=this.#z(z,b),g=D.firstElementChild||D,g.dataset.muKey=G,this.#b.set(G,g)}else{let D=this.#z(z,b);if(g.outerHTML!==D){let L=document.createElement("div");L.innerHTML=D;let J=L.firstElementChild||L;J.dataset.muKey=G,g.replaceWith(J),this.#b.set(G,J),g=J}}if(H){if(g.previousElementSibling!==H)H.after(g)}else if(this.firstElementChild!==g)this.prepend(g);H=g}}getElement(q){return this.#b.get(q)}refresh(){this.#b.clear(),this.innerHTML="",M.schedule(()=>this.#B([]))}}P("au-repeat",S);export{S as AuRepeat};

class J extends HTMLElement{static observedAttributes=[];static baseClass="";static cssFile=null;static _loadedCSS=new Set;static _bundleChecked=!1;static _bundleLoaded=!1;static useContainment=!0;static describe(){let j=this.baseClass||this.name.replace(/^Au/,"au-").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),q=J._describeCatalog?.[j]||{name:j,props:this.observedAttributes||[],baseClass:this.baseClass||"",cssFile:this.cssFile||null},B=typeof document<"u"?Array.from(document.querySelectorAll(j)):[];return{...q,runtime:{registered:typeof customElements<"u"&&!!customElements.get(j),version:"0.1.130",instanceCount:B.length,instances:B.slice(0,5).map((G)=>{let H={id:G.id||null};if("value"in G&&G.value!==void 0)H.value=G.value;if("checked"in G&&G.checked!==void 0)H.checked=G.checked;if(typeof G.offsetParent<"u")H.visible=G.offsetParent!==null;return H})}}}static _describeCatalog=null;_rendered=!1;_abortController=null;_timers=new Set;_intervals=new Set;constructor(){super();this._initAgentLogger()}_initAgentLogger(){if(!window.__AGENTUI_ERRORS__)window.__AGENTUI_ERRORS__=[];if(!window.AgentUIAgent)window.AgentUIAgent={reset:()=>{window.__AGENTUI_ERRORS__=[],console.log("[AgentUIAgent] Errors cleared")},getErrors:()=>window.__AGENTUI_ERRORS__,hasError:(j,q)=>{return window.__AGENTUI_ERRORS__.some((B)=>B.component===j.toLowerCase()&&B.code===q)}}}logError(j,q){let B={component:this.tagName.toLowerCase(),code:j,message:q,element:this,timestamp:Date.now()};window.__AGENTUI_ERRORS__.push(B),console.warn(`[AgentUI] ${j}: ${q}`,this)}connectedCallback(){if(!this._abortController)this._abortController=new AbortController;if(this.constructor.baseClass)this.classList.add(this.constructor.baseClass);if(this.constructor.useContainment&&!this.style.contain)this.style.contain="layout style";if(this.#j(),!this._rendered)this.render(),this._rendered=!0;this._loadComponentCSS(),this._inferSemanticAttributes()}#j(){this.listen(this,"click",(j)=>{let q=j.target.closest("[data-action]");if(!q||!this.contains(q))return;let B=q.dataset.action;if(this.handleAction)this.handleAction(B,q,j)})}_loadComponentCSS(){let j=this.constructor.cssFile;if(!j)return;if(!J._bundleChecked)J._bundleChecked=!0,J._bundleLoaded=!!document.querySelector('link[href*="agentui.css"], link[href*="agentui.min.css"]')||!!document.querySelector('link[href*="agentui-wc"]')||!!document.querySelector('link[href*="components.css"]')||!!document.querySelector("style[data-agentui]")||document.styleSheets&&Array.from(document.styleSheets).some((H)=>{try{return H.cssRules&&Array.from(H.cssRules).some((I)=>I.selectorText?.includes(".au-button")||I.selectorText?.includes(".au-chip"))}catch{return!1}});if(J._bundleLoaded)return;if(J._loadedCSS.has(j))return;J._loadedCSS.add(j);let q=document.createElement("link");q.id=`au-css-${j}`,q.rel="stylesheet";let B="/styles/",G=document.querySelector('link[href*="/styles/"]');if(G){let H=G.href.match(/(.*\/(?:src\/|dist\/)?styles\/)/);if(H)B=H[1]}else{let H=document.querySelector('link[href*="/dist/"]');if(H){let I=H.href.match(/(.*\/dist\/)/);if(I)B=I[1]+"styles/"}else{let I=document.querySelector('script[src*="/src/"]');if(I){let K=I.src.match(/(.*\/src\/)/);if(K)B=K[1]+"styles/"}}}q.href=`${B}components/${j}.css`,document.head.appendChild(q)}_inferSemanticAttributes(){let j=this.tagName.toLowerCase();if(this.hasAttribute("data-au-action"))return;let q="",B="";switch(j){case"au-button":q=this._inferButtonAction(),B=this._inferButtonRole();break;case"au-input":case"au-textarea":q="input",B="text-field";break;case"au-checkbox":case"au-switch":q="toggle",B="control";break;case"au-dropdown":q="select",B="selector";break;case"au-modal":q="dialog",B="overlay";break;case"au-tabs":q="navigate",B="navigation";break;case"au-card":B="container";break}if(q)this.setAttribute("data-au-action",q);if(B)this.setAttribute("data-au-role",B)}_inferButtonAction(){let j=this.textContent?.toLowerCase().trim()||"";if(/^(save|submit|confirm|send|create|add|apply|ok|yes)$/.test(j))return"submit";if(/^(cancel|close|dismiss|no|nevermind)$/.test(j))return"cancel";if(/^(delete|remove|clear|trash)$/.test(j))return"delete";if(/^(back|next|previous|forward|continue)$/.test(j))return"navigate";return"click"}_inferButtonRole(){let j=this.getAttribute("variant");if(j==="filled"||j==="elevated")return"primary-action";if(j==="tonal"||j==="outlined")return"secondary-action";if(j==="text")return"tertiary-action";if(j==="danger")return"destructive-action";return"action"}disconnectedCallback(){if(this._abortController)this._abortController.abort(),this._abortController=null;for(let j of this._timers)clearTimeout(j);this._timers.clear();for(let j of this._intervals)clearInterval(j);this._intervals.clear(),this.cleanup()}cleanup(){}attributeChangedCallback(j,q,B){if(q!==B&&this._rendered)this.update(j,B,q)}render(){}update(j,q,B){}setupEvents(){}attr(j,q=""){return this.getAttribute(j)??q}has(j){return this.hasAttribute(j)}emit(j,q={}){this.dispatchEvent(new CustomEvent(j,{bubbles:!0,composed:!0,detail:q}))}listen(j,q,B,G={}){if(!this._abortController)this._abortController=new AbortController;let H={...G,signal:this._abortController.signal};j.addEventListener(q,B,H)}setTimeout(j,q){let B;return B=setTimeout(()=>{this._timers.delete(B),j()},q),this._timers.add(B),B}setInterval(j,q){let B=setInterval(j,q);return this._intervals.add(B),B}setupActivation(j){this.updateTabindex(),this.listen(this,"keydown",(q)=>{if((q.key==="Enter"||q.key===" ")&&!this.has("disabled"))q.preventDefault(),j()})}updateTabindex(){this.setAttribute("tabindex",this.has("disabled")?"-1":"0")}setDisplay(j){this.style.display=j}get isDisabled(){return this.has("disabled")}}function O(j,q,B={}){if(customElements.get(j))return;let G=B.priority||"user-blocking";if(typeof scheduler<"u"&&scheduler.postTask)scheduler.postTask(()=>{if(!customElements.get(j))customElements.define(j,q)},{priority:G});else customElements.define(j,q)}
export{J as n,O as o};

var X=/^(save|submit|confirm|send|create|add|apply|ok|yes)$/,Z=/^(cancel|close|dismiss|no|nevermind)$/,$=/^(delete|remove|clear|trash)$/,z=/^(back|next|previous|forward|continue)$/;class O extends HTMLElement{static observedAttributes=[];static baseClass="";static cssFile=null;static _loadedCSS=/*@__PURE__*/new Set;static _bundleChecked=!1;static _bundleLoaded=!1;static _agentLoggerInitialized=!1;static useContainment=!0;static describe(){let j=this.baseClass||this.name.replace(/^Au/,"au-").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),q=O._describeCatalog?.[j]||{name:j,props:this.observedAttributes||[],baseClass:this.baseClass||"",cssFile:this.cssFile||null},H=typeof document<"u"?Array.from(document.querySelectorAll(j)):[];return{...q,runtime:{registered:typeof customElements<"u"&&!!customElements.get(j),version:"0.1.146",instanceCount:H.length,instances:H.slice(0,5).map((J)=>{let K={id:J.id||null};if("value"in J&&J.value!==void 0)K.value=J.value;if("checked"in J&&J.checked!==void 0)K.checked=J.checked;if(typeof J.offsetParent<"u")K.visible=J.offsetParent!==null;return K})}}}static _describeCatalog=null;_rendered=!1;_abortController=null;_timers=/*@__PURE__*/new Set;_intervals=/*@__PURE__*/new Set;isReady=!1;_readyResolve=null;ready=new Promise((j)=>{this._readyResolve=j});constructor(){super();if(!O._agentLoggerInitialized)O._agentLoggerInitialized=!0,this._initAgentLogger()}_initAgentLogger(){if(!window.__AGENTUI_ERRORS__)window.__AGENTUI_ERRORS__=[];if(!window.AgentUIAgent)window.AgentUIAgent={reset:()=>{window.__AGENTUI_ERRORS__=[]},getErrors:()=>window.__AGENTUI_ERRORS__,hasError:(j,q)=>{return window.__AGENTUI_ERRORS__.some((H)=>H.component===j.toLowerCase()&&H.code===q)}}}logError(j,q){let H={component:this.tagName.toLowerCase(),code:j,message:q,element:this,timestamp:Date.now()};window.__AGENTUI_ERRORS__.push(H),console.warn(`[AgentUI] ${j}: ${q}`,this)}connectedCallback(){if(!this._abortController)this._abortController=new AbortController;if(this.constructor.baseClass)this.classList.add(this.constructor.baseClass);if(this.constructor.useContainment&&!this.style.contain)this.style.contain="layout style";if(this.#j(),!this._rendered)this.render(),this._rendered=!0;if(this._loadComponentCSS(),this._inferSemanticAttributes(),!this.isReady){this.isReady=!0,this._readyResolve(this);try{this.dispatchEvent(new CustomEvent("au:ready",{bubbles:!0,composed:!0}))}catch(j){}}}#j(){this.listen(this,"click",(j)=>{let q=j.target.closest("[data-action]");if(!q||!this.contains(q))return;let H=q.dataset.action;if(this.handleAction)this.handleAction(H,q,j)})}_loadComponentCSS(){let j=this.constructor.cssFile;if(!j)return;if(!O._bundleChecked)O._bundleChecked=!0,O._bundleLoaded=!!document.querySelector('link[href*="agentui.css"], link[href*="agentui.min.css"]')||!!document.querySelector('link[href*="agentui-wc"]')||!!document.querySelector('link[href*="components.css"]')||!!document.querySelector("style[data-agentui]")||typeof getComputedStyle<"u"&&getComputedStyle(document.documentElement).getPropertyValue("--md-sys-color-primary").trim()!=="";if(O._bundleLoaded)return;if(O._loadedCSS.has(j))return;O._loadedCSS.add(j);let q=document.createElement("link");q.id=`au-css-${j}`,q.rel="stylesheet";let H="/styles/",J=document.querySelector('link[href*="/styles/"]');if(J){let K=J.href.match(/(.*\/(?:src\/|dist\/)?styles\/)/);if(K)H=K[1]}else{let K=document.querySelector('link[href*="/dist/"]');if(K){let Q=K.href.match(/(.*\/dist\/)/);if(Q)H=Q[1]+"styles/"}else{let Q=document.querySelector('script[src*="/src/"]');if(Q){let W=Q.src.match(/(.*\/src\/)/);if(W)H=W[1]+"styles/"}}}if(H.startsWith("http")||H.startsWith("//"))try{if(new URL(H,window.location.origin).origin!==window.location.origin)console.warn(`[AgentUI] Blocked cross-origin CSS path: ${H}`),H="/styles/"}catch{H="/styles/"}q.href=`${H}components/${j}.css`,document.head.appendChild(q)}_inferSemanticAttributes(){let j=this.tagName.toLowerCase();if(this.hasAttribute("data-au-action"))return;let q="",H="";switch(j){case"au-button":q=this._inferButtonAction(),H=this._inferButtonRole();break;case"au-input":case"au-textarea":q="input",H="text-field";break;case"au-checkbox":case"au-switch":q="toggle",H="control";break;case"au-dropdown":q="select",H="selector";break;case"au-modal":q="dialog",H="overlay";break;case"au-tabs":q="navigate",H="navigation";break;case"au-card":H="container";break}if(q)this.setAttribute("data-au-action",q);if(H)this.setAttribute("data-au-role",H)}_inferButtonAction(){let j=this.textContent?.toLowerCase().trim()||"";if(X.test(j))return"submit";if(Z.test(j))return"cancel";if($.test(j))return"delete";if(z.test(j))return"navigate";return"click"}_inferButtonRole(){let j=this.getAttribute("variant");if(j==="filled"||j==="elevated")return"primary-action";if(j==="tonal"||j==="outlined")return"secondary-action";if(j==="text")return"tertiary-action";if(j==="danger")return"destructive-action";return"action"}disconnectedCallback(){if(this._abortController)this._abortController.abort(),this._abortController=null;for(let j of this._timers)clearTimeout(j);this._timers.clear();for(let j of this._intervals)clearInterval(j);this._intervals.clear(),this.cleanup()}cleanup(){}attributeChangedCallback(j,q,H){if(q!==H&&this._rendered)this.update(j,H,q)}render(){}update(j,q,H){}setupEvents(){}attr(j,q=""){return this.getAttribute(j)??q}has(j){return this.hasAttribute(j)}emit(j,q={}){this.dispatchEvent(new CustomEvent(j,{bubbles:!0,composed:!0,detail:q}))}listen(j,q,H,J={}){if(!this._abortController)this._abortController=new AbortController;let K={...J,signal:this._abortController.signal};j.addEventListener(q,H,K)}setTimeout(j,q){let H;return H=setTimeout(()=>{this._timers.delete(H),j()},q),this._timers.add(H),H}setInterval(j,q){let H=setInterval(j,q);return this._intervals.add(H),H}setupActivation(j){this.updateTabindex(),this.listen(this,"keydown",(q)=>{if((q.key==="Enter"||q.key===" ")&&!this.has("disabled"))q.preventDefault(),j()})}updateTabindex(){this.setAttribute("tabindex",this.has("disabled")?"-1":"0")}setDisplay(j){this.style.display=j}get isDisabled(){return this.has("disabled")}}function B(j,q,H={}){if(customElements.get(j))return;let J=H.priority||"user-blocking";if(typeof scheduler<"u"&&scheduler.postTask)scheduler.postTask(()=>{if(!customElements.get(j))customElements.define(j,q)},{priority:J});else customElements.define(j,q)}
export{O as q,B as r};
